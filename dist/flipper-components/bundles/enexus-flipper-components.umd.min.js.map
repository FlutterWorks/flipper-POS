{"version":3,"sources":["../../../projects/flipper-components/src/lib/lazy-if.directive.ts","../../../projects/flipper-components/src/lib/router-progress/router-progress.component.ts","../../../projects/flipper-components/src/lib/header/header.component.ts","../../../projects/flipper-components/src/lib/table-overlay/table-overlay.component.ts","../../../projects/flipper-components/src/lib/spinner/spinner.component.ts","../../../projects/flipper-components/src/lib/message/message.component.ts","../../../projects/flipper-components/src/lib/pipe/round-number.pipe.ts","../../../projects/flipper-components/src/lib/pipe/calculate-total-class.pipe.ts","../../../projects/flipper-components/src/lib/directive/match-height.directive.ts","../../../projects/flipper-components/src/lib/pipe/merge-arry-by-id.pipe.ts","../../../projects/flipper-components/src/lib/pipe/array-remove-item.pipe.ts","../../../projects/flipper-components/src/lib/pipe/find-key.pipe.ts","../../../projects/flipper-components/src/lib/notifications/notification.ts","../../../projects/flipper-components/src/lib/notifications/notification.service.ts","../../../projects/flipper-components/src/lib/notifications/notification.component.ts","../../../projects/flipper-components/src/lib/generate-barcode/generate-barcode.component.ts","../../../projects/flipper-components/src/lib/loading-icon/loading-icon.component.ts","../../../projects/flipper-components/src/lib/components.module.ts","../../../projects/flipper-components/src/lib/entries/status-enum.ts","../../../projects/flipper-components/src/lib/entries/order-type-enum.ts","../../../projects/flipper-components/src/lib/entries/business.ts","../../../projects/flipper-components/src/lib/entries/menu-entries.ts","../../../projects/flipper-components/src/lib/entries/menu.ts","../../../projects/flipper-components/src/lib/entries/user.ts","../../../projects/flipper-components/src/lib/entries/dashboard-entries.ts","../../../projects/flipper-components/src/lib/entries/branch.ts","../../../projects/flipper-components/src/lib/entries/price.ts","../../../projects/flipper-components/src/lib/entries/product.ts","../../../projects/flipper-components/src/lib/entries/price-variant.ts","../../../projects/flipper-components/src/lib/entries/order-details.ts","../../../projects/flipper-components/src/lib/entries/stock-history.ts","../../../projects/flipper-components/src/lib/entries/order.ts","../../../projects/flipper-components/src/lib/entries/variant.ts","../../../projects/flipper-components/src/lib/entries/types.ts","../../../projects/flipper-components/src/lib/entries/business-category.ts","../../../projects/flipper-components/src/lib/entries/user-business.ts","../../../projects/flipper-components/src/lib/entries/taxes.ts","../../../projects/flipper-components/src/lib/entries/reason.ts","../../../projects/flipper-components/src/lib/entries/branch-products.ts","../../../projects/flipper-components/src/lib/entries/stocks.ts","../../../projects/flipper-components/src/lib/entries/labels.ts","../../../projects/flipper-components/src/lib/entries/subscription.ts","../../../projects/flipper-components/src/lib/events/channels.ts","../../../node_modules/tslib/tslib.es6.js","../../../projects/flipper-components/src/lib/events/order-event.ts","../../../projects/flipper-components/src/lib/events/price-event.ts","../../../projects/flipper-components/src/lib/events/price-variant-event.ts","../../../projects/flipper-components/src/lib/events/product-event.ts","../../../projects/flipper-components/src/lib/events/shopping-event.ts","../../../projects/flipper-components/src/lib/events/variant-event.ts","../../../projects/flipper-components/src/lib/events/variants-event.ts","../../../projects/flipper-components/src/lib/events/branch-products-event.ts","../../../projects/flipper-components/src/lib/events/error-messaage-event.ts","../../../projects/flipper-components/src/lib/events/products-event.ts","../../../projects/flipper-components/src/lib/events/stocks-event.ts","../../../projects/flipper-components/src/lib/events/current-branch-event.ts","../../../projects/flipper-components/src/lib/events/current-business-event.ts","../../../projects/flipper-components/src/lib/events/user-logged-event.ts","../../../projects/flipper-components/src/lib/events/user-subscription-event.ts","../../../projects/flipper-components/src/lib/events/businesses-event.ts","../../../projects/flipper-components/src/lib/events/draft-product-event.ts","../../../projects/flipper-components/src/lib/events/draft-stockHistory-event.ts","../../../projects/flipper-components/src/lib/events/draft-stocks-event.ts","../../../projects/flipper-components/src/lib/events/draft-variants-event.ts","../../../projects/flipper-components/src/lib/events/default-tax-event.ts","../../../projects/flipper-components/src/lib/events/taxes-event.ts","../../../projects/flipper-components/src/lib/events/branches-event.ts","../../../projects/flipper-components/src/lib/events/current-stock-event.ts","../../../projects/flipper-components/src/lib/events/any-event.ts","../../../projects/flipper-components/src/lib/animations/animations.ts","../../../projects/flipper-components/src/lib/services/settings.service.ts","../../../projects/flipper-components/src/lib/constants.ts","../../../projects/flipper-components/src/lib/services/pouchdb.service.ts","../../../projects/flipper-components/src/lib/db-config.ts","../../../projects/flipper-components/src/lib/services/active-user.ts","../../../projects/flipper-components/src/lib/services/active-business.ts","../../../projects/flipper-components/src/lib/services/active-branch.ts","../../../projects/flipper-components/src/lib/services/cache.service.ts"],"names":["LazyIfDirective","templateRef","viewContainer","this","loaded","Object","defineProperty","prototype","condition","createEmbeddedView","Directive","args","selector","TemplateRef","ViewContainerRef","Input","router","_this","document","loading","events","pipe","filter","event","NavigationStart","subscribe","NavigationEnd","NavigationCancel","NavigationError","background","getElementById","setAttribute","setTimeout","outerHTML","Component","template","animations","trigger","transition","style","top","opacity","animate","Router","TableOverlayComponent","ngOnInit","noDataLabel","SpinnerComponent","toFill","color","size","transform","ColorToFillClassPipe","HostBinding","icon","title","message","RoundNumberPipe","nums","decimals","newString","Number","Math","round","toString","numString","lastIndexOf","cutoff","d1","substring","isNaN","String","decs","length","i","formatNumbers","replace","Pipe","name","Injectable","providedIn","CalculateTotalClassPipe","arrayOfdData","prop","total","len","parseFloat","pure","MatchHeightDirective","el","onResize","matchHeight","nativeElement","myMatchHeight","ngAfterViewChecked","parent","className","children","getElementsByClassName","maxHeight","Array","from","map","x","getBoundingClientRect","height","reduce","prev","curr","forEach","ElementRef","HostListener","MergeArryByIdPipe","originArrayData","mergeArrayData","mergeById","with","arr","arr2","_.map","item","_.find","obj","id","ArrayRemoveItemPipe","arrayOfData","value","arrayRemove","objectToRemove","ele","JSON","stringify","FindKeyPipe","numKeys","key","find","k","NotificationType","Notification","type","timeout","NotificationService","subject","Subject","idx","getObservable","asObservable","info","next","success","warning","error","NotificationListComponent","notificationSvc","notifications","addNotification","notification","push","close","subscription","ngOnDestroy","unsubscribe","notif","labels","showName","showSku","NgModule","imports","HttpClientModule","CommonModule","VendorsModule","ColorModule","FlipperEventModule","DialogModule","NgxBarcodeModule","declarations","LoadingIconComponent","RouterProgressComponent","HeaderComponent","MessageComponent","GenerateBarcodeComponent","exports","entryComponents","providers","STATUS","ORDERTYPE","params","CHANNELS","ORDER","PRODUCTS","PRICES","PRICEVARIANTS","SHOPPINGS","VARIANTS","extendStatics","d","b","setPrototypeOf","__proto__","p","hasOwnProperty","call","__extends","TypeError","__","constructor","create","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","pop","__values","o","s","m","OrderEvent","order","_super","CHANNEL","BusEvent","PriceEvent","price","PriceVariantEvent","priceVariant","ProductEvent","product","ShoppingEvent","shopping","VariantEvent","variant","VariantsEvent","variants","BranchProductsEvent","branchProducts","ErrorMessageEvent","errorMessage","ProductsEvent","products","StocksEvent","stocks","CurrentBranchEvent","branch","action","CurrentBusinessEvent","business","UserLoggedEvent","user","UserSubscriptionEvent","BusinessesEvent","businesses","DraftProductEvent","draftProduct","DraftStockHistoryEvent","draftStockHistory","DraftStocksEvent","draftStocks","DraftVariantsEvent","draftVariants","DefaultTaxesEvent","defaultTax","TaxesEvent","taxes","BranchesEvent","branches","CurrentStockEvent","currentStock","AnyEvent","any_event","fadeInScaleUpAnimation","animation","fadeInAnimation","fadeOutAnimation","SettingsService","countries","values","httpGet","currencies","timezones","units","reasons","theUrl","xmlHttp","XMLHttpRequest","open","send","parse","responseText","flipperUrl","PouchDBService","http","eventBus","isInstantiated","listener","EventEmitter","listenerLogin","PouchDB","plugin","require","default","connect","debugPouch","sync","localStorage","getItem","activeUser","table","database","createIndex","index","fields","$eq","active","query","fastQuery","_a","docs","console","log","err_1","callbackQuery","callback","err","activeBusiness","userId","hasDraftProduct","businessId","isDraft","currentBusiness","currentTax","isDefault","res","listBusinessBranches","get","toPromise","listBusinessTaxes","listBusinessTaxes2","activeBranch","dbName","changes","doc","channels","fetch","allDocs","include_docs","conflicts","remove","status","Error","_resolve","getResponse","isArray","makeid","characters","charactersLength","charAt","floor","random","uid","uuidv1","put","_id","channel","_rev","getChangeListener","getChangeListenerLogin","unique","a","removeDuplicates","contains","array","array_1","array_1_1","newObj","isEqual","obj1","obj2","ary","HttpClient","FlipperEventBusService","TABLES","APP_CONFIG","InjectionToken","DEFAULT_FLIPPER_DB_CONFIG","engine","tables","USER","BUSINESSCATEGORY","REASON","TYPES","MENU","BUSINESS","BRANCHES","USERBUSINESS","TAXES","BRANCHPRODUCTS","STOCKS","ORDERDETAILS","STOCKHISTORY","DEVICE","RECEIPT","demo","email","password","defaultMenu","route","isSetting","defaultReasons","operation","createdAt","Date","updatedAt","defaultCategory","type_id","defaultType","Tables","menu","businessCategory","userBusiness","orderDetails","stockHistory","PouchConfig","sessionId","bucket","syncUrl","canSync","menus","businessTypes","businessCategories","businessUsers","orders","stockHistories","SUBSCRIPTION","ActiveUser","currentUser","init","of","undefined","set","publish","ActiveBusiness","ActiveBranch","currentBranch","CacheService","save","options","expirationMins","expirationMS","record","data","expiration","getTime","hasExpiration","setItem","load","now","removeItem","cleanLocalStorage","clear"],"mappings":"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","sourcesContent":["import { Directive, Input, TemplateRef, ViewContainerRef } from '@angular/core'\r\n\r\n@Directive({\r\n  selector: '[flipperLibLazyIf]',\r\n})\r\nexport class LazyIfDirective {\r\n  private loaded = false\r\n\r\n  constructor(private templateRef: TemplateRef<any>, private viewContainer: ViewContainerRef) {}\r\n\r\n  @Input() set libLazyIf(condition: boolean) {\r\n    if (condition && !this.loaded) {\r\n      this.viewContainer.createEmbeddedView(this.templateRef)\r\n      this.loaded = true\r\n    }\r\n  }\r\n}\r\n","import { Component } from '@angular/core'\r\nimport { NavigationCancel, NavigationEnd, NavigationError, NavigationStart, Router } from '@angular/router'\r\nimport { filter } from 'rxjs/internal/operators'\r\nimport { animate, style, transition, trigger } from '@angular/animations'\r\n\r\n@Component({\r\n  selector: 'flipper-router-progress',\r\n  templateUrl: './router-progress.component.html',\r\n  styleUrls: ['./router-progress.component.scss'],\r\n  animations: [\r\n    trigger('myAnimation', [\r\n      transition(':enter', [style({ top: '0px', opacity: 1 })]),\r\n      transition(':leave', [style({ top: '0px', opacity: 1 }), animate('500ms', style({ top: '-5px', opacity: 0 }))]),\r\n    ]),\r\n  ],\r\n})\r\nexport class RouterProgressComponent {\r\n  document = document\r\n  loading = false\r\n\r\n  constructor(router: Router) {\r\n    router.events\r\n      .pipe(\r\n        filter(event => {\r\n          return event instanceof NavigationStart\r\n        })\r\n      )\r\n      .subscribe(() => {\r\n        this.loading = true\r\n      })\r\n\r\n    router.events\r\n      .pipe(\r\n        filter(event => {\r\n          return event instanceof NavigationEnd || event instanceof NavigationCancel || event instanceof NavigationError\r\n        })\r\n      )\r\n      .subscribe(() => {\r\n        this.loading = false\r\n        // Remove loading background if any on application start\r\n        const background = this.document.getElementById('background-logo')\r\n        if (background) {\r\n          background.setAttribute('class', 'fade-out')\r\n          setTimeout(() => {\r\n            background.outerHTML = ''\r\n          }, 200)\r\n        }\r\n      })\r\n  }\r\n}\r\n","import { Component } from '@angular/core'\r\n\r\n@Component({\r\n  selector: 'flipper-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss'],\r\n})\r\nexport class HeaderComponent {}\r\n","import { Component, Input, OnInit } from '@angular/core'\r\nimport { MatTableDataSource } from '@angular/material/table'\r\n\r\n@Component({\r\n  selector: 'flipper-table-overlay',\r\n  templateUrl: './table-overlay.component.html',\r\n  styleUrls: ['./table-overlay.component.scss'],\r\n})\r\nexport class TableOverlayComponent implements OnInit {\r\n  @Input() loading: boolean\r\n  @Input() dataSource: MatTableDataSource<any>\r\n  @Input() noDataLabel: string\r\n  @Input() title: string\r\n\r\n  ngOnInit(): void {\r\n    this.noDataLabel = this.noDataLabel || 'No data'\r\n  }\r\n}\r\n","import { Component, HostBinding, Input, OnInit } from '@angular/core'\r\nimport { ColorToFillClassPipe, Color } from '@enexus/flipper-color'\r\n\r\n@Component({\r\n  selector: 'flipper-spinner',\r\n  templateUrl: './spinner.component.html',\r\n  styleUrls: ['./spinner.component.scss'],\r\n})\r\nexport class SpinnerComponent implements OnInit {\r\n  @Input() color: Color = 'primary'\r\n  @Input() size = 24\r\n\r\n  @HostBinding('class')\r\n  get hostClass(): string {\r\n    return this.toFill.transform(this.color)\r\n  }\r\n\r\n  constructor(private toFill: ColorToFillClassPipe) {}\r\n\r\n  ngOnInit() {}\r\n}\r\n","import { Component, Input } from '@angular/core'\r\n\r\n@Component({\r\n  selector: 'flipper-message',\r\n  templateUrl: './message.component.html',\r\n  styleUrls: ['./message.component.scss'],\r\n})\r\nexport class MessageComponent {\r\n  @Input() icon = 'search.svg'\r\n  @Input() title = ''\r\n  @Input() message = ''\r\n}\r\n","import { Pipe, PipeTransform, Injectable } from '@angular/core'\r\n\r\n@Pipe({\r\n  name: 'roundNumber',\r\n})\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class RoundNumberPipe implements PipeTransform {\r\n  transform(nums: number, decimals: number = 2): any {\r\n    let newString // The new rounded number\r\n    decimals = Number(decimals)\r\n    if (decimals < 1) {\r\n      newString = Math.round(nums).toString()\r\n    } else {\r\n      let numString = nums.toString()\r\n      if (numString.lastIndexOf('.') === -1) {\r\n        // If there is no decimal point\r\n        numString += '.' // give it one at the end\r\n      }\r\n      let cutoff = numString.lastIndexOf('.') + decimals // The point at which to truncate the number\r\n      let d1 = Number(numString.substring(cutoff, cutoff + 1)) // The value of the last decimal place that we'll end up with\r\n      const d2 = Number(numString.substring(cutoff + 1, cutoff + 2)) // The next decimal, after the last one we want\r\n      if (d2 >= 5) {\r\n        // Do we need to round up at all? If not, the string will just be truncated\r\n        if (d1 === 9 && cutoff > 0) {\r\n          // If the last digit is 9, find a new cutoff point\r\n          while (cutoff > 0 && (d1 === 9 || isNaN(d1))) {\r\n            if (String(d1) !== '.') {\r\n              cutoff -= 1\r\n              d1 = Number(numString.substring(cutoff, cutoff + 1))\r\n            } else {\r\n              cutoff -= 1\r\n            }\r\n          }\r\n        }\r\n        d1 += 1\r\n      }\r\n      if (d1 === 10) {\r\n        numString = numString.substring(0, numString.lastIndexOf('.'))\r\n        const roundedNum = Number(numString) + 1\r\n        newString = roundedNum.toString() + '.'\r\n      } else {\r\n        newString = numString.substring(0, cutoff) + d1.toString()\r\n      }\r\n    }\r\n    if (decimals > 0) {\r\n      if (newString.lastIndexOf('.') === -1) {\r\n        // Do this again, to the new string\r\n        newString += '.'\r\n      }\r\n      const decs = newString.substring(newString.lastIndexOf('.') + 1).length\r\n      for (let i = 0; i < decimals - decs; i++) {\r\n        newString += '0'\r\n      }\r\n    }\r\n    // var newNumber = Number(newString);// make it a number if you like\r\n    return this.formatNumbers(newString) // Output the result to the form field (change for your purposes)\r\n  }\r\n\r\n  formatNumbers(nums) {\r\n    return nums.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,')\r\n  }\r\n}\r\n","import { Pipe, PipeTransform, Injectable } from '@angular/core'\r\n\r\n@Pipe({\r\n  name: 'calculateTotalClass',\r\n  pure: true,\r\n})\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class CalculateTotalClassPipe implements PipeTransform {\r\n  transform<T>(arrayOfdData: Array<T>, prop?: string): any {\r\n    let total: any = 0.0\r\n    if (arrayOfdData.length > 0) {\r\n      for (let i = 0, len = arrayOfdData.length; i < len; i++) {\r\n        total += parseFloat(arrayOfdData[i][prop])\r\n      }\r\n    }\r\n    return total\r\n  }\r\n}\r\n","import { Directive, AfterViewChecked, Input, ElementRef, HostListener } from '@angular/core'\r\n\r\n@Directive({\r\n  selector: '[flipperMyMatchHeight]',\r\n})\r\nexport class MatchHeightDirective implements AfterViewChecked {\r\n  @Input()\r\n  myMatchHeight: string\r\n\r\n  constructor(private el: ElementRef) {}\r\n\r\n  @HostListener('window:resize')\r\n  onResize() {\r\n    // call our matchHeight function here\r\n    this.matchHeight(this.el.nativeElement, this.myMatchHeight)\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    // call our matchHeight function here later\r\n    this.matchHeight(this.el.nativeElement, this.myMatchHeight)\r\n  }\r\n\r\n  matchHeight(parent: HTMLElement, className: string) {\r\n    // match height logic here\r\n\r\n    if (!parent) {\r\n      return\r\n    }\r\n\r\n    // step 1: find all the child elements with the selected class name\r\n    const children = parent.getElementsByClassName(className)\r\n\r\n    if (!children) {\r\n      return\r\n    }\r\n\r\n    // step 2a: get all the child elements heights\r\n    const itemHeights = Array.from(children).map(x => x.getBoundingClientRect().height)\r\n\r\n    // step 2b: find out the tallest\r\n    const maxHeight = itemHeights.reduce((prev, curr) => {\r\n      return curr > prev ? curr : prev\r\n    }, 0)\r\n\r\n    // step 3: update all the child elements to the tallest height\r\n    Array.from(children).forEach((x: HTMLElement) => (x.style.height = `${maxHeight}px`))\r\n  }\r\n}\r\n","import { Pipe, PipeTransform, Injectable } from '@angular/core'\r\nimport * as _ from 'lodash'\r\n\r\n@Pipe({\r\n  name: 'mergeArryById',\r\n})\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class MergeArryByIdPipe implements PipeTransform {\r\n  transform<T>(originArrayData: Array<T>, mergeArrayData: Array<T>): Array<T> {\r\n    return this.mergeById(originArrayData).with(mergeArrayData)\r\n  }\r\n\r\n  mergeById(arr) {\r\n    return {\r\n      with(arr2) {\r\n        return _.map(arr, item => {\r\n          return _.find(arr2, obj => obj.id === item.id) || item\r\n        })\r\n      },\r\n    }\r\n  }\r\n}\r\n","import { Pipe, PipeTransform, Injectable } from '@angular/core'\r\n\r\n@Pipe({\r\n  name: 'arrayRemoveItem',\r\n})\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ArrayRemoveItemPipe implements PipeTransform {\r\n  transform<T>(arrayOfData: Array<T>, value: object): Array<T> {\r\n    return this.arrayRemove<T>(arrayOfData, value)\r\n  }\r\n\r\n  arrayRemove<T>(arr: Array<T> = [], objectToRemove): Array<T> {\r\n    if (arr.length > 0) {\r\n      return arr.filter(ele => {\r\n        return JSON.stringify(ele) !== JSON.stringify(objectToRemove)\r\n      })\r\n    } else {\r\n      return arr\r\n    }\r\n  }\r\n}\r\n","import { Pipe, PipeTransform, Injectable } from '@angular/core'\r\n\r\n@Pipe({\r\n  name: 'findKey',\r\n  pure: true,\r\n})\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class FindKeyPipe implements PipeTransform {\r\n  transform(numKeys: any[], key: any): boolean {\r\n    return numKeys.find(k => k === key) ? true : false\r\n  }\r\n}\r\n","export class Notification {\r\n  constructor(\r\n    public id: number,\r\n    public type: NotificationType,\r\n    public title: string,\r\n    public message: string,\r\n    public timeout: number\r\n  ) {}\r\n}\r\n\r\nexport enum NotificationType {\r\n  success = 0,\r\n  warning = 1,\r\n  error = 2,\r\n  info = 3,\r\n}\r\n","import { Injectable } from '@angular/core'\r\nimport { Subject, Observable } from 'rxjs'\r\nimport { Notification, NotificationType } from './notification'\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class NotificationService {\r\n  private subject = new Subject<Notification>()\r\n  private idx = 0\r\n\r\n  constructor() {}\r\n\r\n  getObservable(): Observable<Notification> {\r\n    return this.subject.asObservable()\r\n  }\r\n\r\n  info(title: string, message: string, timeout = 3000) {\r\n    this.subject.next(new Notification(this.idx++, NotificationType.info, title, message, timeout))\r\n  }\r\n\r\n  success(title: string, message: string, timeout = 3000) {\r\n    this.subject.next(new Notification(this.idx++, NotificationType.success, title, message, timeout))\r\n  }\r\n\r\n  warning(title: string, message: string, timeout = 3000) {\r\n    this.subject.next(new Notification(this.idx++, NotificationType.warning, title, message, timeout))\r\n  }\r\n\r\n  error(title: string, message: string, timeout = 0) {\r\n    this.subject.next(new Notification(this.idx++, NotificationType.error, title, message, timeout))\r\n  }\r\n}\r\n","import { Component, OnInit, OnDestroy } from '@angular/core'\r\nimport { NotificationService } from './notification.service'\r\nimport { Notification, NotificationType } from './notification'\r\nimport { Subscription } from 'rxjs'\r\n\r\n@Component({\r\n  selector: 'flipper-notification',\r\n  templateUrl: './notification.component.html',\r\n  styleUrls: ['./notification.component.scss'],\r\n})\r\nexport class NotificationListComponent implements OnInit, OnDestroy {\r\n  notifications: Notification[] = []\r\n  private subscription: Subscription\r\n\r\n  constructor(private notificationSvc: NotificationService) {}\r\n\r\n  private addNotification(notification: Notification) {\r\n    this.notifications.push(notification)\r\n\r\n    if (notification.timeout !== 0) {\r\n      setTimeout(() => this.close(notification), notification.timeout)\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.subscription = this.notificationSvc\r\n      .getObservable()\r\n      .subscribe(notification => this.addNotification(notification))\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe()\r\n  }\r\n\r\n  close(notification: Notification) {\r\n    this.notifications = this.notifications.filter(notif => notif.id !== notification.id)\r\n  }\r\n\r\n  className(notification: Notification): string {\r\n    let style: string\r\n\r\n    switch (notification.type) {\r\n      case NotificationType.success:\r\n        style = 'success'\r\n        break\r\n\r\n      case NotificationType.warning:\r\n        style = 'warning'\r\n        break\r\n\r\n      case NotificationType.error:\r\n        style = 'error'\r\n        break\r\n\r\n      default:\r\n        style = 'info'\r\n        break\r\n    }\r\n\r\n    return style\r\n  }\r\n}\r\n","import { Component, Input } from '@angular/core'\r\nimport { Labels } from '../entries'\r\n\r\n@Component({\r\n  selector: 'flipper-generate-barcode',\r\n  templateUrl: './generate-barcode.component.html',\r\n  styleUrls: ['./generate-barcode.component.css'],\r\n})\r\nexport class GenerateBarcodeComponent {\r\n  @Input() labels: Labels[] = []\r\n  @Input() showName = true\r\n  @Input() showSku = true\r\n}\r\n","import { Input, Component } from '@angular/core'\r\n\r\n@Component({\r\n  selector: 'flipper-loading-icon',\r\n  templateUrl: './loading-icon.component.html',\r\n  styleUrls: ['./loading-icon.component.scss'],\r\n})\r\nexport class LoadingIconComponent {\r\n  @Input() loading: boolean\r\n}\r\n","import { NgModule } from '@angular/core'\r\nimport { CommonModule } from '@angular/common'\r\nimport { LazyIfDirective } from './lazy-if.directive'\r\nimport { VendorsModule } from '@enexus/flipper-vendors'\r\nimport { RouterProgressComponent } from './router-progress/router-progress.component'\r\nimport { HeaderComponent } from './header/header.component'\r\nimport { TableOverlayComponent } from './table-overlay/table-overlay.component'\r\nimport { SpinnerComponent } from './spinner/spinner.component'\r\nimport { MessageComponent } from './message/message.component'\r\nimport { ColorModule } from '@enexus/flipper-color'\r\nimport { FlipperEventModule } from '@enexus/flipper-event'\r\nimport { DialogModule } from '@enexus/flipper-dialog'\r\nimport { RoundNumberPipe } from './pipe/round-number.pipe'\r\nimport { CalculateTotalClassPipe } from './pipe/calculate-total-class.pipe'\r\nimport { MatchHeightDirective } from './directive/match-height.directive'\r\nimport { MergeArryByIdPipe } from './pipe/merge-arry-by-id.pipe'\r\nimport { ArrayRemoveItemPipe } from './pipe/array-remove-item.pipe'\r\nimport { FindKeyPipe } from './pipe/find-key.pipe'\r\nimport { NotificationListComponent } from './notifications/notification.component'\r\nimport { NotificationService } from './notifications/notification.service'\r\nimport { GenerateBarcodeComponent } from './generate-barcode/generate-barcode.component'\r\nimport { NgxBarcodeModule } from 'ngx-barcode'\r\nimport { LoadingIconComponent } from './loading-icon/loading-icon.component'\r\nimport { HttpClientModule } from '@angular/common/http'\r\n@NgModule({\r\n  imports: [\r\n    HttpClientModule,\r\n    CommonModule,\r\n    VendorsModule,\r\n    ColorModule,\r\n    FlipperEventModule,\r\n    DialogModule,\r\n    NgxBarcodeModule,\r\n  ],\r\n  declarations: [\r\n    LoadingIconComponent,\r\n    NotificationListComponent,\r\n    RouterProgressComponent,\r\n    HeaderComponent,\r\n    TableOverlayComponent,\r\n    SpinnerComponent,\r\n    MessageComponent,\r\n    LazyIfDirective,\r\n    RoundNumberPipe,\r\n    CalculateTotalClassPipe,\r\n    MatchHeightDirective,\r\n    MergeArryByIdPipe,\r\n    ArrayRemoveItemPipe,\r\n    FindKeyPipe,\r\n    GenerateBarcodeComponent,\r\n  ],\r\n\r\n  exports: [\r\n    LoadingIconComponent,\r\n    RouterProgressComponent,\r\n    NotificationListComponent,\r\n    HeaderComponent,\r\n    TableOverlayComponent,\r\n    SpinnerComponent,\r\n    MessageComponent,\r\n    LazyIfDirective,\r\n\r\n    RoundNumberPipe,\r\n    CalculateTotalClassPipe,\r\n    MergeArryByIdPipe,\r\n    ArrayRemoveItemPipe,\r\n    MatchHeightDirective,\r\n    FindKeyPipe,\r\n    GenerateBarcodeComponent,\r\n  ],\r\n  entryComponents: [],\r\n  providers: [\r\n    NotificationService,\r\n    RoundNumberPipe,\r\n    CalculateTotalClassPipe,\r\n    MergeArryByIdPipe,\r\n    ArrayRemoveItemPipe,\r\n    FindKeyPipe,\r\n  ],\r\n})\r\nexport class FlipperComponentsModule {}\r\ndeclare module '@angular/core' {\r\n  interface ModuleWithProviders<T = any> {\r\n    ngModule: Type<T>\r\n    providers?: Provider[]\r\n  }\r\n}\r\n","export enum STATUS {\r\n  COMPLETE = 'complete',\r\n  SENT = 'sent',\r\n  RECEIVED = 'received',\r\n  OPEN = 'open',\r\n  VOID = 'void',\r\n  HELD = 'held',\r\n  OVERDUE = 'overdue',\r\n}\r\n","export enum ORDERTYPE {\r\n  PURCHASE = 'purchase',\r\n  SALES = 'sales',\r\n  RETURN = 'return',\r\n  TRANSFER = 'transfer',\r\n}\r\n","export class Business {\r\n  id: string\r\n  name: string\r\n  active: boolean\r\n  categoryId: string\r\n  currency: string\r\n  country?: string\r\n  businessUrl?: string\r\n  timeZone?: string\r\n  syncedOnline?: boolean\r\n  userId?: string\r\n  typeId?: any\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n  channel?: string\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","import { Business } from './business'\r\nimport { User } from './user'\r\nimport { Branch } from './branch'\r\nimport { Menu } from './menu'\r\n\r\nexport class MenuEntries {\r\n  id?: string\r\n  businesses: Business[]\r\n  user: User\r\n  // FIXME(ganza): each model or document should have channels[userId] to authenticate the data\r\n  branches: Branch[]\r\n  menu: Menu[]\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class Menu {\r\n  id?: string\r\n  name?: string\r\n  icon?: string\r\n  route?: string\r\n  active?: boolean\r\n  isSetting?: boolean\r\n  // FIXME(ganza): each model or document should have channels[userId] to authenticate the data\r\n  createdAt: string\r\n  updatedAt: string\r\n  channels: Array<string>\r\n\r\n  channel?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class User {\r\n  id: any\r\n  token?: string\r\n  updatedAt?: string\r\n  docId?: string\r\n  expiresAt?: any\r\n  table?:                 string;\r\n  name?:                  string;\r\n  userId?:                string;\r\n  active?:                boolean;\r\n  email?:                 string;\r\n  createdAt?:             null;\r\n  channels?:              string[];\r\n  subscriptionStartDate?: Date;\r\n  subscriptionEndDate?:   Date;\r\n  permissions?:           null;\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class DashBoardEntries {\r\n  id?: number\r\n  totalStore?: Total\r\n  grossProfit?: Total\r\n  netProfit?: Total\r\n  soldItems?: Items[]\r\n  sellingBranches?: Items[]\r\n  table?: string\r\n  docId?: string\r\n  chanels?: any\r\n  chanel?: any\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n\r\nexport class Total {\r\n  id?: number\r\n  value?: any\r\n  percentage?: number\r\n  since?: string\r\n  table?: string\r\n  docId?: string\r\n  channels: Array<string>\r\n  channel: any\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n\r\nexport class Items {\r\n  id: string\r\n  name?: string\r\n  updatedAt?: any\r\n  items?: number\r\n  total?: number\r\n  table?: string\r\n  docId?: string\r\n  channels: Array<string>\r\n  channel?: any\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class Branch {\r\n  id: string\r\n  name: string\r\n  active: boolean\r\n  businessId: any\r\n  syncedOnline?: boolean\r\n  mapLatitude?: any\r\n  mapLongitude?: any\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n  channel?: string\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class Price {\r\n  id: string\r\n  name: string\r\n  branchId?: string\r\n  groupId?: any\r\n  validFrom?: any\r\n  // FIXME(ganza): each model or document should have channels[userId] to authenticate the data\r\n  validTo?: any\r\n  isDefault?: boolean\r\n  syncedOnline?: boolean\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n  channel?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","import { Variant } from './variant'\r\n\r\nexport class Product {\r\n  id: string\r\n  name: string\r\n  description?: string\r\n  picture?: string\r\n  // FIXME(ganza): each model or document should have channels[userId] to authenticate the data\r\n  branchId?: any\r\n  businessId?: any\r\n  supplierId?: any\r\n  isManufactured?: boolean\r\n  isBatchTracked?: boolean\r\n  isStandardProduct?: boolean\r\n  isProductWithVariants?: boolean\r\n  isCompositeProduct?: boolean\r\n  enableTrackingInventory?: boolean\r\n  categoryId?: any\r\n  brandId?: any\r\n  taxId?: any\r\n  active?: boolean\r\n  hasPicture?: boolean\r\n  isDraft?: boolean\r\n  isOnPos?: boolean\r\n  color?: string\r\n  syncedOnline?: boolean\r\n  isCurrentUpdate?: boolean\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n\r\n  channel?: string\r\n  userId?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class PriceVariant {\r\n  id: string\r\n  priceId?: any\r\n  variantId?: any\r\n  minUnit?: any\r\n  maxUnit?: any\r\n  retailPrice?: any\r\n  supplyPrice?: any\r\n  wholeSalePrice?: any\r\n  discount?: any\r\n  // FIXME(ganza): each model or document should have channels[userId] to authenticate the data\r\n  markup?: any\r\n  syncedOnline?: boolean\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n\r\n  channel?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class OrderDetails {\r\n  id?: string\r\n  orderId: string\r\n  variantId: string\r\n  stockId: string\r\n  sku?: string\r\n  unit?: string\r\n  variantName?: string\r\n  productName?: string\r\n  price?: any\r\n  quantity: any\r\n  subTotal?: any\r\n  taxRate?: any\r\n  taxAmount?: any\r\n  discountRate?: any\r\n  discountAmount?: any\r\n  canTrackStock?: boolean\r\n  note?: string\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  channels: string[]\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class StockHistory {\r\n  id: string\r\n  orderId?: string\r\n  variantId?: string\r\n  variantName?: string\r\n  productId?: string\r\n  stockId?: any\r\n  reason?: string\r\n  quantity: any\r\n  // FIXME(ganza): each model or document should have channels[userId] to authenticate the data\r\n  isDraft?: boolean\r\n  isPreviously?: boolean\r\n  syncedOnline?: boolean\r\n  note?: string\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n\r\n  channel?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","import { OrderDetails } from './order-details'\r\nimport { Branch } from './branch'\r\n\r\nexport class Order {\r\n  id?: string\r\n  branchId: string\r\n  orderNumber: string\r\n  status?: string\r\n  reference?: string\r\n  orderType?: string\r\n  subTotal?: any\r\n  taxRate?: any\r\n  taxAmount?: any\r\n  cashReceived?: any\r\n  customerChangeDue?: any\r\n  saleTotal?: any\r\n  active?: boolean\r\n  isDraft?: boolean\r\n  orderItems: OrderDetails[]\r\n  orderNote?: string\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  channels: string[]\r\n  constructor(params?: object)\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","import { PriceVariant } from './price-variant'\r\nimport { Stock } from './stocks'\r\nimport { Product } from './product'\r\n\r\nexport class Variant {\r\n  id: string;\r\n  sku: any;\r\n  name: string;\r\n  productName?: string;\r\n  categoryName?: string;\r\n  brandName?: string;\r\n  productId?: any;\r\n  supplyPrice?: any;\r\n  retailPrice?: any;\r\n  wholeSalePrice?: any;\r\n  unit?: string;\r\n  isActive?: boolean;\r\n  priceVariant?: PriceVariant;\r\n  stock?: Stock;\r\n  // FIXME(ganza): each model or document should have channels[userId] to authenticate the data\r\n  product?: Product\r\n  markup?: any\r\n  syncedOnline?: boolean\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n\r\n  channel?: string\r\n  userId?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class Types {\r\n  id: string\r\n  name: string\r\n  syncedOnline?: boolean\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n\r\n  channel?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class BusinessCategory {\r\n  id: string\r\n  name: string\r\n  typeId?: any\r\n  syncedOnline?: boolean\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n  channel?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class UserBusiness {\r\n  id: string\r\n  userId: string\r\n  businessId: string\r\n  role?: string\r\n  // FIXME(ganza): each model or document should have channels[userId] to authenticate the data\r\n  permissions?: any\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n\r\n  channel?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class Taxes {\r\n  id: string\r\n  name: string\r\n  percentage?: any\r\n  businessId?: any\r\n  active?: boolean\r\n  isDefault?: boolean\r\n  syncedOnline?: boolean\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n\r\n  channel?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class Reason {\r\n  id: string\r\n  name: string\r\n  operation?: string\r\n  active?: boolean\r\n  syncedOnline?: boolean\r\n  createdAt?: string\r\n  // FIXME(ganza): each model or document should have channels[userId] to authenticate the data\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n\r\n  channel?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class BranchProducts {\r\n  id: string\r\n  branchId: string\r\n  productId: string\r\n  syncedOnline?: boolean\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n  channel?: string\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class Stock {\r\n  id: string\r\n  branchId: string\r\n  variantId: string\r\n  productId?: any\r\n  reasonId?: any\r\n  unitId?: any\r\n  lowStock?: any\r\n  currentStock?: any\r\n  // FIXME(ganza): each model or document should have channels[userId] to authenticate the data\r\n  supplyPrice?: any\r\n  retailPrice?: any\r\n  wholeSalePrice?: 0\r\n  active?: boolean\r\n  inStock?: any\r\n  syncedOnline?: boolean\r\n  canTrackingStock?: boolean\r\n  showLowStockAlert?: boolean\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n\r\n  channel?: string\r\n  userId?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class Labels {\r\n  id?: any\r\n  name?: string\r\n  sku?: string\r\n  channels: Array<string>\r\n  channel?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class Subscription {\r\n  id: string\r\n  userId?: string\r\n  subscriptionType?: string\r\n  lastPaymentDate?: Date\r\n  nextPaymentDate?: Date\r\n  status?: string\r\n  didSubscribed?: boolean\r\n  createdAt: string\r\n  updatedAt: string\r\n  table: string\r\n  docId?: string\r\n  channels: Array<string>\r\n  channel?: string\r\n\r\n  constructor(params: object = {}) {\r\n    for (const name in params) {\r\n      this[name] = params[name]\r\n    }\r\n  }\r\n}\r\n","export class CHANNELS {\r\n  public static readonly ORDER = 'orders'\r\n  public static readonly PRODUCTS = 'products'\r\n  public static readonly PRICES = 'prices'\r\n  public static readonly PRICEVARIANTS = 'priceVariants'\r\n  public static readonly SHOPPINGS = 'shoppings'\r\n  public static readonly VARIANTS = 'variants'\r\n}\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { CHANNELS } from './channels'\r\nimport { Order } from '../entries/order'\r\n\r\nexport class OrderEvent extends BusEvent {\r\n  public static readonly CHANNEL = CHANNELS.ORDER\r\n\r\n  constructor(public order: Order) {\r\n    super(OrderEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { CHANNELS } from './channels'\r\nimport { Price } from '../entries'\r\n\r\nexport class PriceEvent extends BusEvent {\r\n  public static readonly CHANNEL = CHANNELS.PRICES\r\n\r\n  constructor(public price: Price) {\r\n    super(PriceEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { CHANNELS } from './channels'\r\nimport { PriceVariant } from '../entries'\r\n\r\nexport class PriceVariantEvent extends BusEvent {\r\n  public static readonly CHANNEL = CHANNELS.PRICEVARIANTS\r\n\r\n  constructor(public priceVariant: PriceVariant) {\r\n    super(PriceVariantEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { CHANNELS } from './channels'\r\nimport { Product } from '../entries'\r\n\r\nexport class ProductEvent extends BusEvent {\r\n  public static readonly CHANNEL = CHANNELS.PRODUCTS\r\n\r\n  constructor(public product: Product) {\r\n    super(ProductEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { CHANNELS } from './channels'\r\nimport { OrderDetails } from '../entries'\r\n\r\nexport class ShoppingEvent extends BusEvent {\r\n  public static readonly CHANNEL = CHANNELS.SHOPPINGS\r\n\r\n  constructor(public shopping: OrderDetails) {\r\n    super(ShoppingEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { CHANNELS } from './channels'\r\nimport { Variant } from '../entries/variant'\r\n\r\nexport class VariantEvent extends BusEvent {\r\n  public static readonly CHANNEL = CHANNELS.VARIANTS\r\n\r\n  constructor(public variant: Variant) {\r\n    super(VariantEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Variant } from '../entries/variant'\r\n\r\nexport class VariantsEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'variants'\r\n\r\n  constructor(public variants: Variant[]) {\r\n    super(VariantsEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { BranchProducts } from '../entries/branch-products'\r\n\r\nexport class BranchProductsEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'branchProducts'\r\n\r\n  constructor(public branchProducts: BranchProducts[]) {\r\n    super(BranchProductsEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\n\r\nexport class ErrorMessageEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'errorMessage'\r\n\r\n  constructor(public errorMessage: any) {\r\n    super(ErrorMessageEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Product } from '../entries/product'\r\n\r\nexport class ProductsEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'products'\r\n\r\n  constructor(public products: Product[]) {\r\n    super(ProductsEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Stock } from '../entries/stocks'\r\n\r\nexport class StocksEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'stocks'\r\n\r\n  constructor(public stocks: Stock[]) {\r\n    super(StocksEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Branch } from '../entries'\r\n\r\nexport class CurrentBranchEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'current-branch'\r\n\r\n  constructor(public branch: Branch, public action: string = 'add') {\r\n    super(CurrentBranchEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Business } from '../entries'\r\n\r\nexport class CurrentBusinessEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'current-business'\r\n\r\n  constructor(public business: Business, public action: string = 'add') {\r\n    super(CurrentBusinessEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { User } from '../entries'\r\n\r\nexport class UserLoggedEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'current-user'\r\n\r\n  constructor(public user: User) {\r\n    super(UserLoggedEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Subscription } from '../entries'\r\n\r\nexport class UserSubscriptionEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'user-subscription'\r\n\r\n  constructor(public subscription: Subscription) {\r\n    super(UserSubscriptionEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Business } from '../entries'\r\n\r\nexport class BusinessesEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'businesses'\r\n\r\n  constructor(public businesses: Business[]) {\r\n    super(BusinessesEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Product } from '../entries/product'\r\n\r\nexport class DraftProductEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'draftProduct'\r\n\r\n  constructor(public draftProduct: Product, public action: string = 'add') {\r\n    super(DraftProductEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { StockHistory } from '../entries/stock-history'\r\n\r\nexport class DraftStockHistoryEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'draftStockHistory'\r\n\r\n  constructor(public draftStockHistory: StockHistory[], public action: string = 'add') {\r\n    super(DraftStockHistoryEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Stock } from '../entries/stocks'\r\n\r\nexport class DraftStocksEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'draftStocks'\r\n\r\n  constructor(public draftStocks: Stock[], public action: string = 'add') {\r\n    super(DraftStocksEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Variant } from '../entries/variant'\r\n\r\nexport class DraftVariantsEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'draftVariants'\r\n\r\n  constructor(public draftVariants: Variant[], public action: string = 'add') {\r\n    super(DraftVariantsEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Taxes } from '../entries/taxes'\r\n\r\nexport class DefaultTaxesEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'defaultTax'\r\n\r\n  constructor(public defaultTax: Taxes, public action: string = 'add') {\r\n    super(DefaultTaxesEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Taxes } from '../entries/taxes'\r\n\r\nexport class TaxesEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'taxes'\r\n\r\n  constructor(public taxes: Taxes[], public action: string = 'add') {\r\n    super(TaxesEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Branch } from '../entries/branch'\r\n\r\nexport class BranchesEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'branches'\r\n\r\n  constructor(public branches: Branch[]) {\r\n    super(BranchesEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event'\r\nimport { Stock } from '../entries/stocks'\r\n\r\nexport class CurrentStockEvent extends BusEvent {\r\n  public static readonly CHANNEL = 'currentStock'\r\n\r\n  constructor(public currentStock: Stock, public action: string = 'add') {\r\n    super(CurrentStockEvent.CHANNEL)\r\n  }\r\n}\r\n","import { BusEvent } from '@enexus/flipper-event';\r\n\r\n\r\nexport class AnyEvent extends BusEvent {\r\n\r\n  public static readonly CHANNEL = 'any-event';\r\n\r\n  constructor(public any_event: any,) {\r\n    super(AnyEvent.CHANNEL);\r\n  }\r\n}\r\n","import { animate, animation, style } from '@angular/animations'\r\n\r\nexport const fadeInScaleUpAnimation = animation([\r\n  style({ opacity: 0, transform: 'scale(0.5)' }),\r\n  animate('{{ duration }} ease-in-out', style({ opacity: 1, transform: 'scale(1)' })),\r\n])\r\n\r\nexport const fadeInAnimation = animation([\r\n  style({ opacity: 0 }),\r\n  animate('{{ duration }} ease-in-out', style({ opacity: 1 })),\r\n])\r\n\r\nexport const fadeOutAnimation = animation([\r\n  style({ opacity: 1 }),\r\n  animate('{{ duration }} ease-in-out', style({ opacity: 0 })),\r\n])\r\n","import { Injectable } from '@angular/core'\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class SettingsService {\r\n  constructor() {}\r\n\r\n  countries() {\r\n    return Object.values(this.httpGet('assets/lists/countries.json'))\r\n  }\r\n  currencies() {\r\n    return Object.values(this.httpGet('assets/lists/currencies.json'))\r\n  }\r\n\r\n  timezones() {\r\n    return Object.values(this.httpGet('assets/lists/timezones.json'))\r\n  }\r\n\r\n  units() {\r\n    return Object.values(this.httpGet('assets/lists/units.json'))\r\n  }\r\n  reasons() {\r\n    return Object.values(this.httpGet('assets/lists/reasons.json'))\r\n  }\r\n  httpGet(theUrl) {\r\n    const xmlHttp = new XMLHttpRequest()\r\n    xmlHttp.open('GET', theUrl, false) // false for synchronous request\r\n    xmlHttp.send(null)\r\n    return JSON.parse(xmlHttp.responseText)\r\n  }\r\n}\r\n","export const flipperUrl = 'http://localhost:8082'\r\n","import { Injectable, EventEmitter } from '@angular/core'\r\nimport PouchDB from 'pouchdb/dist/pouchdb'\r\nimport debugPouch from 'pouchdb-debug'\r\n\r\nimport { v1 as uuidv1 } from 'uuid'\r\nimport { FlipperEventBusService } from '@enexus/flipper-event'\r\nimport { flipperUrl } from '../constants'\r\nimport { Business } from '../entries/business'\r\nimport { HttpClient } from '@angular/common/http'\r\nimport { Branch } from '../entries/branch'\r\n\r\nclass Response {\r\n  res: any\r\n  docs: any\r\n}\r\n\r\ninterface Handler {\r\n  (result: Response): void\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class PouchDBService {\r\n  private isInstantiated: boolean = false\r\n  private database: any\r\n  public listener: EventEmitter<any> = new EventEmitter()\r\n  public listenerLogin: EventEmitter<any> = new EventEmitter()\r\n\r\n  public constructor(private http: HttpClient, private eventBus: FlipperEventBusService) {\r\n    // PouchDB.plugin(PouchFind);\r\n    PouchDB.plugin(require('pouchdb-find').default)\r\n    this.connect('main')\r\n    debugPouch(PouchDB)\r\n    this.sync([localStorage.getItem('userId')]) //we keep the current logged userId in local storage for quick access\r\n  }\r\n\r\n  public activeUser(table = 'users') {\r\n    return this.database\r\n      .createIndex({\r\n        index: { fields: ['table', 'active'] },\r\n      })\r\n      .then(() => {\r\n        return this.database.find({\r\n          selector: {\r\n            table: { $eq: table },\r\n            active: { $eq: true },\r\n          },\r\n        })\r\n      })\r\n  }\r\n\r\n  public query(fields = [], selector = {}) {\r\n    return this.database\r\n      .createIndex({\r\n        index: { fields: fields },\r\n      })\r\n      .then(() => {\r\n        return this.database.find({\r\n          selector: selector,\r\n        })\r\n      })\r\n  }\r\n  public async fastQuery(fields = [], selector = {}) {\r\n    try {\r\n      // Create the Index\r\n      var result = await this.database.createIndex({\r\n        index: { fields: fields },\r\n      })\r\n\r\n      // Query the Index using find().\r\n      result = await this.database.find({\r\n        selector: selector,\r\n      })\r\n\r\n      // Found docs are in result.docs\r\n      return await result.docs\r\n    } catch (err) {\r\n      console.log(err)\r\n    }\r\n  }\r\n\r\n  public callbackQuery(fields = [], selector = {}, callback: Handler) {\r\n    return this.database.find(\r\n      {\r\n        selector: selector,\r\n        fields: fields,\r\n      },\r\n      function (err: any, result: Response) {\r\n        if (err) {\r\n          return console.log(err)\r\n        }\r\n        // handle result\r\n        return callback(result)\r\n      }\r\n    )\r\n  }\r\n\r\n  public activeBusiness(userId: any, table = 'businesses') {\r\n    // comment\r\n    return this.database\r\n      .createIndex({\r\n        index: { fields: ['table', 'active', 'userId'] },\r\n      })\r\n      .then(() => {\r\n        return this.database.find({\r\n          selector: {\r\n            table: { $eq: table },\r\n            active: { $eq: true },\r\n            userId: { $eq: userId },\r\n          },\r\n        })\r\n      })\r\n  }\r\n\r\n  public hasDraftProduct(businessId: any, table = 'products') {\r\n    // comment\r\n    return this.database\r\n      .createIndex({\r\n        index: { fields: ['table', 'isDraft', 'businessId'] },\r\n      })\r\n      .then(() => {\r\n        return this.database.find({\r\n          selector: {\r\n            table: { $eq: table },\r\n            isDraft: { $eq: true },\r\n            businessId: { $eq: businessId },\r\n          },\r\n        })\r\n      })\r\n  }\r\n  public currentBusiness() {\r\n    return this.activeUser().then((user: { docs: string | any[] }) => {\r\n      if (user && user.docs.length > 0) {\r\n        return this.activeBusiness(user.docs[0].id, 'businesses').then((business: { docs: string | any[] }) => {\r\n          if (business && business.docs.length > 0) {\r\n            return business.docs[0]\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  public currentTax() {\r\n    // TODO: migrate this\r\n    return this.activeUser().then((user: { docs: string | any[] }) => {\r\n      if (user && user.docs.length > 0) {\r\n        return this.activeBusiness(user.docs[0].id, 'businesses').then((business: { docs: string | any[] }) => {\r\n          if (business && business.docs.length > 0) {\r\n            return this.database\r\n              .query(['table', 'businessId', 'isDefault'], {\r\n                table: { $eq: 'taxes' },\r\n                businessId: { $eq: business.docs[0].id },\r\n                isDefault: { $eq: true },\r\n              })\r\n              .then((res: { docs: string | any[] }) => {\r\n                if (res.docs && res.docs.length > 0) {\r\n                  return res.docs[0]\r\n                } else {\r\n                  return []\r\n                }\r\n              })\r\n          } else {\r\n            return null\r\n          }\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  public async listBusinessBranches() {\r\n    // I put any on the first promise as my intention is to return a list of branches not businesses\r\n    return await this.http\r\n      .get<any>(flipperUrl + '/api/business')\r\n      .toPromise()\r\n      .then(async business => {\r\n        if (business) {\r\n          return await this.http\r\n            .get<[Branch]>(flipperUrl + '/api/branches/' + business.id)\r\n            .toPromise()\r\n            .then(branches => {\r\n              return branches\r\n            })\r\n        }\r\n      })\r\n    // return this.currentBusiness().then((business: { id: any }) => {\r\n    //   if (business) {\r\n    //     return this.query(['table', 'businessId'], {\r\n    //       table: { $eq: 'branches' },\r\n    //       businessId: { $eq: business.id },\r\n    //     }).then((res: { docs: string | any[] }) => {\r\n    //       if (res.docs && res.docs.length > 0) {\r\n    //         return res.docs\r\n    //       } else {\r\n    //         return []\r\n    //       }\r\n    //     })\r\n    //   } else {\r\n    //     return []\r\n    //   }\r\n    // })\r\n  }\r\n\r\n  public listBusinessTaxes() {\r\n    return this.currentBusiness().then((business: { id: any }) => {\r\n      if (business) {\r\n        return this.query(['table', 'businessId'], {\r\n          table: { $eq: 'taxes' },\r\n          businessId: { $eq: business.id },\r\n        }).then((res: { docs: string | any[] }) => {\r\n          if (res.docs && res.docs.length > 0) {\r\n            return res.docs\r\n          } else {\r\n            return []\r\n          }\r\n        })\r\n      } else {\r\n        return []\r\n      }\r\n    })\r\n  }\r\n\r\n  public listBusinessTaxes2() {\r\n    return this.currentBusiness().then((business: { id: any }) => {\r\n      if (business) {\r\n        return this.callbackQuery(\r\n          ['table', 'businessId'],\r\n          {\r\n            table: { $eq: 'taxes' },\r\n            businessId: { $eq: business.id },\r\n          },\r\n          res => {\r\n            if (res.docs && res.docs.length > 0) {\r\n              return res.docs\r\n            } else {\r\n              return []\r\n            }\r\n          }\r\n        )\r\n      } else {\r\n        return []\r\n      }\r\n    })\r\n  }\r\n  public activeBranch(businessId: string, table = 'branches') {\r\n    return this.database\r\n      .createIndex({\r\n        index: { fields: ['tables', 'active', 'businessId'] },\r\n      })\r\n      .then(() => {\r\n        return this.database.find({\r\n          selector: {\r\n            table: { $eq: table },\r\n            active: { $eq: true },\r\n            businessId: { $eq: businessId },\r\n          },\r\n        })\r\n      })\r\n  }\r\n\r\n  public connect(dbName: string, filter: string = null) {\r\n    if (!this.isInstantiated) {\r\n      this.database = new PouchDB('main')\r\n      console.log('did couchbase connected?')\r\n      if (filter != null) {\r\n        this.database.changes({\r\n          filter: (doc: any) => {\r\n            //make sure we filter only to listen on our document of intrest.\r\n            // TODO: see if we need this as not filter can be part of the sync function\r\n            return doc.channels[0] === filter\r\n          },\r\n        })\r\n      }\r\n      this.isInstantiated = true\r\n    }\r\n  }\r\n\r\n  public fetch() {\r\n    return this.database.allDocs({ include_docs: true })\r\n  }\r\n\r\n  public get(id: string) {\r\n    // enable allowing conflicting document.\r\n    return this.database.get(id, { conflicts: false })\r\n    // return  this.database.createIndex({\r\n    //     index: {fields: ['id']}\r\n    //   }).then(result => {\r\n    //       return this.database.find({\r\n    //         selector: {\r\n    //           id: {$eq:id}\r\n    //         }\r\n    //       });\r\n    //   })\r\n  }\r\n\r\n  public remove(document: any) {\r\n    try {\r\n      return this.database.remove(document)\r\n    } catch (e) {\r\n      console.log('did not removed', e)\r\n    }\r\n  }\r\n\r\n  public find(id: string) {\r\n    return this.get(id).then(\r\n      (result: any) => {\r\n        return result\r\n      },\r\n      (error: { status: string }) => {\r\n        if (error.status === '404') {\r\n          throw new Error(`ERROR:${error}`)\r\n        } else {\r\n          return new Promise((_resolve, reject) => {\r\n            reject(error)\r\n          })\r\n        }\r\n      }\r\n    )\r\n  }\r\n\r\n  getResponse(result: any[], isArray: any) {\r\n    if (!Array.isArray(result) && isArray) {\r\n      return [result]\r\n    }\r\n    if (Array.isArray(result) && !isArray) {\r\n      return result[0]\r\n    }\r\n    return result\r\n  }\r\n\r\n  makeid(length: number) {\r\n    let result = ''\r\n    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\r\n    const charactersLength = characters.length\r\n    for (let i = 0; i < length; i++) {\r\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\r\n    }\r\n    return result\r\n  }\r\n\r\n  uid() {\r\n    return uuidv1()\r\n  }\r\n\r\n  public put(id: string, document: any) {\r\n    document._id = id\r\n    document.uid = this.uid()\r\n    document.channel = localStorage.getItem('userId')\r\n    document.channels = [localStorage.getItem('userId')]\r\n\r\n    return this.get(id).then(\r\n      (result: { _rev: any }) => {\r\n        document._rev = result._rev\r\n        console.log('updated doc', document)\r\n        return this.database.put(document)\r\n      },\r\n      (error: { status: string | number }) => {\r\n        console.log('error on update', error)\r\n        if (error.status === '404' || error.status === 404) {\r\n          return this.database.put(document)\r\n        } else {\r\n          return new Promise((_resolve, reject) => {\r\n            reject(error)\r\n          })\r\n        }\r\n      }\r\n    )\r\n  }\r\n  public sync(channels: Array<string>) {\r\n    //NOTE: our main = bucket and is constant to all users. //do not use sessionId on pouchDB we don't use it on backend i.e on the server\r\n    // return PouchDB.sync('main', 'url', {\r\n    //   password: 'singlworld',\r\n    //   user: 'admin',\r\n    //   push: true,\r\n    //   live: true,\r\n    //   retry: true,\r\n    //   continous: true,\r\n    //   filter: \"sync_gateway/bychannel\",\r\n    //   query_params: { \"channels\": ['43'] },\r\n    // })\r\n  }\r\n  public getChangeListener() {\r\n    return this.listener\r\n  }\r\n  public getChangeListenerLogin() {\r\n    return this.listenerLogin\r\n  }\r\n  unique(a: Array<any>, key: string = 'name'): Array<any> {\r\n    return a.length > 0 ? this.removeDuplicates(a, key) : []\r\n  }\r\n  contains(array: Array<any>, obj: any, key: string): boolean {\r\n    for (const newObj of array) {\r\n      if (this.isEqual(newObj, obj, key)) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n  // comparator\r\n  isEqual(obj1: any, obj2: any, key: string) {\r\n    if (obj1[key] === obj2[key]) {\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n  removeDuplicates(ary: Array<any>, key: string) {\r\n    const arr = []\r\n    return ary.filter((x: any) => {\r\n      return !this.contains(arr, x, key) && arr.push(x)\r\n    })\r\n  }\r\n}\r\n","import { InjectionToken } from '@angular/core'\r\nimport { Menu } from './entries'\r\nimport { Reason } from './entries/reason'\r\n\r\nexport const APP_CONFIG = new InjectionToken<FlipperDBConfig[]>('APP_CONFIG')\r\n\r\nexport enum TABLES {\r\n  USER = 'user',\r\n  BUSINESS = 'business',\r\n  TYPES = 'businessTypes',\r\n  MENU = 'menus',\r\n  BRANCHES = 'branches',\r\n  BUSINESSCATEGORY = 'businessCategories',\r\n  USERBUSINESS = 'businessUsers',\r\n  TAXES = 'taxes',\r\n  PRODUCTS = 'products',\r\n  VARIANTS = 'variants',\r\n  REASON = 'reasons',\r\n  STOCKS = 'stocks',\r\n  BRANCHPRODUCTS = 'branchProducts',\r\n  ORDER = 'orders',\r\n  ORDERDETAILS = 'orderDetails',\r\n  STOCKHISTORY = 'stockHistory',\r\n  DEVICE = 'devices',\r\n  RECEIPT = 'receipts',\r\n  SUBSCRIPTION = 'subscription',\r\n}\r\n\r\nexport type TABLE =\r\n  | TABLES.USER\r\n  | TABLES.TYPES\r\n  | TABLES.MENU\r\n  | TABLES.BUSINESS\r\n  | TABLES.BRANCHES\r\n  | TABLES.BUSINESSCATEGORY\r\n  | TABLES.USERBUSINESS\r\n  | TABLES.TAXES\r\n  | TABLES.PRODUCTS\r\n  | TABLES.VARIANTS\r\n  | TABLES.STOCKS\r\n  | TABLES.ORDER\r\n  | TABLES.ORDERDETAILS\r\n  | TABLES.REASON\r\n  | TABLES.DEVICE\r\n  | TABLES.RECEIPT\r\n  | TABLES.STOCKHISTORY\r\n  | TABLES.BRANCHPRODUCTS\r\n  | TABLES.SUBSCRIPTION\r\n\r\nexport const DEFAULT_FLIPPER_DB_CONFIG = {\r\n  database: { name: 'flipper', engine: 'LOCALSTORAGE' },\r\n  tables: [\r\n    {\r\n      name: TABLES.USER,\r\n      query: `id STRING,\r\n                    name STRING,\r\n                    email STRING,\r\n                    active BOOL,\r\n                    token STRING,\r\n                    createdAt DATETIME,\r\n                    updatedAt DATETIME,\r\n                    PRIMARY KEY (id)\r\n            `,\r\n    },\r\n    {\r\n      name: TABLES.BUSINESSCATEGORY,\r\n      query: `id STRING,\r\n                    name STRING,\r\n                    typeId STRING,\r\n                    syncedOnline BOOL,\r\n                    PRIMARY KEY (id)\r\n                `,\r\n    },\r\n    {\r\n      name: TABLES.REASON,\r\n      query: `id STRING,\r\n                    name STRING,\r\n                    operation STRING,\r\n                    active BOOL,\r\n                    createdAt DATETIME,\r\n                    updatedAt DATETIME,\r\n                    PRIMARY KEY (id)\r\n                 `,\r\n    },\r\n    {\r\n      name: TABLES.TYPES,\r\n      query: `id STRING,\r\n                    name STRING,\r\n                    syncedOnline BOOL,\r\n                    PRIMARY KEY (id)\r\n            `,\r\n    },\r\n    {\r\n      name: TABLES.MENU,\r\n      query: `id int(11) NOT NULL AUTO_INCREMENT,\r\n                name STRING,\r\n                icon STRING,\r\n                route STRING,\r\n                active BOOL,\r\n                isSetting BOOL,\r\n                PRIMARY KEY (id)`,\r\n    },\r\n    {\r\n      name: TABLES.BUSINESS,\r\n      query: `\r\n                id STRING,\r\n                name STRING,\r\n                country STRING,\r\n                currency STRING,\r\n                businessUrl STRING,\r\n                timeZone STRING,\r\n                active BOOL,\r\n                userId STRING,\r\n                typeId STRING,\r\n                categoryId STRING,\r\n                createdAt DATETIME,\r\n                updatedAt DATETIME,\r\n                PRIMARY KEY (id)\r\n                `,\r\n    },\r\n    {\r\n      name: TABLES.BRANCHES,\r\n      query: `\r\n                id STRING,\r\n                name STRING,\r\n                active BOOL,\r\n                businessId STRING,\r\n                mapLatitude STRING NULL,\r\n                mapLongitude STRING NULL,\r\n                createdAt DATETIME,\r\n                updatedAt DATETIME,\r\n                PRIMARY KEY (id)\r\n                `,\r\n    },\r\n    {\r\n      name: TABLES.USERBUSINESS,\r\n      query: `id STRING,\r\n                    userId STRING,\r\n                    businessId STRING,\r\n                    PRIMARY KEY (id)\r\n                    `,\r\n    },\r\n    {\r\n      name: TABLES.TAXES,\r\n      query: `id STRING,\r\n                    name STRING,\r\n                    percentage int(11),\r\n                    active BOOL,\r\n                    isDefault BOOL,\r\n                    businessId STRING,\r\n                    channel STRING,\r\n                    createdAt DATETIME,\r\n                    updatedAt DATETIME,\r\n                    PRIMARY KEY (id)\r\n                        `,\r\n    },\r\n    {\r\n      name: TABLES.PRODUCTS,\r\n      query: `id STRING,\r\n                    name STRING,\r\n                    categoryId int(11) NULL,\r\n                    description STRING NULL,\r\n                    picture STRING NULL,\r\n                    taxId int(11) NULL,\r\n                    active BOOL,\r\n                    hasPicture BOOL,\r\n                    isDraft BOOL,\r\n                    isCurrentUpdate BOOL,\r\n                    businessId STRING,\r\n                    supplierId STRING NULL,\r\n                    channel STRING,\r\n                    createdAt DATETIME,\r\n                    updatedAt DATETIME,\r\n                    PRIMARY KEY (id)\r\n                `,\r\n    },\r\n    {\r\n      name: TABLES.BRANCHPRODUCTS,\r\n      query: `id STRING,\r\n                    productId STRING,\r\n                    branchId STRING,\r\n                    channel STRING,\r\n                    PRIMARY KEY (id)\r\n                `,\r\n    },\r\n    {\r\n      name: TABLES.VARIANTS,\r\n      query: `id STRING,\r\n                    name STRING,\r\n                    sku STRING,\r\n                    productId STRING,\r\n                    unit STRING NULL,\r\n                    channel STRING,\r\n                    createdAt DATETIME,\r\n                    updatedAt DATETIME,\r\n                    PRIMARY KEY (id)\r\n                `,\r\n    },\r\n    {\r\n      name: TABLES.STOCKS,\r\n      query: ` id STRING,\r\n                    branchId STRING,\r\n                    variantId STRING,\r\n                    productId STRING,\r\n                    lowStock STRING,\r\n                    currentStock STRING,\r\n                    supplyPrice int(11) NULL,\r\n                    retailPrice int(11) NULL,\r\n                    canTrackingStock BOOL,\r\n                    showLowStockAlert BOOL,\r\n                    channel STRING,\r\n                    createdAt DATETIME,\r\n                    updatedAt DATETIME,\r\n                    PRIMARY KEY (id)\r\n                `,\r\n    },\r\n    {\r\n      name: TABLES.ORDER,\r\n      query: `id STRING,\r\n                    branchId STRING NOT NULL,\r\n                    deviceId STRING NULL,\r\n                    orderNumber STRING NOT NULL,\r\n                    customerId STRING NULL,\r\n                    status STRING NOT NULL,\r\n                    reference STRING NULL,\r\n                    orderType STRING NOT NULL,\r\n                    supplierId STRING NULL,\r\n                    subTotal int(11) NULL,\r\n                    supplierInvoiceNumber STRING NULL,\r\n                    taxRate int(11) NULL,\r\n                    taxAmount int(11) NULL,\r\n                    discountRate int(11) NULL,\r\n                    discountAmount int(11) NULL,\r\n                    cashReceived int(11) NULL,\r\n                    customerChangeDue int(11) NULL,\r\n                    saleTotal int(11) NULL,\r\n                    paymentId STRING NULL,\r\n                    orderNote STRING NULL,\r\n                    active BOOL,\r\n                    isDraft BOOL,\r\n                    channel STRING,\r\n                    deliverDate DATETIME,\r\n                    orderDate DATETIME,\r\n                    createdAt DATETIME,\r\n                    updatedAt DATETIME,\r\n                    PRIMARY KEY (id)\r\n                `,\r\n    },\r\n    {\r\n      name: TABLES.ORDERDETAILS,\r\n      query: ` id STRING NOT NULL,\r\n                    orderId STRING NOT NULL,\r\n                    variantId STRING NOT NULL,\r\n                    variantName STRING NOT NULL,\r\n                    price int(11) NULL,\r\n                    quantity int(11) NOT NULL,\r\n                    unit STRING NULL,\r\n                    taxAmount int(11) NULL,\r\n                    taxRate int(11) NULL,\r\n                    discountAmount int(11) NULL,\r\n                    discountRate int(11) NULL,\r\n                    subTotal int(11) NULL,\r\n                    note STRING NULL,\r\n                    channel STRING,\r\n                    createdAt DATETIME,\r\n                    updatedAt DATETIME,\r\n                    PRIMARY KEY (id)\r\n                `,\r\n    },\r\n    {\r\n      name: TABLES.STOCKHISTORY,\r\n      query: `id STRING,\r\n                    variantId STRING,\r\n                    stockId STRING,\r\n                    productId STRING,\r\n                    quantity int(11) NOT NULL,\r\n                    reason STRING NULL,\r\n                    note STRING NULL,\r\n                    channel STRING,\r\n                    createdAt DATETIME,\r\n                    updatedAt DATETIME,\r\n                    PRIMARY KEY (id)\r\n                `,\r\n    },\r\n    {\r\n      name: TABLES.DEVICE,\r\n      query: ` id int(11) NOT NULL AUTO_INCREMENT,\r\n                    branchId int(11) NOT NULL,\r\n                    name int(11) NOT NULL,\r\n                    token STRING NOT NULL,\r\n                    channel STRING,\r\n                    createdAt DATETIME,\r\n                    updatedAt DATETIME,\r\n                    PRIMARY KEY (id)\r\n                `,\r\n    },\r\n    {\r\n      name: TABLES.RECEIPT,\r\n      query: ` id int(11) NOT NULL AUTO_INCREMENT,\r\n                    branchId int(11) NOT NULL,\r\n                    businessName int(11) NOT NULL,\r\n                    digitalLogo STRING  NULL,\r\n                    printedLogo STRING  NULL,\r\n                    showLocation BOOL  NULL,\r\n                    color STRING  NULL,\r\n                    address1 STRING  NULL,\r\n                    address1 STRING  NULL,\r\n                    city STRING  NULL,\r\n                    customerText STRING  NULL,\r\n                    returnPolicy STRING  NULL,\r\n                    showItemNote BOOL  NULL,\r\n                    channel STRING,\r\n                    createdAt DATETIME,\r\n                    updatedAt DATETIME,\r\n                    PRIMARY KEY (id)\r\n                `,\r\n    },\r\n  ],\r\n  demo: {\r\n    email: 'admin@admin.com',\r\n    password: 'admin',\r\n  },\r\n  defaultMenu: [\r\n    {\r\n      name: 'Analytics',\r\n      icon: 'analytics.svg',\r\n      route: 'analytics',\r\n      active: true,\r\n      isSetting: false,\r\n    },\r\n    {\r\n      name: 'POS',\r\n      icon: 'pos.svg',\r\n      route: 'pos',\r\n      active: false,\r\n      isSetting: false,\r\n    },\r\n    {\r\n      name: 'Inventory',\r\n      icon: 'inventory.svg',\r\n      route: 'inventory',\r\n      active: false,\r\n      isSetting: false,\r\n    },\r\n    {\r\n      name: 'Transactions',\r\n      icon: 'transaction.svg',\r\n      route: 'transactions',\r\n      active: false,\r\n      isSetting: false,\r\n    },\r\n    {\r\n      name: 'Settings',\r\n      icon: 'settings.svg',\r\n      route: 'settings',\r\n      active: false,\r\n      isSetting: true,\r\n    },\r\n  ],\r\n  defaultReasons: [\r\n    {\r\n      name: 'Stock Received',\r\n      operation: 'add',\r\n      active: true,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    },\r\n    {\r\n      name: 'Inventory Re-count',\r\n      operation: 'add',\r\n      active: true,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    },\r\n    {\r\n      name: 'Damage',\r\n      operation: 'remove',\r\n      active: true,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    },\r\n    {\r\n      name: 'Theft',\r\n      operation: 'remove',\r\n      active: true,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    },\r\n    {\r\n      name: 'Loss',\r\n      operation: 'remove',\r\n      active: true,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    },\r\n    {\r\n      name: 'Restock Return',\r\n      operation: 'add',\r\n      active: true,\r\n      createdAt: new Date(),\r\n      updatedAt: new Date(),\r\n    },\r\n  ],\r\n  defaultCategory: [\r\n    {\r\n      name: 'Beauty Salon',\r\n      id: 'beauty-salon',\r\n      type_id: 'beauty-and-personal-care',\r\n    },\r\n    {\r\n      name: 'Hair Salon/Barbershop',\r\n      id: 'hair-salon/barbershop',\r\n      type_id: 'beauty-and-personal-care',\r\n    },\r\n    {\r\n      name: 'Independent Stylist/Barber',\r\n      id: 'independent-stylist/barber',\r\n      type_id: 'beauty-and-personal-care',\r\n    },\r\n    {\r\n      name: 'Massage Therapist',\r\n      id: 'massage-therapist',\r\n      type_id: 'beauty-and-personal-care',\r\n    },\r\n    {\r\n      name: 'Nail Salon',\r\n      id: 'nail-salon',\r\n      type_id: 'beauty-and-personal-care',\r\n    },\r\n    {\r\n      name: 'Spa',\r\n      id: 'spa',\r\n      type_id: 'beauty-and-personal-care',\r\n    },\r\n    {\r\n      name: 'Tanning Salon',\r\n      id: 'tanning-salon',\r\n      type_id: 'beauty-and-personal-care',\r\n    },\r\n    {\r\n      name: 'Tattoo/Piercing',\r\n      id: 'tattoo/piercing',\r\n      type_id: 'beauty-and-personal-care',\r\n    },\r\n    {\r\n      name: 'Pharamcy',\r\n      id: 'pharamcy',\r\n      type_id: 'retail',\r\n    },\r\n    {\r\n      name: 'Grocery/Market',\r\n      id: 'grocery/market',\r\n      type_id: 'retail',\r\n    },\r\n    {\r\n      name: 'Pet Store',\r\n      id: 'pet-store',\r\n      type_id: 'retail',\r\n    },\r\n    {\r\n      name: 'Electronics',\r\n      id: 'electronics',\r\n      type_id: 'retail',\r\n    },\r\n    {\r\n      name: 'Hardware Store',\r\n      id: 'hardware-store',\r\n      type_id: 'retail',\r\n    },\r\n    {\r\n      name: 'Eyewear',\r\n      id: 'eyewear',\r\n      type_id: 'retail',\r\n    },\r\n    {\r\n      name: 'Outdoor Markets',\r\n      id: 'outdoor-markets',\r\n      type_id: 'retail',\r\n    },\r\n    {\r\n      name: 'Speciality Shop',\r\n      id: 'speciality-shop',\r\n      type_id: 'retail',\r\n    },\r\n    {\r\n      name: 'Sporting Goods',\r\n      id: 'sporting-goods',\r\n      type_id: 'retail',\r\n    },\r\n    {\r\n      name: 'Hobby Shop',\r\n      id: 'hobby-shop',\r\n      type_id: 'retail',\r\n    },\r\n    {\r\n      name: 'Jewelry and Watches',\r\n      id: 'jewelry-and-watches',\r\n      type_id: 'retail',\r\n    },\r\n    {\r\n      name: 'Flowers and Gifts',\r\n      id: 'flowers-and-gifts',\r\n      type_id: 'retail',\r\n    },\r\n  ],\r\n  defaultType: [\r\n    {\r\n      name: 'Beauty and Personal Care',\r\n      id: 'beauty-and-personal-care',\r\n    },\r\n    {\r\n      name: 'Retail',\r\n      id: 'retail',\r\n    },\r\n  ],\r\n}\r\n\r\nexport interface FlipperDBConfig {\r\n  [key: string]: any\r\n\r\n  database: { name: string; engine: string }\r\n  tables: Array<{ name: TABLE; query: string }>\r\n  defaultMenu: Array<Menu>\r\n  defaultReasons: Array<Reason>\r\n  defaultType: Array<{ name: string; category: any[] }>\r\n}\r\n\r\nexport const Tables = {\r\n  user: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.USER,\r\n  business: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.BUSINESS,\r\n  branch: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.BRANCHES,\r\n  menu: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.MENU,\r\n  type: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.TYPES,\r\n  businessCategory: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.BUSINESSCATEGORY,\r\n  userBusiness: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.USERBUSINESS,\r\n  taxes: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.TAXES,\r\n  variants: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.VARIANTS,\r\n  products: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.PRODUCTS,\r\n  stocks: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.STOCKS,\r\n  branchProducts: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.BRANCHPRODUCTS,\r\n  reasons: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.REASON,\r\n  order: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.ORDER,\r\n  orderDetails: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.ORDERDETAILS,\r\n  stockHistory: DEFAULT_FLIPPER_DB_CONFIG.database.name + '.' + TABLES.STOCKHISTORY,\r\n}\r\n\r\nexport const PouchConfig = {\r\n  channel: localStorage.getItem('channel'),\r\n  sessionId: localStorage.getItem('sessionId'),\r\n  // bucket: localStorage.getItem('bucket'),\r\n  bucket: 'main',\r\n  syncUrl: 'http://yegobox.com:4985/main',\r\n  canSync: true,\r\n  user: 'admin',\r\n  password: 'singlworld',\r\n  Tables: {\r\n    user: TABLES.USER + '_' + localStorage.getItem('channel'),\r\n    business: TABLES.BUSINESS + '_' + localStorage.getItem('channel'),\r\n    branches: TABLES.BRANCHES + '_' + localStorage.getItem('channel'),\r\n    menus: TABLES.MENU,\r\n    businessTypes: TABLES.TYPES,\r\n    businessCategories: TABLES.BUSINESSCATEGORY,\r\n    businessUsers: TABLES.USERBUSINESS + '_' + localStorage.getItem('channel'),\r\n    taxes: TABLES.TAXES + '_' + localStorage.getItem('channel'),\r\n    variants: TABLES.VARIANTS + '_' + localStorage.getItem('channel'),\r\n    products: TABLES.PRODUCTS + '_' + localStorage.getItem('channel'),\r\n    branchProducts: TABLES.BRANCHPRODUCTS + '_' + localStorage.getItem('channel'),\r\n    reasons: TABLES.REASON + '_' + localStorage.getItem('channel'),\r\n    orders: TABLES.ORDER + '_' + localStorage.getItem('channel'),\r\n    orderDetails: TABLES.ORDERDETAILS + '_' + localStorage.getItem('channel'),\r\n    stockHistories: TABLES.STOCKHISTORY + '_' + localStorage.getItem('channel'),\r\n    subscription: TABLES.SUBSCRIPTION + '_' + localStorage.getItem('channel'),\r\n    stocks: TABLES.STOCKS + '_' + localStorage.getItem('channel'),\r\n  },\r\n}\r\n// localStorage.setItem(\"lastname\", \"Smith\");\r\n","import { Injectable } from '@angular/core'\r\n\r\nimport { FlipperEventBusService } from '@enexus/flipper-event'\r\n\r\nimport { filter } from 'rxjs/operators'\r\nimport { PouchDBService } from './pouchdb.service'\r\nimport { PouchConfig } from '../db-config'\r\nimport { User } from '../entries'\r\nimport { UserLoggedEvent } from '../events'\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ActiveUser {\r\n  currentUser: User = null\r\n\r\n  constructor(private eventBus: FlipperEventBusService, private database: PouchDBService) {\r\n    this.database.connect(PouchConfig.bucket)\r\n    this.init()\r\n  }\r\n  public init() {\r\n    this.user()\r\n\r\n    this.eventBus\r\n      .of<UserLoggedEvent>(UserLoggedEvent.CHANNEL)\r\n      .pipe(filter(e => e.user && (e.user.id !== null || e.user.id !== undefined)))\r\n      .subscribe(res => (this.currentUser = res.user))\r\n  }\r\n  public get<K extends keyof User>(prop: K): User[K] {\r\n    return this.currentUser && this.currentUser[prop]\r\n  }\r\n\r\n  public set(key: string, value: any): void {\r\n    this.currentUser[key] = value\r\n  }\r\n\r\n  public async user(table = null) {\r\n    await this.database.activeUser().then(\r\n      res => {\r\n        if (res.docs && res.docs.length > 0) {\r\n          this.eventBus.publish(new UserLoggedEvent(res.docs[0]))\r\n        }\r\n      },\r\n      error => {\r\n        if ((error.error && error.status === '404') || error.status === 404) {\r\n          this.eventBus.publish(new UserLoggedEvent(null))\r\n        }\r\n      }\r\n    )\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core'\r\n\r\nimport { filter } from 'rxjs/operators'\r\nimport { ActiveUser } from './active-user'\r\nimport { PouchDBService } from './pouchdb.service'\r\nimport { PouchConfig } from '../db-config'\r\nimport { Business } from '../entries'\r\nimport { CurrentBusinessEvent } from '../events'\r\nimport { FlipperEventBusService } from '@enexus/flipper-event'\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ActiveBusiness {\r\n  currentBusiness: Business = null\r\n\r\n  constructor(\r\n    private eventBus: FlipperEventBusService,\r\n    private database: PouchDBService,\r\n    private currentUser: ActiveUser\r\n  ) {\r\n    this.database.connect(PouchConfig.bucket)\r\n    this.eventBus\r\n      .of<CurrentBusinessEvent>(CurrentBusinessEvent.CHANNEL)\r\n      .pipe(filter(e => e.business && (e.business.id !== null || e.business.id !== undefined)))\r\n      .subscribe(res => (this.currentBusiness = res.business))\r\n    this.business()\r\n  }\r\n\r\n  public get<K extends keyof Business>(prop: K): Business[K] {\r\n    return this.currentBusiness && this.currentBusiness[prop]\r\n  }\r\n\r\n  public set(key: string, value: any): void {\r\n    this.currentBusiness[key] = value\r\n  }\r\n\r\n  public async business(table = 'businesses') {\r\n    if (\r\n      this.currentUser.get('id') != 'undefined' ||\r\n      this.currentUser.get('id') != undefined ||\r\n      this.currentUser.get('id') != null\r\n    ) {\r\n      await this.database.activeBusiness(this.currentUser.get('id'), table).then(\r\n        res => {\r\n          if (res.docs && res.docs.length > 0) {\r\n            this.eventBus.publish(new CurrentBusinessEvent(res.docs[0]))\r\n          }\r\n        },\r\n        error => {\r\n          if ((error.error && error.status === '404') || error.status === 404) {\r\n            this.eventBus.publish(new CurrentBusinessEvent(null))\r\n          }\r\n        }\r\n      )\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core'\r\nimport { PouchDBService } from './pouchdb.service'\r\nimport { PouchConfig } from '../db-config'\r\nimport { FlipperEventBusService } from '@enexus/flipper-event'\r\n\r\nimport { filter } from 'rxjs/operators'\r\nimport { ActiveBusiness } from './active-business'\r\nimport { Branch } from '../entries'\r\nimport { CurrentBranchEvent } from '../events'\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class ActiveBranch {\r\n  currentBranch: Branch = null\r\n\r\n  constructor(\r\n    private eventBus: FlipperEventBusService,\r\n    private database: PouchDBService,\r\n    private currentBusiness: ActiveBusiness\r\n  ) {\r\n    this.database.connect(PouchConfig.bucket)\r\n    this.eventBus\r\n      .of<CurrentBranchEvent>(CurrentBranchEvent.CHANNEL)\r\n      .pipe(filter(e => e.branch && (e.branch.id !== null || e.branch.id !== undefined)))\r\n      .subscribe(res => (this.currentBranch = res.branch))\r\n    this.branch()\r\n  }\r\n\r\n  public get<K extends keyof Branch>(prop: K): Branch[K] {\r\n    return this.currentBranch && this.currentBranch[prop]\r\n  }\r\n\r\n  public set(key: string, value: any): void {\r\n    this.currentBranch[key] = value\r\n  }\r\n\r\n  public async branch(table = 'branches') {\r\n    if (\r\n      this.currentBusiness.get('id') != 'undefined' ||\r\n      this.currentBusiness.get('id') != undefined ||\r\n      this.currentBusiness.get('id') != null\r\n    ) {\r\n      await this.database.activeBranch(this.currentBusiness.get('id'), table).then(\r\n        res => {\r\n          if (res.docs && res.docs.length > 0) {\r\n            this.eventBus.publish(new CurrentBranchEvent(res.docs[0]))\r\n          }\r\n        },\r\n        error => {\r\n          if ((error.error && error.status === '404') || error.status === 404) {\r\n            this.eventBus.publish(new CurrentBranchEvent(null))\r\n          }\r\n        }\r\n      )\r\n    }\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core'\r\n\r\nexport class LocalStorageSaveOptions {\r\n  key: string\r\n  data: any\r\n  expirationMins?: number\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class CacheService {\r\n  constructor() {}\r\n  save(options: LocalStorageSaveOptions) {\r\n    // Set default values for optionals\r\n    options.expirationMins = options.expirationMins || 0\r\n\r\n    // Set expiration date in miliseconds\r\n    const expirationMS = options.expirationMins !== 0 ? options.expirationMins * 60 * 1000 : 0\r\n\r\n    const record = {\r\n      value: typeof options.data === 'string' ? options.data : JSON.stringify(options.data),\r\n      expiration: expirationMS !== 0 ? new Date().getTime() + expirationMS : null,\r\n      hasExpiration: expirationMS !== 0 ? true : false,\r\n    }\r\n    localStorage.setItem(options.key, JSON.stringify(record))\r\n  }\r\n\r\n  load(key: string) {\r\n    // Get cached data from localstorage\r\n    const item = localStorage.getItem(key)\r\n    if (item !== null) {\r\n      const record = JSON.parse(item)\r\n      const now = new Date().getTime()\r\n      // Expired data will return null\r\n      if (!record || (record.hasExpiration && record.expiration <= now)) {\r\n        return null\r\n      } else {\r\n        return JSON.parse(record.value)\r\n      }\r\n    }\r\n    return null\r\n  }\r\n\r\n  remove(key: string) {\r\n    localStorage.removeItem(key)\r\n  }\r\n\r\n  cleanLocalStorage() {\r\n    localStorage.clear()\r\n  }\r\n}\r\n"]}