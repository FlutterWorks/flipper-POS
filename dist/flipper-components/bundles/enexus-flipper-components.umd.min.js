!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@enexus/flipper-vendors"),require("@angular/router"),require("rxjs/internal/operators"),require("@angular/animations"),require("@enexus/flipper-color"),require("@enexus/flipper-event"),require("@enexus/flipper-dialog"),require("lodash"),require("rxjs"),require("ngx-barcode"),require("@angular/common/http"),require("pouchdb/dist/pouchdb"),require("pouchdb-debug"),require("uuid"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("@enexus/flipper-components",["exports","@angular/core","@angular/common","@enexus/flipper-vendors","@angular/router","rxjs/internal/operators","@angular/animations","@enexus/flipper-color","@enexus/flipper-event","@enexus/flipper-dialog","lodash","rxjs","ngx-barcode","@angular/common/http","pouchdb/dist/pouchdb","pouchdb-debug","uuid","rxjs/operators"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).enexus=t.enexus||{},t.enexus["flipper-components"]={}),t.ng.core,t.ng.common,t["@enexus/flipper-vendors"],t.ng.router,t.rxjs["internal/operators"],t.ng.animations,t["@enexus/flipper-color"],t["@enexus/flipper-event"],t["@enexus/flipper-dialog"],t.lodash,t.rxjs,t["ngx-barcode"],t.ng.common.http,t.PouchDB,t.debugPouch,t.uuid,t.rxjs.operators)}(this,(function(t,e,n,r,i,o,a,s,c,u,d,l,p,f,h,v,y,g){"use strict";function m(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var b=m(h),N=m(v),S=function(){function t(t,e){this.templateRef=t,this.viewContainer=e,this.loaded=!1}return Object.defineProperty(t.prototype,"libLazyIf",{set:function(t){t&&!this.loaded&&(this.viewContainer.createEmbeddedView(this.templateRef),this.loaded=!0)},enumerable:!1,configurable:!0}),t}();S.decorators=[{type:e.Directive,args:[{selector:"[flipperLibLazyIf]"}]}],S.ctorParameters=function(){return[{type:e.TemplateRef},{type:e.ViewContainerRef}]},S.propDecorators={libLazyIf:[{type:e.Input}]};var I=function(t){var e=this;this.document=document,this.loading=!1,t.events.pipe(o.filter((function(t){return t instanceof i.NavigationStart}))).subscribe((function(){e.loading=!0})),t.events.pipe(o.filter((function(t){return t instanceof i.NavigationEnd||t instanceof i.NavigationCancel||t instanceof i.NavigationError}))).subscribe((function(){e.loading=!1;var t=e.document.getElementById("background-logo");t&&(t.setAttribute("class","fade-out"),setTimeout((function(){t.outerHTML=""}),200))}))};I.decorators=[{type:e.Component,args:[{selector:"flipper-router-progress",template:'<mat-progress-bar *ngIf="loading" [@myAnimation] mode="indeterminate"></mat-progress-bar>\r\n',animations:[a.trigger("myAnimation",[a.transition(":enter",[a.style({top:"0px",opacity:1})]),a.transition(":leave",[a.style({top:"0px",opacity:1}),a.animate("500ms",a.style({top:"-5px",opacity:0}))])])],styles:[":host{left:0;position:fixed;right:0;top:0;z-index:9999}"]}]}],I.ctorParameters=function(){return[{type:i.Router}]};var E=function(){};E.decorators=[{type:e.Component,args:[{selector:"flipper-header",template:'<header>\r\n  <nav class="banner" role="navigation">\r\n    <div class="content">\r\n      <div class="column column-fill flex-align-left"></div>\r\n      <div class="column flex-align-center">\r\n        <a  role="button" data-ember-action="" data-ember-action-467="467">\r\n          <img alt="image" [src]="\'./assets/icons/icon.png\'" style="width:40px;height: 40px;">\r\n        </a>\r\n      </div>\r\n      <div class="column column-fill flex-align-right"></div>\r\n    </div>\r\n  </nav>\r\n</header>\r\n',styles:["@media (min-width:718px){.banner{height:73px}}.banner{background-color:#211a36;color:#fff!important;height:62px;overflow:hidden}.banner .content{align-items:center;display:flex;height:100%;justify-content:space-between;padding:10px}@media (min-width:1024px){.content{width:868px}}@media (min-width:718px){.content{width:680px}}@media (min-width:480px){.content{width:424px}}@media (min-width:374px){.content{width:324px}}.content{margin-left:auto;margin-right:auto;width:276px}"]}]}];var T=function(){function t(){}return t.prototype.ngOnInit=function(){this.noDataLabel=this.noDataLabel||"No data"},t}();T.decorators=[{type:e.Component,args:[{selector:"flipper-table-overlay",template:'<div class="container">\r\n  <div class="loading-shade"\r\n       *ngIf="loading">\r\n    <flipper-spinner *ngIf="loading" [size]="48"></flipper-spinner>\r\n  </div>\r\n\r\n  <div class="no-data-shade" *ngIf="!loading && (!dataSource || dataSource.data.length === 0)">\r\n    <flipper-message icon="empty.svg" [title]="title" [message]="noDataLabel">\r\n    </flipper-message>\r\n  </div>\r\n\r\n  <ng-content></ng-content>\r\n\r\n</div>\r\n',styles:[".container{position:relative}.loading-shade,.no-data-shade{align-items:flex-start;bottom:0;display:flex;justify-content:center;left:0;min-height:100px;position:absolute;right:0;text-align:center;top:44px;z-index:1000000000}"]}]}],T.propDecorators={loading:[{type:e.Input}],dataSource:[{type:e.Input}],noDataLabel:[{type:e.Input}],title:[{type:e.Input}]};var L=function(){function t(t){this.toFill=t,this.color="primary",this.size=24}return Object.defineProperty(t.prototype,"hostClass",{get:function(){return this.toFill.transform(this.color)},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){},t}();L.decorators=[{type:e.Component,args:[{selector:"flipper-spinner",template:'<svg version="1.1" id="Calque_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t viewBox="0 0 70 70" [style.width.px]="size" [style.height.px]="size" xml:space="preserve">\r\n  <rect x="30"  width="10" height="10"></rect>\r\n  <rect x="40" width="10" height="10"></rect>\r\n  <rect x="50" y="10"  width="10" height="10"></rect>\r\n  <rect x="60" y="20"  width="10" height="10"></rect>\r\n  <rect x="60" y="30"  width="10" height="10"></rect>\r\n  <rect x="60" y="40"  width="10" height="10"></rect>\r\n  <rect x="50" y="50"  width="10" height="10"></rect>\r\n  <rect x="40" y="60"  width="10" height="10"></rect>\r\n  <rect x="30" y="60"  width="10" height="10"></rect>\r\n  <rect x="20" y="60"  width="10" height="10"></rect>\r\n  <rect x="10" y="50"  width="10" height="10"></rect>\r\n  <rect y="40"  width="10" height="10"></rect>\r\n  <rect y="30"  width="10" height="10"></rect>\r\n  <rect y="20"  width="10" height="10"></rect>\r\n  <rect x="10" y="10"  width="10" height="10"></rect>\r\n  <rect x="20"  width="10" height="10"></rect>\r\n</svg>\r\n',styles:["rect{animation-duration:1s;animation-iteration-count:infinite;animation-name:spinner}rect:first-child{animation-delay:.0625s;visibility:hidden}rect:nth-child(2){animation-delay:.125s;visibility:hidden}rect:nth-child(3){animation-delay:.1875s;visibility:hidden}rect:nth-child(4){animation-delay:.25s;visibility:hidden}rect:nth-child(5){animation-delay:.3125s;visibility:hidden}rect:nth-child(6){animation-delay:.375s;visibility:hidden}rect:nth-child(7){animation-delay:.4375s;visibility:hidden}rect:nth-child(8){animation-delay:.5s;visibility:hidden}rect:nth-child(9){animation-delay:.5625s;visibility:hidden}rect:nth-child(10){animation-delay:.625s;visibility:hidden}rect:nth-child(11){animation-delay:.6875s;visibility:hidden}rect:nth-child(12){animation-delay:.75s;visibility:hidden}rect:nth-child(13){animation-delay:.8125s;visibility:hidden}rect:nth-child(14){animation-delay:.875s;visibility:hidden}rect:nth-child(15){animation-delay:.9375s;visibility:hidden}rect:nth-child(16){animation-delay:1s;visibility:hidden}@keyframes spinner{0%{visibility:visible}40%{visibility:visible}70%{visibility:hidden}to{visibility:hidden}}"]}]}],L.ctorParameters=function(){return[{type:s.ColorToFillClassPipe}]},L.propDecorators={color:[{type:e.Input}],size:[{type:e.Input}],hostClass:[{type:e.HostBinding,args:["class"]}]};var A=function(){this.icon="search.svg",this.title="",this.message=""};A.decorators=[{type:e.Component,args:[{selector:"flipper-message",template:'<div class="message">\r\n\r\n  <div class="grid-2-at-medium grid-row-space-line">\r\n    <div class="col">\r\n      <span class="message-icon">\r\n        <img [src]="\'./assets/icons/\'+icon" class="icon">\r\n      </span>\r\n    </div>\r\n    <div class="col">\r\n      <span class="message-title">\r\n        {{title}}\r\n      </span>\r\n      <div class="message-desc mt-4">\r\n        {{message}}\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n</div>\r\n',styles:[".message-icon{display:block;text-align:center}.message-icon .icon{height:104px;object-fit:contain;width:104px}.message-title{font-size:50px;letter-spacing:-1.17px}.message-desc,.message-title{color:#1b2125;display:block;font-family:Roboto;font-stretch:normal;font-style:normal;font-weight:400;height:auto;line-height:normal;position:relative;text-align:center;width:auto}.message-desc{font-size:16px;letter-spacing:-.37px}"]}]}],A.propDecorators={icon:[{type:e.Input}],title:[{type:e.Input}],message:[{type:e.Input}]};var R=function(){function t(){}return t.prototype.transform=function(t,e){var n;if(void 0===e&&(e=2),(e=Number(e))<1)n=Math.round(t).toString();else{var r=t.toString();-1===r.lastIndexOf(".")&&(r+=".");var i=r.lastIndexOf(".")+e,o=Number(r.substring(i,i+1));if(Number(r.substring(i+1,i+2))>=5){if(9===o&&i>0)for(;i>0&&(9===o||isNaN(o));)"."!==String(o)?(i-=1,o=Number(r.substring(i,i+1))):i-=1;o+=1}if(10===o)r=r.substring(0,r.lastIndexOf(".")),n=(Number(r)+1).toString()+".";else n=r.substring(0,i)+o.toString()}if(e>0){-1===n.lastIndexOf(".")&&(n+=".");for(var a=n.substring(n.lastIndexOf(".")+1).length,s=0;s<e-a;s++)n+="0"}return this.formatNumbers(n)},t.prototype.formatNumbers=function(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")},t}();R.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new R},token:R,providedIn:"root"}),R.decorators=[{type:e.Pipe,args:[{name:"roundNumber"}]},{type:e.Injectable,args:[{providedIn:"root"}]}];var B=function(){function t(){}return t.prototype.transform=function(t,e){var n=0;if(t.length>0)for(var r=0,i=t.length;r<i;r++)n+=parseFloat(t[r][e]);return n},t}();B.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new B},token:B,providedIn:"root"}),B.decorators=[{type:e.Pipe,args:[{name:"calculateTotalClass",pure:!0}]},{type:e.Injectable,args:[{providedIn:"root"}]}];var x=function(){function t(t){this.el=t}return t.prototype.onResize=function(){this.matchHeight(this.el.nativeElement,this.myMatchHeight)},t.prototype.ngAfterViewChecked=function(){this.matchHeight(this.el.nativeElement,this.myMatchHeight)},t.prototype.matchHeight=function(t,e){if(t){var n=t.getElementsByClassName(e);if(n){var r=Array.from(n).map((function(t){return t.getBoundingClientRect().height})).reduce((function(t,e){return e>t?e:t}),0);Array.from(n).forEach((function(t){return t.style.height=r+"px"}))}}},t}();x.decorators=[{type:e.Directive,args:[{selector:"[flipperMyMatchHeight]"}]}],x.ctorParameters=function(){return[{type:e.ElementRef}]},x.propDecorators={myMatchHeight:[{type:e.Input}],onResize:[{type:e.HostListener,args:["window:resize"]}]};var w=function(){function t(){}return t.prototype.transform=function(t,e){return this.mergeById(t).with(e)},t.prototype.mergeById=function(t){return{with:function(e){return d.map(t,(function(t){return d.find(e,(function(e){return e.id===t.id}))||t}))}}},t}();w.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new w},token:w,providedIn:"root"}),w.decorators=[{type:e.Pipe,args:[{name:"mergeArryById"}]},{type:e.Injectable,args:[{providedIn:"root"}]}];var O=function(){function t(){}return t.prototype.transform=function(t,e){return this.arrayRemove(t,e)},t.prototype.arrayRemove=function(t,e){return void 0===t&&(t=[]),t.length>0?t.filter((function(t){return JSON.stringify(t)!==JSON.stringify(e)})):t},t}();O.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new O},token:O,providedIn:"root"}),O.decorators=[{type:e.Pipe,args:[{name:"arrayRemoveItem"}]},{type:e.Injectable,args:[{providedIn:"root"}]}];var C=function(){function t(){}return t.prototype.transform=function(t,e){return!!t.find((function(t){return t===e}))},t}();C.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new C},token:C,providedIn:"root"}),C.decorators=[{type:e.Pipe,args:[{name:"findKey",pure:!0}]},{type:e.Injectable,args:[{providedIn:"root"}]}];var U,P=function(t,e,n,r,i){this.id=t,this.type=e,this.title=n,this.message=r,this.timeout=i};!function(t){t[t.success=0]="success",t[t.warning=1]="warning",t[t.error=2]="error",t[t.info=3]="info"}(U||(U={}));var D=function(){function t(){this.subject=new l.Subject,this.idx=0}return t.prototype.getObservable=function(){return this.subject.asObservable()},t.prototype.info=function(t,e,n){void 0===n&&(n=3e3),this.subject.next(new P(this.idx++,U.info,t,e,n))},t.prototype.success=function(t,e,n){void 0===n&&(n=3e3),this.subject.next(new P(this.idx++,U.success,t,e,n))},t.prototype.warning=function(t,e,n){void 0===n&&(n=3e3),this.subject.next(new P(this.idx++,U.warning,t,e,n))},t.prototype.error=function(t,e,n){void 0===n&&(n=0),this.subject.next(new P(this.idx++,U.error,t,e,n))},t}();D.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new D},token:D,providedIn:"root"}),D.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],D.ctorParameters=function(){return[]};var G=function(){function t(t){this.notificationSvc=t,this.notifications=[]}return t.prototype.addNotification=function(t){var e=this;this.notifications.push(t),0!==t.timeout&&setTimeout((function(){return e.close(t)}),t.timeout)},t.prototype.ngOnInit=function(){var t=this;this.subscription=this.notificationSvc.getObservable().subscribe((function(e){return t.addNotification(e)}))},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.close=function(t){this.notifications=this.notifications.filter((function(e){return e.id!==t.id}))},t.prototype.className=function(t){var e;switch(t.type){case U.success:e="success";break;case U.warning:e="warning";break;case U.error:e="error";break;default:e="info"}return e},t}();G.decorators=[{type:e.Component,args:[{selector:"flipper-notification",template:'<div class="notifications">\r\n\t<div *ngFor="let notification of notifications" class="notification" [ngClass]="className(notification)">\r\n\t\t<ng-container *ngTemplateOutlet="notificationTpl;context:{notification:notification}"></ng-container>\r\n\t</div>\r\n</div>\r\n\r\n<ng-template #notificationTpl let-notification="notification">\r\n\r\n\t<div class="title" fxLayout="row" fxLayoutAlign="space-between center">\r\n\t\t<div>{{notification.title}}</div>\r\n\t\t<button mat-icon-button \r\n            (click)="close(notification)"\r\n            matTooltip="Close the notification"\r\n            matTooltipPosition="before">\r\n        <mat-icon><img [src]="\'./assets/icons/arrow-up-right.svg\'" class="icon-arrow"></mat-icon>\r\n      </button>\r\n\t</div>\r\n\r\n\t<div class="message">{{notification.message}}</div>\r\n\r\n</ng-template>\r\n',styles:[".notifications{max-width:400px;min-width:400px;position:fixed;right:0;top:0;z-index:1000}.notifications .notification{border-radius:5px;color:#fff;margin:5px;overflow:hidden}.notifications .notification .title{background:rgba(0,0,0,.6);font-weight:700;padding-left:10px}.notifications .notification .message{background:rgba(0,0,0,.4);max-height:200px;overflow-y:auto;padding:10px}.notifications .notification.info{background-color:hsla(0,0%,74.1%,.9)}.notifications .notification.success{background-color:rgba(27,158,119,.9)}.notifications .notification.warning{background-color:rgba(217,95,2,.9)}.notifications .notification.error{background-color:rgba(246,71,71,.9)}"]}]}],G.ctorParameters=function(){return[{type:D}]};var H=function(){this.labels=[],this.showName=!0,this.showSku=!0};H.decorators=[{type:e.Component,args:[{selector:"flipper-generate-barcode",template:'\r\n<div class="row" *ngIf="labels && labels.length > 0">\r\n    <div class="col m-3"  *ngFor="let label of labels">\r\n        <span *ngIf="showName" class="name">{{label.name}}</span>\r\n        <ngx-barcode [bc-value]="label.sku" [bc-display-value]="showSku"></ngx-barcode>\r\n    </div>\r\n</div>\r\n\r\n',styles:['.name{font-size:.8em}label{color:#999;display:block;margin-bottom:.5em;margin-top:2em}.col{float:left;padding:10px;text-align:center}.row{margin:3px}.row:after{clear:both;content:"";display:table}@media screen and (max-width:600px){.col{display:block;width:100%}}']}]}],H.propDecorators={labels:[{type:e.Input}],showName:[{type:e.Input}],showSku:[{type:e.Input}]};var M=function(){};M.decorators=[{type:e.Component,args:[{selector:"flipper-loading-icon",template:'<ng-container *ngIf="!loading"><ng-content></ng-content></ng-container>\r\n<div *ngIf="loading" class="loading-spinner">\r\n  <flipper-spinner [size]="24" [color]="\'accent\'"></flipper-spinner>\r\n</div>\r\n',styles:[".mat-button .loading-spinner{display:inline-block}.mat-icon-button .loading-spinner{display:block;margin-top:4px}"]}]}],M.propDecorators={loading:[{type:e.Input}]};var k=function(){};k.decorators=[{type:e.NgModule,args:[{imports:[f.HttpClientModule,n.CommonModule,r.VendorsModule,s.ColorModule,c.FlipperEventModule,u.DialogModule,p.NgxBarcodeModule],declarations:[M,G,I,E,T,L,A,S,R,B,x,w,O,C,H],exports:[M,I,G,E,T,L,A,S,R,B,w,O,x,C,H],entryComponents:[],providers:[D,R,B,w,O,C]}]}];var j,q,_=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},Y=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},K=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},V=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},F=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},z=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},$=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},J=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},X=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},Q=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},W=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},Z=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},tt=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]};(j=t.STATUS||(t.STATUS={})).COMPLETE="complete",j.SENT="sent",j.RECEIVED="received",j.OPEN="open",j.VOID="void",j.HELD="held",j.OVERDUE="overdue",(q=t.ORDERTYPE||(t.ORDERTYPE={})).PURCHASE="purchase",q.SALES="sales",q.RETURN="return",q.TRANSFER="transfer";var et=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},nt=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},rt=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},it=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},ot=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},at=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},st=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},ct=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},ut=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},dt=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},lt=function(t){for(var e in void 0===t&&(t={}),t)this[e]=t[e]},pt=function(){};pt.ORDER="orders",pt.PRODUCTS="products",pt.PRICES="prices",pt.PRICEVARIANTS="priceVariants",pt.SHOPPINGS="shoppings",pt.VARIANTS="variants";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
var ft=function(t,e){return(ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ht(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ft(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function vt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function yt(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function gt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;var mt=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.order=n,r}return ht(e,t),e}(c.BusEvent);mt.CHANNEL=pt.ORDER;var bt=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.price=n,r}return ht(e,t),e}(c.BusEvent);bt.CHANNEL=pt.PRICES;var Nt=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.priceVariant=n,r}return ht(e,t),e}(c.BusEvent);Nt.CHANNEL=pt.PRICEVARIANTS;var St=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.product=n,r}return ht(e,t),e}(c.BusEvent);St.CHANNEL=pt.PRODUCTS;var It=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.shopping=n,r}return ht(e,t),e}(c.BusEvent);It.CHANNEL=pt.SHOPPINGS;var Et=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.variant=n,r}return ht(e,t),e}(c.BusEvent);Et.CHANNEL=pt.VARIANTS;var Tt=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.variants=n,r}return ht(e,t),e}(c.BusEvent);Tt.CHANNEL="variants";var Lt=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.branchProducts=n,r}return ht(e,t),e}(c.BusEvent);Lt.CHANNEL="branchProducts";var At=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.errorMessage=n,r}return ht(e,t),e}(c.BusEvent);At.CHANNEL="errorMessage";var Rt=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.products=n,r}return ht(e,t),e}(c.BusEvent);Rt.CHANNEL="products";var Bt=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.stocks=n,r}return ht(e,t),e}(c.BusEvent);Bt.CHANNEL="stocks";var xt=function(t){function e(n,r){void 0===r&&(r="add");var i=t.call(this,e.CHANNEL)||this;return i.branch=n,i.action=r,i}return ht(e,t),e}(c.BusEvent);xt.CHANNEL="current-branch";var wt=function(t){function e(n,r){void 0===r&&(r="add");var i=t.call(this,e.CHANNEL)||this;return i.business=n,i.action=r,i}return ht(e,t),e}(c.BusEvent);wt.CHANNEL="current-business";var Ot=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.user=n,r}return ht(e,t),e}(c.BusEvent);Ot.CHANNEL="current-user";var Ct=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.subscription=n,r}return ht(e,t),e}(c.BusEvent);Ct.CHANNEL="user-subscription";var Ut=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.businesses=n,r}return ht(e,t),e}(c.BusEvent);Ut.CHANNEL="businesses";var Pt=function(t){function e(n,r){void 0===r&&(r="add");var i=t.call(this,e.CHANNEL)||this;return i.draftProduct=n,i.action=r,i}return ht(e,t),e}(c.BusEvent);Pt.CHANNEL="draftProduct";var Dt=function(t){function e(n,r){void 0===r&&(r="add");var i=t.call(this,e.CHANNEL)||this;return i.draftStockHistory=n,i.action=r,i}return ht(e,t),e}(c.BusEvent);Dt.CHANNEL="draftStockHistory";var Gt=function(t){function e(n,r){void 0===r&&(r="add");var i=t.call(this,e.CHANNEL)||this;return i.draftStocks=n,i.action=r,i}return ht(e,t),e}(c.BusEvent);Gt.CHANNEL="draftStocks";var Ht=function(t){function e(n,r){void 0===r&&(r="add");var i=t.call(this,e.CHANNEL)||this;return i.draftVariants=n,i.action=r,i}return ht(e,t),e}(c.BusEvent);Ht.CHANNEL="draftVariants";var Mt=function(t){function e(n,r){void 0===r&&(r="add");var i=t.call(this,e.CHANNEL)||this;return i.defaultTax=n,i.action=r,i}return ht(e,t),e}(c.BusEvent);Mt.CHANNEL="defaultTax";var kt=function(t){function e(n,r){void 0===r&&(r="add");var i=t.call(this,e.CHANNEL)||this;return i.taxes=n,i.action=r,i}return ht(e,t),e}(c.BusEvent);kt.CHANNEL="taxes";var jt=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.branches=n,r}return ht(e,t),e}(c.BusEvent);jt.CHANNEL="branches";var qt=function(t){function e(n,r){void 0===r&&(r="add");var i=t.call(this,e.CHANNEL)||this;return i.currentStock=n,i.action=r,i}return ht(e,t),e}(c.BusEvent);qt.CHANNEL="currentStock";var _t=function(t){function e(n){var r=t.call(this,e.CHANNEL)||this;return r.any_event=n,r}return ht(e,t),e}(c.BusEvent);_t.CHANNEL="any-event";var Yt=a.animation([a.style({opacity:0,transform:"scale(0.5)"}),a.animate("{{ duration }} ease-in-out",a.style({opacity:1,transform:"scale(1)"}))]),Kt=a.animation([a.style({opacity:0}),a.animate("{{ duration }} ease-in-out",a.style({opacity:1}))]),Vt=a.animation([a.style({opacity:1}),a.animate("{{ duration }} ease-in-out",a.style({opacity:0}))]),Ft=function(){function t(){}return t.prototype.countries=function(){return Object.values(this.httpGet("assets/lists/countries.json"))},t.prototype.currencies=function(){return Object.values(this.httpGet("assets/lists/currencies.json"))},t.prototype.timezones=function(){return Object.values(this.httpGet("assets/lists/timezones.json"))},t.prototype.units=function(){return Object.values(this.httpGet("assets/lists/units.json"))},t.prototype.reasons=function(){return Object.values(this.httpGet("assets/lists/reasons.json"))},t.prototype.httpGet=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),JSON.parse(e.responseText)},t}();Ft.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new Ft},token:Ft,providedIn:"root"}),Ft.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],Ft.ctorParameters=function(){return[]};var zt="http://localhost:8082",$t=function(){function t(t,n){this.http=t,this.eventBus=n,this.isInstantiated=!1,this.listener=new e.EventEmitter,this.listenerLogin=new e.EventEmitter,b.default.plugin(require("pouchdb-find").default),this.connect("main"),N.default(b.default),this.sync([localStorage.getItem("userId")])}return t.prototype.activeUser=function(t){var e=this;return void 0===t&&(t="users"),this.database.createIndex({index:{fields:["table","active"]}}).then((function(){return e.database.find({selector:{table:{$eq:t},active:{$eq:!0}}})}))},t.prototype.query=function(t,e){var n=this;return void 0===t&&(t=[]),void 0===e&&(e={}),this.database.createIndex({index:{fields:t}}).then((function(){return n.database.find({selector:e})}))},t.prototype.fastQuery=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e={}),vt(this,void 0,void 0,(function(){var n;return yt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),[4,this.database.createIndex({index:{fields:t}})];case 1:return r.sent(),[4,this.database.find({selector:e})];case 2:return[4,r.sent().docs];case 3:return[2,r.sent()];case 4:return n=r.sent(),console.log(n),[3,5];case 5:return[2]}}))}))},t.prototype.callbackQuery=function(t,e,n){return void 0===t&&(t=[]),void 0===e&&(e={}),this.database.find({selector:e,fields:t},(function(t,e){return t?console.log(t):n(e)}))},t.prototype.activeBusiness=function(t,e){var n=this;return void 0===e&&(e="businesses"),this.database.createIndex({index:{fields:["table","active","userId"]}}).then((function(){return n.database.find({selector:{table:{$eq:e},active:{$eq:!0},userId:{$eq:t}}})}))},t.prototype.hasDraftProduct=function(t,e){var n=this;return void 0===e&&(e="products"),this.database.createIndex({index:{fields:["table","isDraft","businessId"]}}).then((function(){return n.database.find({selector:{table:{$eq:e},isDraft:{$eq:!0},businessId:{$eq:t}}})}))},t.prototype.currentBusiness=function(){var t=this;return this.activeUser().then((function(e){if(e&&e.docs.length>0)return t.activeBusiness(e.docs[0].id,"businesses").then((function(t){if(t&&t.docs.length>0)return t.docs[0]}))}))},t.prototype.currentTax=function(){var t=this;return this.activeUser().then((function(e){if(e&&e.docs.length>0)return t.activeBusiness(e.docs[0].id,"businesses").then((function(e){return e&&e.docs.length>0?t.database.query(["table","businessId","isDefault"],{table:{$eq:"taxes"},businessId:{$eq:e.docs[0].id},isDefault:{$eq:!0}}).then((function(t){return t.docs&&t.docs.length>0?t.docs[0]:[]})):null}))}))},t.prototype.listBusinessBranches=function(){return vt(this,void 0,void 0,(function(){var t=this;return yt(this,(function(e){switch(e.label){case 0:return[4,this.http.get(zt+"/api/business").toPromise().then((function(e){return vt(t,void 0,void 0,(function(){return yt(this,(function(t){switch(t.label){case 0:return e?[4,this.http.get(zt+"/api/branches/"+e.id).toPromise().then((function(t){return t}))]:[3,2];case 1:return[2,t.sent()];case 2:return[2]}}))}))}))];case 1:return[2,e.sent()]}}))}))},t.prototype.listBusinessTaxes=function(){var t=this;return this.currentBusiness().then((function(e){return e?t.query(["table","businessId"],{table:{$eq:"taxes"},businessId:{$eq:e.id}}).then((function(t){return t.docs&&t.docs.length>0?t.docs:[]})):[]}))},t.prototype.listBusinessTaxes2=function(){var t=this;return this.currentBusiness().then((function(e){return e?t.callbackQuery(["table","businessId"],{table:{$eq:"taxes"},businessId:{$eq:e.id}},(function(t){return t.docs&&t.docs.length>0?t.docs:[]})):[]}))},t.prototype.activeBranch=function(t,e){var n=this;return void 0===e&&(e="branches"),this.database.createIndex({index:{fields:["tables","active","businessId"]}}).then((function(){return n.database.find({selector:{table:{$eq:e},active:{$eq:!0},businessId:{$eq:t}}})}))},t.prototype.connect=function(t,e){void 0===e&&(e=null),this.isInstantiated||(this.database=new b.default("main"),console.log("did couchbase connected?"),null!=e&&this.database.changes({filter:function(t){return t.channels[0]===e}}),this.isInstantiated=!0)},t.prototype.fetch=function(){return this.database.allDocs({include_docs:!0})},t.prototype.get=function(t){return this.database.get(t,{conflicts:!1})},t.prototype.remove=function(t){try{return this.database.remove(t)}catch(t){console.log("did not removed",t)}},t.prototype.find=function(t){return this.get(t).then((function(t){return t}),(function(t){if("404"===t.status)throw new Error("ERROR:"+t);return new Promise((function(e,n){n(t)}))}))},t.prototype.getResponse=function(t,e){return!Array.isArray(t)&&e?[t]:Array.isArray(t)&&!e?t[0]:t},t.prototype.makeid=function(t){for(var e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length,i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*r));return e},t.prototype.uid=function(){return y.v1()},t.prototype.put=function(t,e){var n=this;return e._id=t,e.uid=this.uid(),e.channel=localStorage.getItem("userId"),e.channels=[localStorage.getItem("userId")],this.get(t).then((function(t){return e._rev=t._rev,console.log("updated doc",e),n.database.put(e)}),(function(t){return console.log("error on update",t),"404"===t.status||404===t.status?n.database.put(e):new Promise((function(e,n){n(t)}))}))},t.prototype.sync=function(t){},t.prototype.getChangeListener=function(){return this.listener},t.prototype.getChangeListenerLogin=function(){return this.listenerLogin},t.prototype.unique=function(t,e){return void 0===e&&(e="name"),t.length>0?this.removeDuplicates(t,e):[]},t.prototype.contains=function(t,e,n){var r,i;try{for(var o=gt(t),a=o.next();!a.done;a=o.next()){var s=a.value;if(this.isEqual(s,e,n))return!0}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},t.prototype.isEqual=function(t,e,n){return t[n]===e[n]},t.prototype.removeDuplicates=function(t,e){var n=this,r=[];return t.filter((function(t){return!n.contains(r,t,e)&&r.push(t)}))},t}();$t.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new $t(e.ɵɵinject(f.HttpClient),e.ɵɵinject(c.FlipperEventBusService))},token:$t,providedIn:"root"}),$t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],$t.ctorParameters=function(){return[{type:f.HttpClient},{type:c.FlipperEventBusService}]};var Jt,Xt=new e.InjectionToken("APP_CONFIG");(Jt=t.TABLES||(t.TABLES={})).USER="user",Jt.BUSINESS="business",Jt.TYPES="businessTypes",Jt.MENU="menus",Jt.BRANCHES="branches",Jt.BUSINESSCATEGORY="businessCategories",Jt.USERBUSINESS="businessUsers",Jt.TAXES="taxes",Jt.PRODUCTS="products",Jt.VARIANTS="variants",Jt.REASON="reasons",Jt.STOCKS="stocks",Jt.BRANCHPRODUCTS="branchProducts",Jt.ORDER="orders",Jt.ORDERDETAILS="orderDetails",Jt.STOCKHISTORY="stockHistory",Jt.DEVICE="devices",Jt.RECEIPT="receipts",Jt.SUBSCRIPTION="subscription";var Qt={database:{name:"flipper",engine:"LOCALSTORAGE"},tables:[{name:t.TABLES.USER,query:"id STRING,\n                    name STRING,\n                    email STRING,\n                    active BOOL,\n                    token STRING,\n                    createdAt DATETIME,\n                    updatedAt DATETIME,\n                    PRIMARY KEY (id)\n            "},{name:t.TABLES.BUSINESSCATEGORY,query:"id STRING,\n                    name STRING,\n                    typeId STRING,\n                    syncedOnline BOOL,\n                    PRIMARY KEY (id)\n                "},{name:t.TABLES.REASON,query:"id STRING,\n                    name STRING,\n                    operation STRING,\n                    active BOOL,\n                    createdAt DATETIME,\n                    updatedAt DATETIME,\n                    PRIMARY KEY (id)\n                 "},{name:t.TABLES.TYPES,query:"id STRING,\n                    name STRING,\n                    syncedOnline BOOL,\n                    PRIMARY KEY (id)\n            "},{name:t.TABLES.MENU,query:"id int(11) NOT NULL AUTO_INCREMENT,\n                name STRING,\n                icon STRING,\n                route STRING,\n                active BOOL,\n                isSetting BOOL,\n                PRIMARY KEY (id)"},{name:t.TABLES.BUSINESS,query:"\n                id STRING,\n                name STRING,\n                country STRING,\n                currency STRING,\n                businessUrl STRING,\n                timeZone STRING,\n                active BOOL,\n                userId STRING,\n                typeId STRING,\n                categoryId STRING,\n                createdAt DATETIME,\n                updatedAt DATETIME,\n                PRIMARY KEY (id)\n                "},{name:t.TABLES.BRANCHES,query:"\n                id STRING,\n                name STRING,\n                active BOOL,\n                businessId STRING,\n                mapLatitude STRING NULL,\n                mapLongitude STRING NULL,\n                createdAt DATETIME,\n                updatedAt DATETIME,\n                PRIMARY KEY (id)\n                "},{name:t.TABLES.USERBUSINESS,query:"id STRING,\n                    userId STRING,\n                    businessId STRING,\n                    PRIMARY KEY (id)\n                    "},{name:t.TABLES.TAXES,query:"id STRING,\n                    name STRING,\n                    percentage int(11),\n                    active BOOL,\n                    isDefault BOOL,\n                    businessId STRING,\n                    channel STRING,\n                    createdAt DATETIME,\n                    updatedAt DATETIME,\n                    PRIMARY KEY (id)\n                        "},{name:t.TABLES.PRODUCTS,query:"id STRING,\n                    name STRING,\n                    categoryId int(11) NULL,\n                    description STRING NULL,\n                    picture STRING NULL,\n                    taxId int(11) NULL,\n                    active BOOL,\n                    hasPicture BOOL,\n                    isDraft BOOL,\n                    isCurrentUpdate BOOL,\n                    businessId STRING,\n                    supplierId STRING NULL,\n                    channel STRING,\n                    createdAt DATETIME,\n                    updatedAt DATETIME,\n                    PRIMARY KEY (id)\n                "},{name:t.TABLES.BRANCHPRODUCTS,query:"id STRING,\n                    productId STRING,\n                    branchId STRING,\n                    channel STRING,\n                    PRIMARY KEY (id)\n                "},{name:t.TABLES.VARIANTS,query:"id STRING,\n                    name STRING,\n                    sku STRING,\n                    productId STRING,\n                    unit STRING NULL,\n                    channel STRING,\n                    createdAt DATETIME,\n                    updatedAt DATETIME,\n                    PRIMARY KEY (id)\n                "},{name:t.TABLES.STOCKS,query:" id STRING,\n                    branchId STRING,\n                    variantId STRING,\n                    productId STRING,\n                    lowStock STRING,\n                    currentStock STRING,\n                    supplyPrice int(11) NULL,\n                    retailPrice int(11) NULL,\n                    canTrackingStock BOOL,\n                    showLowStockAlert BOOL,\n                    channel STRING,\n                    createdAt DATETIME,\n                    updatedAt DATETIME,\n                    PRIMARY KEY (id)\n                "},{name:t.TABLES.ORDER,query:"id STRING,\n                    branchId STRING NOT NULL,\n                    deviceId STRING NULL,\n                    orderNumber STRING NOT NULL,\n                    customerId STRING NULL,\n                    status STRING NOT NULL,\n                    reference STRING NULL,\n                    orderType STRING NOT NULL,\n                    supplierId STRING NULL,\n                    subTotal int(11) NULL,\n                    supplierInvoiceNumber STRING NULL,\n                    taxRate int(11) NULL,\n                    taxAmount int(11) NULL,\n                    discountRate int(11) NULL,\n                    discountAmount int(11) NULL,\n                    cashReceived int(11) NULL,\n                    customerChangeDue int(11) NULL,\n                    saleTotal int(11) NULL,\n                    paymentId STRING NULL,\n                    orderNote STRING NULL,\n                    active BOOL,\n                    isDraft BOOL,\n                    channel STRING,\n                    deliverDate DATETIME,\n                    orderDate DATETIME,\n                    createdAt DATETIME,\n                    updatedAt DATETIME,\n                    PRIMARY KEY (id)\n                "},{name:t.TABLES.ORDERDETAILS,query:" id STRING NOT NULL,\n                    orderId STRING NOT NULL,\n                    variantId STRING NOT NULL,\n                    variantName STRING NOT NULL,\n                    price int(11) NULL,\n                    quantity int(11) NOT NULL,\n                    unit STRING NULL,\n                    taxAmount int(11) NULL,\n                    taxRate int(11) NULL,\n                    discountAmount int(11) NULL,\n                    discountRate int(11) NULL,\n                    subTotal int(11) NULL,\n                    note STRING NULL,\n                    channel STRING,\n                    createdAt DATETIME,\n                    updatedAt DATETIME,\n                    PRIMARY KEY (id)\n                "},{name:t.TABLES.STOCKHISTORY,query:"id STRING,\n                    variantId STRING,\n                    stockId STRING,\n                    productId STRING,\n                    quantity int(11) NOT NULL,\n                    reason STRING NULL,\n                    note STRING NULL,\n                    channel STRING,\n                    createdAt DATETIME,\n                    updatedAt DATETIME,\n                    PRIMARY KEY (id)\n                "},{name:t.TABLES.DEVICE,query:" id int(11) NOT NULL AUTO_INCREMENT,\n                    branchId int(11) NOT NULL,\n                    name int(11) NOT NULL,\n                    token STRING NOT NULL,\n                    channel STRING,\n                    createdAt DATETIME,\n                    updatedAt DATETIME,\n                    PRIMARY KEY (id)\n                "},{name:t.TABLES.RECEIPT,query:" id int(11) NOT NULL AUTO_INCREMENT,\n                    branchId int(11) NOT NULL,\n                    businessName int(11) NOT NULL,\n                    digitalLogo STRING  NULL,\n                    printedLogo STRING  NULL,\n                    showLocation BOOL  NULL,\n                    color STRING  NULL,\n                    address1 STRING  NULL,\n                    address1 STRING  NULL,\n                    city STRING  NULL,\n                    customerText STRING  NULL,\n                    returnPolicy STRING  NULL,\n                    showItemNote BOOL  NULL,\n                    channel STRING,\n                    createdAt DATETIME,\n                    updatedAt DATETIME,\n                    PRIMARY KEY (id)\n                "}],demo:{email:"admin@admin.com",password:"admin"},defaultMenu:[{name:"Analytics",icon:"analytics.svg",route:"analytics",active:!0,isSetting:!1},{name:"POS",icon:"pos.svg",route:"pos",active:!1,isSetting:!1},{name:"Inventory",icon:"inventory.svg",route:"inventory",active:!1,isSetting:!1},{name:"Transactions",icon:"transaction.svg",route:"transactions",active:!1,isSetting:!1},{name:"Settings",icon:"settings.svg",route:"settings",active:!1,isSetting:!0}],defaultReasons:[{name:"Stock Received",operation:"add",active:!0,createdAt:new Date,updatedAt:new Date},{name:"Inventory Re-count",operation:"add",active:!0,createdAt:new Date,updatedAt:new Date},{name:"Damage",operation:"remove",active:!0,createdAt:new Date,updatedAt:new Date},{name:"Theft",operation:"remove",active:!0,createdAt:new Date,updatedAt:new Date},{name:"Loss",operation:"remove",active:!0,createdAt:new Date,updatedAt:new Date},{name:"Restock Return",operation:"add",active:!0,createdAt:new Date,updatedAt:new Date}],defaultCategory:[{name:"Beauty Salon",id:"beauty-salon",type_id:"beauty-and-personal-care"},{name:"Hair Salon/Barbershop",id:"hair-salon/barbershop",type_id:"beauty-and-personal-care"},{name:"Independent Stylist/Barber",id:"independent-stylist/barber",type_id:"beauty-and-personal-care"},{name:"Massage Therapist",id:"massage-therapist",type_id:"beauty-and-personal-care"},{name:"Nail Salon",id:"nail-salon",type_id:"beauty-and-personal-care"},{name:"Spa",id:"spa",type_id:"beauty-and-personal-care"},{name:"Tanning Salon",id:"tanning-salon",type_id:"beauty-and-personal-care"},{name:"Tattoo/Piercing",id:"tattoo/piercing",type_id:"beauty-and-personal-care"},{name:"Pharamcy",id:"pharamcy",type_id:"retail"},{name:"Grocery/Market",id:"grocery/market",type_id:"retail"},{name:"Pet Store",id:"pet-store",type_id:"retail"},{name:"Electronics",id:"electronics",type_id:"retail"},{name:"Hardware Store",id:"hardware-store",type_id:"retail"},{name:"Eyewear",id:"eyewear",type_id:"retail"},{name:"Outdoor Markets",id:"outdoor-markets",type_id:"retail"},{name:"Speciality Shop",id:"speciality-shop",type_id:"retail"},{name:"Sporting Goods",id:"sporting-goods",type_id:"retail"},{name:"Hobby Shop",id:"hobby-shop",type_id:"retail"},{name:"Jewelry and Watches",id:"jewelry-and-watches",type_id:"retail"},{name:"Flowers and Gifts",id:"flowers-and-gifts",type_id:"retail"}],defaultType:[{name:"Beauty and Personal Care",id:"beauty-and-personal-care"},{name:"Retail",id:"retail"}]},Wt={user:Qt.database.name+"."+t.TABLES.USER,business:Qt.database.name+"."+t.TABLES.BUSINESS,branch:Qt.database.name+"."+t.TABLES.BRANCHES,menu:Qt.database.name+"."+t.TABLES.MENU,type:Qt.database.name+"."+t.TABLES.TYPES,businessCategory:Qt.database.name+"."+t.TABLES.BUSINESSCATEGORY,userBusiness:Qt.database.name+"."+t.TABLES.USERBUSINESS,taxes:Qt.database.name+"."+t.TABLES.TAXES,variants:Qt.database.name+"."+t.TABLES.VARIANTS,products:Qt.database.name+"."+t.TABLES.PRODUCTS,stocks:Qt.database.name+"."+t.TABLES.STOCKS,branchProducts:Qt.database.name+"."+t.TABLES.BRANCHPRODUCTS,reasons:Qt.database.name+"."+t.TABLES.REASON,order:Qt.database.name+"."+t.TABLES.ORDER,orderDetails:Qt.database.name+"."+t.TABLES.ORDERDETAILS,stockHistory:Qt.database.name+"."+t.TABLES.STOCKHISTORY},Zt={channel:localStorage.getItem("channel"),sessionId:localStorage.getItem("sessionId"),bucket:"main",syncUrl:"http://yegobox.com:4985/main",canSync:!0,user:"admin",password:"singlworld",Tables:{user:t.TABLES.USER+"_"+localStorage.getItem("channel"),business:t.TABLES.BUSINESS+"_"+localStorage.getItem("channel"),branches:t.TABLES.BRANCHES+"_"+localStorage.getItem("channel"),menus:t.TABLES.MENU,businessTypes:t.TABLES.TYPES,businessCategories:t.TABLES.BUSINESSCATEGORY,businessUsers:t.TABLES.USERBUSINESS+"_"+localStorage.getItem("channel"),taxes:t.TABLES.TAXES+"_"+localStorage.getItem("channel"),variants:t.TABLES.VARIANTS+"_"+localStorage.getItem("channel"),products:t.TABLES.PRODUCTS+"_"+localStorage.getItem("channel"),branchProducts:t.TABLES.BRANCHPRODUCTS+"_"+localStorage.getItem("channel"),reasons:t.TABLES.REASON+"_"+localStorage.getItem("channel"),orders:t.TABLES.ORDER+"_"+localStorage.getItem("channel"),orderDetails:t.TABLES.ORDERDETAILS+"_"+localStorage.getItem("channel"),stockHistories:t.TABLES.STOCKHISTORY+"_"+localStorage.getItem("channel"),subscription:t.TABLES.SUBSCRIPTION+"_"+localStorage.getItem("channel"),stocks:t.TABLES.STOCKS+"_"+localStorage.getItem("channel")}},te=function(){function t(t,e){this.eventBus=t,this.database=e,this.currentUser=null,this.database.connect(Zt.bucket),this.init()}return t.prototype.init=function(){var t=this;this.user(),this.eventBus.of(Ot.CHANNEL).pipe(g.filter((function(t){return t.user&&(null!==t.user.id||void 0!==t.user.id)}))).subscribe((function(e){return t.currentUser=e.user}))},t.prototype.get=function(t){return this.currentUser&&this.currentUser[t]},t.prototype.set=function(t,e){this.currentUser[t]=e},t.prototype.user=function(t){return void 0===t&&(t=null),vt(this,void 0,void 0,(function(){var t=this;return yt(this,(function(e){switch(e.label){case 0:return[4,this.database.activeUser().then((function(e){e.docs&&e.docs.length>0&&t.eventBus.publish(new Ot(e.docs[0]))}),(function(e){(e.error&&"404"===e.status||404===e.status)&&t.eventBus.publish(new Ot(null))}))];case 1:return e.sent(),[2]}}))}))},t}();te.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new te(e.ɵɵinject(c.FlipperEventBusService),e.ɵɵinject($t))},token:te,providedIn:"root"}),te.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],te.ctorParameters=function(){return[{type:c.FlipperEventBusService},{type:$t}]};var ee=function(){function t(t,e,n){var r=this;this.eventBus=t,this.database=e,this.currentUser=n,this.currentBusiness=null,this.database.connect(Zt.bucket),this.eventBus.of(wt.CHANNEL).pipe(g.filter((function(t){return t.business&&(null!==t.business.id||void 0!==t.business.id)}))).subscribe((function(t){return r.currentBusiness=t.business})),this.business()}return t.prototype.get=function(t){return this.currentBusiness&&this.currentBusiness[t]},t.prototype.set=function(t,e){this.currentBusiness[t]=e},t.prototype.business=function(t){return void 0===t&&(t="businesses"),vt(this,void 0,void 0,(function(){var e=this;return yt(this,(function(n){switch(n.label){case 0:return"undefined"==this.currentUser.get("id")&&null==this.currentUser.get("id")&&null==this.currentUser.get("id")?[3,2]:[4,this.database.activeBusiness(this.currentUser.get("id"),t).then((function(t){t.docs&&t.docs.length>0&&e.eventBus.publish(new wt(t.docs[0]))}),(function(t){(t.error&&"404"===t.status||404===t.status)&&e.eventBus.publish(new wt(null))}))];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t}();ee.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new ee(e.ɵɵinject(c.FlipperEventBusService),e.ɵɵinject($t),e.ɵɵinject(te))},token:ee,providedIn:"root"}),ee.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],ee.ctorParameters=function(){return[{type:c.FlipperEventBusService},{type:$t},{type:te}]};var ne=function(){function t(t,e,n){var r=this;this.eventBus=t,this.database=e,this.currentBusiness=n,this.currentBranch=null,this.database.connect(Zt.bucket),this.eventBus.of(xt.CHANNEL).pipe(g.filter((function(t){return t.branch&&(null!==t.branch.id||void 0!==t.branch.id)}))).subscribe((function(t){return r.currentBranch=t.branch})),this.branch()}return t.prototype.get=function(t){return this.currentBranch&&this.currentBranch[t]},t.prototype.set=function(t,e){this.currentBranch[t]=e},t.prototype.branch=function(t){return void 0===t&&(t="branches"),vt(this,void 0,void 0,(function(){var e=this;return yt(this,(function(n){switch(n.label){case 0:return"undefined"==this.currentBusiness.get("id")&&null==this.currentBusiness.get("id")&&null==this.currentBusiness.get("id")?[3,2]:[4,this.database.activeBranch(this.currentBusiness.get("id"),t).then((function(t){t.docs&&t.docs.length>0&&e.eventBus.publish(new xt(t.docs[0]))}),(function(t){(t.error&&"404"===t.status||404===t.status)&&e.eventBus.publish(new xt(null))}))];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t}();ne.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new ne(e.ɵɵinject(c.FlipperEventBusService),e.ɵɵinject($t),e.ɵɵinject(ee))},token:ne,providedIn:"root"}),ne.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],ne.ctorParameters=function(){return[{type:c.FlipperEventBusService},{type:$t},{type:ee}]};var re=function(){},ie=function(){function t(){}return t.prototype.save=function(t){t.expirationMins=t.expirationMins||0;var e=0!==t.expirationMins?60*t.expirationMins*1e3:0,n={value:"string"==typeof t.data?t.data:JSON.stringify(t.data),expiration:0!==e?(new Date).getTime()+e:null,hasExpiration:0!==e};localStorage.setItem(t.key,JSON.stringify(n))},t.prototype.load=function(t){var e=localStorage.getItem(t);if(null!==e){var n=JSON.parse(e),r=(new Date).getTime();return!n||n.hasExpiration&&n.expiration<=r?null:JSON.parse(n.value)}return null},t.prototype.remove=function(t){localStorage.removeItem(t)},t.prototype.cleanLocalStorage=function(){localStorage.clear()},t}();ie.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new ie},token:ie,providedIn:"root"}),ie.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],ie.ctorParameters=function(){return[]},t.APP_CONFIG=Xt,t.ActiveBranch=ne,t.ActiveBusiness=ee,t.ActiveUser=te,t.AnyEvent=_t,t.ArrayRemoveItemPipe=O,t.Branch=J,t.BranchProducts=ct,t.BranchProductsEvent=Lt,t.BranchesEvent=jt,t.Business=_,t.BusinessCategory=it,t.BusinessesEvent=Ut,t.CHANNELS=pt,t.CacheService=ie,t.CalculateTotalClassPipe=B,t.CurrentBranchEvent=xt,t.CurrentBusinessEvent=wt,t.CurrentStockEvent=qt,t.DEFAULT_FLIPPER_DB_CONFIG=Qt,t.DashBoardEntries=F,t.DefaultTaxesEvent=Mt,t.DraftProductEvent=Pt,t.DraftStockHistoryEvent=Dt,t.DraftStocksEvent=Gt,t.DraftVariantsEvent=Ht,t.ErrorMessageEvent=At,t.FindKeyPipe=C,t.FlipperComponentsModule=k,t.GenerateBarcodeComponent=H,t.HeaderComponent=E,t.Items=$,t.Labels=dt,t.LazyIfDirective=S,t.LoadingIconComponent=M,t.LocalStorageSaveOptions=re,t.MatchHeightDirective=x,t.Menu=K,t.MenuEntries=Y,t.MergeArryByIdPipe=w,t.MessageComponent=A,t.NotificationListComponent=G,t.NotificationService=D,t.Order=et,t.OrderDetails=Z,t.OrderEvent=mt,t.PouchConfig=Zt,t.PouchDBService=$t,t.Price=X,t.PriceEvent=bt,t.PriceVariant=W,t.PriceVariantEvent=Nt,t.Product=Q,t.ProductEvent=St,t.ProductsEvent=Rt,t.Reason=st,t.RoundNumberPipe=R,t.RouterProgressComponent=I,t.SettingsService=Ft,t.ShoppingEvent=It,t.SpinnerComponent=L,t.Stock=ut,t.StockHistory=tt,t.StocksEvent=Bt,t.Subscription=lt,t.TableOverlayComponent=T,t.Tables=Wt,t.Taxes=at,t.TaxesEvent=kt,t.Total=z,t.Types=rt,t.User=V,t.UserBusiness=ot,t.UserLoggedEvent=Ot,t.UserSubscriptionEvent=Ct,t.Variant=nt,t.VariantEvent=Et,t.VariantsEvent=Tt,t.fadeInAnimation=Kt,t.fadeInScaleUpAnimation=Yt,t.fadeOutAnimation=Vt,t.ɵa=X,t.ɵb=W,t.ɵc=Q,t.ɵd=Z,t.ɵe=J,t.ɵf=_,t.ɵg=V,t.ɵh=lt,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=enexus-flipper-components.umd.min.js.map