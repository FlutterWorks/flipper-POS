!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@enexus/flipper-components"),require("rxjs"),require("@enexus/flipper-dialog"),require("@angular/forms"),require("@angular/material/dialog"),require("@enexus/flipper-vendors"),require("@angular/material/autocomplete"),require("@angular/common"),require("@angular/animations"),require("@angular/common/http"),require("@enexus/flipper-inventory"),require("@angular/platform-browser/animations"),require("@angular/platform-browser")):"function"==typeof define&&define.amd?define("@enexus/flipper-pos",["exports","@angular/core","@enexus/flipper-components","rxjs","@enexus/flipper-dialog","@angular/forms","@angular/material/dialog","@enexus/flipper-vendors","@angular/material/autocomplete","@angular/common","@angular/animations","@angular/common/http","@enexus/flipper-inventory","@angular/platform-browser/animations","@angular/platform-browser"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).enexus=t.enexus||{},t.enexus["flipper-pos"]={}),t.ng.core,t.flipperComponents,t.rxjs,t["@enexus/flipper-dialog"],t.ng.forms,t.ng.material.dialog,t["@enexus/flipper-vendors"],t.ng.material.autocomplete,t.ng.common,t.ng.animations,t.ng.common.http,t.flipperInventory,t.ng.platformBrowser.animations,t.ng.platformBrowser)}(this,(function(t,e,r,n,i,o,a,s,l,c,d,p,u,h,m){"use strict";var f=function(){};f.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new f},token:f,providedIn:"root"}),f.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],f.ctorParameters=function(){return[]};var g=function(){function t(t,e,r,n){this.dialogRef=t,this.price=e,this.formBuilder=r,this.notificationSvc=n,this.submitted=!1,this.isFocused=""}return Object.defineProperty(t.prototype,"formControl",{get:function(){return this.form.controls},enumerable:!1,configurable:!0}),t.prototype.onKeydownHandler=function(t){"Esc"===t.key&&this.dialogRef.close("close")},t.prototype.ngOnInit=function(){this.form=this.formBuilder.group({price:[this.price?0:this.price,o.Validators.required]})},t.prototype.onSubmit=function(){this.submitted=!0,this.form.invalid?this.notificationSvc.error("Add price","We need you to complete all of the required fields before we can continue"):this.dialogRef.close({price:this.form.value.price})},t.prototype.focusing=function(t){this.isFocused=t,this.form.controls.price.setValue("")},t.prototype.focusingOut=function(){this.isFocused=""},t}();g.decorators=[{type:e.Component,args:[{selector:"flipper-update-price-dialog",template:'<h1 mat-dialog-title>Add Price</h1>\r\n<form [formGroup]="form" (ngSubmit)="onSubmit()">\r\n\r\n\r\n<div>\r\n   \r\n  <mat-error *ngIf="submitted && formControl.price.errors">\r\n    <div *ngIf="formControl.price.errors.required">Price is required</div>\r\n</mat-error>\r\n        <table style="width: 100%;">\r\n    \r\n            <tr class="tr" [class.trIsFocused]="isFocused==\'price\'" style="border-top: 1px #d5d9dc solid; border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">\r\n                \r\n                <td class="td"  [class.tdIsFocused]="isFocused==\'price\'">\r\n                    Add Price\r\n                  </td>\r\n                  <td style="width:60%">\r\n                    <input type="number" class="input" formControlName="price"\r\n                    (focus)="focusing(\'price\')" (focusout)="focusingOut()" autofocus placeholder="Add Price" />\r\n                   \r\n                  </td>\r\n             </tr>\r\n        </table>    \r\n  \r\n\r\n</div>\r\n<div class="mt-3 mb-3" style="float: right;">\r\n    <button mat-button (click)="dialogRef.close(\'close\')" class="ml-3" cdkFocusInitial>Cancel</button>\r\n    <button  type="submit" class="button-default button--secondary ml-1" cdkFocusInitial>Done</button>\r\n</div>\r\n</form>\r\n',styles:[".toolbar{background-color:#211a36;color:#fff!important}input{background-color:initial!important;width:100%!important}input,mat-select{border:none!important;font-size:14px!important;line-height:1.715!important;padding:12px 16px!important}mat-select{background-color:#fff!important;width:100%!important;width:100%}.mat-select-placeholder,.mat-select-value,mat-select{color:#2996cc!important}textarea{background:0 0;border:0;height:120.03px;padding:12px 16px;resize:none;width:100%}.tr{border-bottom:1px solid #d5d9dc;color:#343b42;display:flex;font-size:14px;line-height:1.715;width:100%}.td{width:40%;width:200px}.td,.td-sm{background-color:#ebedef;cursor:default;display:flex;font-weight:500;justify-content:space-between;padding:12px 16px}.td-sm{width:25%;width:200px}.trIsFocused{border-bottom:1px solid #2996cc}.tdIsFocused{background-color:#d4eaf5}.invalid{border-bottom:1px solid #ad061c}.form-link-with-spacing{display:block;padding:12px 16px;width:100%}.hyperlink{color:#2996cc!important;cursor:pointer;font-size:14px;font-weight:500;line-height:1.715;text-decoration:none}.price{width:100%}.price .currency{display:inline-block;margin-bottom:6px;margin-left:5px;width:25%}.price .pinput{display:inline-block;width:50%}.table--flex .table-row,.table--flex tr{display:flex;line-height:1.715}.table-row,tr{border-bottom:1px solid #d5d9dc}.table--flex .table-cell,.table--flex .table-cell-header,.table--flex td,.table--flex th{align-items:center;display:flex;flex:1 1 100%}.table-cell-header:first-child,.table-cell:first-child,td:first-child,th:first-child{padding-left:16px}.editable-variation-table__header__cell{overflow:visible}.table-cell-header,th{border-top:1px solid #d5d9dc;color:#343b42;font-weight:500}.table-cell,.table-cell-header,td,th{height:48px;overflow:hidden;padding-left:8px;padding-right:8px;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.table-header,thead{background-color:#ebedef;text-align:left}.table--editable{border-left:1px solid #d5d9dc;border-right:1px solid #d5d9dc}.editable-variation-list__more-options-cell{align-items:center;display:flex;height:100%;justify-content:center;position:absolute;right:-40px;top:0;width:40px}.editable-variation-list__more-options-cell .dropdown{position:relative}.dropdown__trigger{cursor:pointer;outline:0}.more-actions-menu__trigger{align-items:center;display:flex;height:100%;justify-content:center;width:100%}svg:not(:root){overflow:hidden}.caret-down:after,.caret-left:after,.caret-right:after,.caret-up:after,.svg-icon{display:inline-block}"]}]}],g.ctorParameters=function(){return[{type:a.MatDialogRef},{type:void 0,decorators:[{type:e.Inject,args:[a.MAT_DIALOG_DATA]}]},{type:o.FormBuilder},{type:r.NotificationService}]},g.propDecorators={onKeydownHandler:[{type:e.HostListener,args:["document:keydown",["$event"]]}]};var b=function(){function t(t,e,r,n,i){this.dialogRef=t,this.formBuilder=e,this.notificationSvc=r,this.setting=n,this.taxes$=i,this.units=[],this.submitted=!1,this.isFocused="",this.units=this.setting.units()}return Object.defineProperty(t.prototype,"formControl",{get:function(){return this.form.controls},enumerable:!1,configurable:!0}),t.prototype.onKeydownHandler=function(t){"Esc"===t.key&&this.dialogRef.close("close")},t.prototype.ngOnInit=function(){this.form=this.formBuilder.group({price:["",o.Validators.required,o.Validators.min(0)],name:"Custom Amount",quantity:[1,o.Validators.min(0)],tax:null,unit:""})},t.prototype.onSubmit=function(){this.submitted=!0,this.form.invalid?this.notificationSvc.error("Add Cart item","We need you to complete all of the required fields before we can continue"):this.dialogRef.close({price:this.form.value.price,quantity:this.form.value.quantity&&this.form.value.quantity>0?this.form.value.quantity:1,variantName:this.form.value.name?this.form.value.name:"No prduct name",productName:this.form.value.name?this.form.value.name:"--",taxName:this.form.value.tax?this.form.value.tax.name:0,taxRate:this.form.value.tax?this.form.value.tax.percentage:0,unit:this.form.value.unit,canTrackingStock:!1,currentStock:0,sku:"00"})},t.prototype.focusing=function(t){this.isFocused=t},t.prototype.focusingOut=function(){this.isFocused=""},t}();b.decorators=[{type:e.Component,args:[{selector:"flipper-add-cart-item-dialog",template:'<h1 mat-dialog-title>Add Cart Item</h1>\r\n<form [formGroup]="form" (ngSubmit)="onSubmit()">\r\n      <div>\r\n            <mat-error *ngIf="submitted && formControl.price.errors">\r\n                <div *ngIf="formControl.price.errors.required">Price is required.</div>\r\n                <div *ngIf="formControl.price.errors.min">Price entered is negative number. </div>\r\n            </mat-error>\r\n\r\n            <mat-error *ngIf="submitted && formControl.quantity.errors">\r\n                <div *ngIf="formControl.quantity.errors.required">Quantity is required  </div>\r\n                <div *ngIf="formControl.quantity.errors.min">Quantity entered is negative number. </div>\r\n            </mat-error>\r\n        \r\n              <table style="width: 100%;">\r\n          \r\n                  <tr class="tr" [class.trIsFocused]="isFocused==\'price\'" style="border-top: 1px #d5d9dc solid; border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">\r\n                      \r\n                      <td class="td"  [class.tdIsFocused]="isFocused==\'price\'">\r\n                          Price\r\n                        </td>\r\n                        <td style="width:60%">\r\n                          <input type="number" class="input" formControlName="price"\r\n                          (focus)="focusing(\'price\')" (focusout)="focusingOut()" autofocus placeholder="0.00" />\r\n                          \r\n                        </td>\r\n                  </tr>\r\n                  <tr class="tr" [class.trIsFocused]="isFocused==\'quantity\' || isFocused==\'unit\'" style=" border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">\r\n                      \r\n                      <td class="td"  [class.tdIsFocused]="isFocused==\'quantity\' || isFocused==\'unit\'">\r\n                          Quantity/unit\r\n                        </td>\r\n                        <td style="width:60%">\r\n                        <table style="width:100%">\r\n                          <tr>\r\n                            <td style="width:50%">\r\n                              <input type="number" class="input" formControlName="quantity"\r\n                              (focus)="focusing(\'quantity\')" (focusout)="focusingOut()" autofocus placeholder="0" />\r\n                            </td>\r\n                          <td style="width:50%">\r\n                            <mat-select class="select" formControlName="unit" placeholder="Choose Unit"\r\n                            (focus)="focusing(\'unit\')"  (focusout)="focusingOut()">\r\n                                    <mat-option *ngFor="let unit of units" [value]="unit.value">\r\n                                    {{unit.name}}\r\n                                    </mat-option>\r\n                          </mat-select>\r\n                          </td>\r\n                          </tr>\r\n                        </table>\r\n          \r\n                        </td>\r\n                  </tr>\r\n                  <tr class="tr" [class.trIsFocused]="isFocused==\'name\'" style="border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;">\r\n                      \r\n                      <td class="td"  [class.tdIsFocused]="isFocused==\'name\'">\r\n                        Description\r\n                        </td>\r\n                        <td style="width:60%">\r\n                          <input type="text" class="input" formControlName="name"\r\n                          (focus)="focusing(\'name\')" (focusout)="focusingOut()" autofocus placeholder="Description(product or service name)" />\r\n                        </td>\r\n                  </tr>\r\n\r\n                  <tr style=" border-right: 1px #d5d9dc solid; border-left: 1px #d5d9dc solid;" class="tr" [class.trIsFocused]="isFocused==\'taxes\'">\r\n                    <td class="td" [class.tdIsFocused]="isFocused==\'taxes\'">\r\n                      <label>Tax</label>\r\n                    </td>\r\n                    <td style="width: 60%;">\r\n\r\n                      <mat-select class="select" formControlName="tax" placeholder="Choose Tax"\r\n                        (focus)="focusing(\'taxes\')"\r\n                        (focusout)="focusingOut()">\r\n                        <mat-option *ngFor="let tax of taxes$" [value]="tax">\r\n                          {{tax.name}} ({{tax.percentage}}%)\r\n                        </mat-option>\r\n                      </mat-select>\r\n\r\n                    </td>\r\n                  </tr>\r\n\r\n              </table>    \r\n        \r\n      </div>\r\n      <div class="mt-3 mb-3" style="float: right;">\r\n          <button mat-button (click)="dialogRef.close(\'close\')" class="ml-3" cdkFocusInitial>Cancel</button>\r\n          <button  type="submit" class="button-default button--success ml-1" cdkFocusInitial>Add</button>\r\n      </div>\r\n</form>\r\n',styles:[".toolbar{background-color:#211a36;color:#fff!important}input{background-color:initial!important;width:100%!important}input,mat-select{border:none!important;font-size:14px!important;line-height:1.715!important;padding:12px 16px!important}mat-select{background-color:#fff!important;width:100%!important;width:100%}.mat-select-placeholder,.mat-select-value,mat-select{color:#2996cc!important}textarea{background:0 0;border:0;height:120.03px;padding:12px 16px;resize:none;width:100%}.tr{border-bottom:1px solid #d5d9dc;color:#343b42;display:flex;font-size:14px;line-height:1.715;width:100%}.td{width:40%;width:200px}.td,.td-sm{background-color:#ebedef;cursor:default;display:flex;font-weight:500;justify-content:space-between;padding:12px 16px}.td-sm{width:25%;width:200px}.trIsFocused{border-bottom:1px solid #2996cc}.tdIsFocused{background-color:#d4eaf5}.invalid{border-bottom:1px solid #ad061c}.form-link-with-spacing{display:block;padding:12px 16px;width:100%}.hyperlink{color:#2996cc!important;cursor:pointer;font-size:14px;font-weight:500;line-height:1.715;text-decoration:none}.price{width:100%}.price .currency{display:inline-block;margin-bottom:6px;margin-left:5px;width:25%}.price .pinput{display:inline-block;width:50%}.table--flex .table-row,.table--flex tr{display:flex;line-height:1.715}.table-row,tr{border-bottom:1px solid #d5d9dc}.table--flex .table-cell,.table--flex .table-cell-header,.table--flex td,.table--flex th{align-items:center;display:flex;flex:1 1 100%}.table-cell-header:first-child,.table-cell:first-child,td:first-child,th:first-child{padding-left:16px}.editable-variation-table__header__cell{overflow:visible}.table-cell-header,th{border-top:1px solid #d5d9dc;color:#343b42;font-weight:500}.table-cell,.table-cell-header,td,th{height:48px;overflow:hidden;padding-left:8px;padding-right:8px;text-overflow:ellipsis;vertical-align:middle;white-space:nowrap}.table-header,thead{background-color:#ebedef;text-align:left}.table--editable{border-left:1px solid #d5d9dc;border-right:1px solid #d5d9dc}.editable-variation-list__more-options-cell{align-items:center;display:flex;height:100%;justify-content:center;position:absolute;right:-40px;top:0;width:40px}.editable-variation-list__more-options-cell .dropdown{position:relative}.dropdown__trigger{cursor:pointer;outline:0}.more-actions-menu__trigger{align-items:center;display:flex;height:100%;justify-content:center;width:100%}svg:not(:root){overflow:hidden}.caret-down:after,.caret-left:after,.caret-right:after,.caret-up:after,.svg-icon{display:inline-block}"]}]}],b.ctorParameters=function(){return[{type:a.MatDialogRef},{type:o.FormBuilder},{type:r.NotificationService},{type:r.SettingsService},{type:Array,decorators:[{type:e.Inject,args:[a.MAT_DIALOG_DATA]}]}]},b.propDecorators={onKeydownHandler:[{type:e.HostListener,args:["document:keydown",["$event"]]}]};var y=function(){function t(t,r){this.dialog=t,this.totalPipe=r,this.updateQtyEmit=new e.EventEmitter,this.searchEmitValue=new e.EventEmitter,this.addToCartEmit=new e.EventEmitter,this.saveOrderUpdatedEmit=new e.EventEmitter,this.updateOrderDetailsEmit=new e.EventEmitter,this.didCollectCashEmit=new e.EventEmitter,this.action="",this.orderItems$=new n.BehaviorSubject([]),this.canfoundVariant=[],this.isCurrentOrder=null,this.userClosedModel=!1,this.setTaxes=[],this.currency="RWF",this.setCartFocused=null,this.didCollectCashCompleted={isCompleted:!1,collectedOrder:null}}return Object.defineProperty(t.prototype,"foundVariant",{get:function(){return this.canfoundVariant},set:function(t){this.canfoundVariant=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"taxes",{get:function(){return this.setTaxes},set:function(t){this.setTaxes=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentOrder",{get:function(){return this.isCurrentOrder},set:function(t){this.isCurrentOrder=t,this.cartFocused=t&&t.orderItems.length>0?t.orderItems[0]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cartFocused",{get:function(){return this.setCartFocused},set:function(t){this.setCartFocused=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userDidCloseModel",{get:function(){return this.userClosedModel},set:function(t){this.userClosedModel=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collectCashCompleted",{get:function(){return this.didCollectCashCompleted},set:function(t){this.didCollectCashCompleted=t},enumerable:!1,configurable:!0}),t.prototype.onKeydownHandler=function(t){this.cartFocused&&("Delete"===t.key&&this.removeItem(this.cartFocused),t.shiftKey&&"+"===t.key&&this.updateQuantity(this.cartFocused,"+"),t.shiftKey&&"-"===t.key&&this.updateQuantity(this.cartFocused,"-")),t.shiftKey&&"K"===t.key&&this.keyBoardShortCuts(),t.ctrlKey&&"N"===t.key&&this.addCartItem()},t.prototype.keyBoardShortCuts=function(){this.dialog.keyBoardShortCuts()},t.prototype.searchPosProduct=function(t){t&&this.searchEmitValue.emit(t)},t.prototype.addToCart=function(t,e){var r=this;if(void 0===e&&(e=!1),e)return this.dialog.open(g,i.DialogSize.SIZE_SM,t.price).subscribe((function(t){"close"!==t&&t.price&&t.price>0&&r.addToCartEmit.emit(t)}));this.addToCartEmit.emit(t)},t.prototype.updatePrice=function(t){var e=this;return this.dialog.open(g,i.DialogSize.SIZE_SM,t.price).subscribe((function(r){"close"!==r&&r.price&&r.price>0&&(t.price=r.price,t.subTotal=t.quantity*t.price,e.updateQty(t))}))},t.prototype.addCartItem=function(){var t=this;return this.dialog.open(b,i.DialogSize.SIZE_MD,this.taxes).subscribe((function(e){("close"!==e||e.price>0||e.quantity>0)&&t.addToCart(e)}))},t.prototype.updateQty=function(t){this.updateOrderDetailsEmit.emit({action:"UPDATE",item:t})},t.prototype.removeItem=function(t){this.updateOrderDetailsEmit.emit({action:"DELETE",item:t})},t.prototype.saveOrderUpdated=function(t){var e=t||this.currentOrder;this.saveOrderUpdatedEmit.emit(e)},t.prototype.updateQuantity=function(t,e){void 0===e&&(e=null);var r=t.quantity;this.action=e,this.canSetCartFocused(t),"-"===this.action?(t.quantity=t.quantity-1,t.quantity<=0&&(this.dialog.message("Failure Message","Negative quantity is not allowed.","Failure","SIZE_SM").subscribe((function(){t.quantity=r})),t.quantity=r),t.subTotal=t.price*t.quantity,this.updateQty(t)):"+"===this.action&&(t.quantity=t.quantity+1,t.subTotal=t.price*t.quantity,this.updateQty(t))},t.prototype.canSetCartFocused=function(t){this.cartFocused=t},t.prototype.collectCash=function(t){this.didCollectCashEmit.emit(t)},t.prototype.closeModel=function(t){this.userDidCloseModel=t},t}();y.decorators=[{type:e.Component,args:[{selector:"flipper-basic-pos",template:'<div class="row">\r\n\r\n  <div class="column-lg">\r\n    <div class="search-card">\r\n      <table>\r\n        <tr>\r\n          <td style="width:90%">\r\n            <flipper-search-box [foundVariant]="foundVariant" [currency]="currency" (addToCartEmit)="addToCart($event)"\r\n              (searchEmitValue)="searchPosProduct($event)" [didUserCloseModel]="userDidCloseModel">\r\n            </flipper-search-box>\r\n          </td>\r\n          <td style="width:10%">\r\n            <button (click)="addCartItem()" class="button-default button--secondary ml-3">\r\n              <img [src]="\'./assets/icons/plus.svg\'" alt="search" class="icon-img" style="position: relative;top: 5.5px;">\r\n            </button>\r\n          </td>\r\n\r\n        </tr>\r\n      </table>\r\n      <button (click)="keyBoardShortCuts()" class="kbd-hotkeys-button"><svg class="svg-icon svg-icon-keyboard"\r\n          viewBox="0 0 32 32">\r\n          <path\r\n            d="M24.133 8C25.72 8 27 9.344 27 11v10c0 1.652-1.29 3-2.867 3H6.867C5.28 24 4 22.656 4 21V11c0-1.65 1.29-3 2.867-3h17.266zm-.075 2H6.942c-.51 0-.942.448-.942 1v10c0 .555.422 1 .942 1h17.116c.51 0 .942-.448.942-1V11c0-.555-.422-1-.942-1zM8.801 18c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2H7.2c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm15 0c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm-2.992 0c.106 0 .191.086.191.2v1.6c0 .11-.095.2-.19.2H10.19a.193.193 0 0 1-.19-.2v-1.6c0-.11.095-.2.19-.2h10.62zM9.801 15c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2H8.2c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm3 0c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm3 0c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm3 0c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm3 0c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm2-3c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm-3 0c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm-3 0c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm-3 0c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm-6 0c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2H7.2c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6zm3 0c.11 0 .199.086.199.2v1.6c0 .11-.086.2-.2.2h-1.6c-.11 0-.2-.086-.2-.2v-1.6c0-.11.086-.2.2-.2h1.6z">\r\n          </path>\r\n        </svg>\r\n      </button>\r\n    </div>\r\n\r\n\r\n\r\n    <div class="shoppinglist" *ngIf="currentOrder && currentOrder.orderItems && currentOrder.orderItems.length > 0">\r\n\r\n\r\n      <div class="item-lists">\r\n\r\n        <mat-list *ngIf="currentOrder.orderItems.length > 0">\r\n          <div mat-subheader>Items({{currentOrder.orderItems.length}})</div>\r\n\r\n          \x3c!-- {{currentOrder.orderItems|json}} --\x3e\r\n          <flipper-autocomplete *ngFor="let item of  currentOrder.orderItems; let i = index;">\r\n            <mat-divider></mat-divider>\r\n            <mat-list-item (click)="canSetCartFocused(item)" [class.setCartFocused]="cartFocused==item">\r\n              \x3c!-- <img [src]="\'./assets/icons/archive-3.svg\'" style="width:48px"> --\x3e\r\n              <div mat-line>\r\n                <span>\r\n                  {{item.variantName==\'Regular\'?item.productName:item.variantName}} |  SKU:{{item.sku}}\r\n                </span>\r\n\r\n              </div>\r\n              <div mat-line>\r\n                <span *ngIf="item.canTrackingStock">In stock({{item.currentStock}}) of </span>\r\n                &nbsp;\r\n                |&nbsp;\r\n                <a class="link" (click)="updatePrice(item)">\r\n                  {{currency}} {{item.price}}</a><span *ngIf="item.unit">{{item.unit?\'/\'+item.unit:\'\'}}</span>\r\n                  &nbsp;\r\n                |&nbsp;\r\n                <span class="details" *ngIf="item.productName; else noProduct">{{item.productName}}</span>\r\n                <ng-template #noProduct>\r\n                  <span class="details">\r\n                    {{item.productName}}\r\n                  </span>\r\n                  </ng-template>\r\n\r\n                  &nbsp;\r\n                |&nbsp;\r\n                Quantity({{item.quantity}}<span *ngIf="item.unit">{{item.unit?\'/\'+item.unit:\'\'}}</span>)\r\n\r\n              </div>\r\n              <div style="float: right;position: relative;right: 0;margin-top:-5px">\r\n                <table>\r\n                  <tr>\r\n                    <td>\r\n                      <button type="button" class="update-qty">\r\n                        <table>\r\n                          <tr>\r\n                            <td>\r\n                              <img [src]="\'./assets/icons/minus.svg\'" alt="minus" (click)="updateQuantity(item,\'-\')">\r\n                            </td>\r\n                            <td>{{item.quantity}}</td>\r\n                            <td>\r\n                              <img [src]="\'./assets/icons/plus.svg\'" alt="plus" (click)="updateQuantity(item,\'+\')">\r\n                            </td>\r\n                          </tr>\r\n                        </table>\r\n                      </button>\r\n                    </td>\r\n                    <td>\r\n                      <button class="remove-item" type="button">\r\n                        <img [src]="\'./assets/icons/x.svg\'" alt="delete" class="delete-icon" (click)="removeItem(item)">\r\n                      </button>\r\n                    </td>\r\n\r\n                  </tr>\r\n                </table>\r\n              </div>\r\n            </mat-list-item>\r\n\r\n\r\n          </flipper-autocomplete>\r\n          <mat-divider *ngIf="currentOrder.orderItems.length > 0"></mat-divider>\r\n        </mat-list>\r\n\r\n        \x3c!-- <flipper-autocomplete *ngFor="let item of  currentOrder.orderItems; let i = index;">\r\n          <mat-option (click)="canSetCartFocused(item)" [class.setCartFocused]="cartFocused==item">\r\n\r\n\r\n\r\n            <div class="icon-2">\r\n              <img [src]="\'./assets/icons/archive-3.svg\'" class="icon-img">\r\n            </div>\r\n            <div class="item">\r\n              <span class="item-title">\r\n                <span\r\n                  *ngIf="item.variant; else noVariant">{{item.variant.name==\'Regular\'?item.product.name:item.variant.name}}\r\n                </span>\r\n                <ng-template #noVariant>\r\n                  <span>\r\n                    {{item.variantName}}\r\n                  </span>\r\n                </ng-template>\r\n              </span>\r\n              <div class="item-sub-title">\r\n                <span class="details">\r\n                  <span *ngIf="item.stock && item.stock.canTrackingStock">In stock({{item.stock.currentStock}}) of\r\n                  </span>\r\n\r\n                  <span>\r\n                    <a class="link" (click)="updatePrice(item)">\r\n                      {{currency}} {{item.price}}</a><span *ngIf="item.unit">{{item.unit?\'/\'+item.unit:\'\'}}</span>\r\n                  </span>\r\n                </span>\r\n                <span class="details" *ngIf="item.product; else noProduct">{{item.product.name}}</span>\r\n                <ng-template #noProduct>\r\n                  <span class="details">\r\n                    {{item.productName}}\r\n                  </span>\r\n                </ng-template>\r\n                <span class="details">\r\n                  <div class="oval"></div> &nbsp;&nbsp; Quantity({{item.quantity}}<span\r\n                    *ngIf="item.unit">{{item.unit?\'/\'+item.unit:\'\'}}</span>)\r\n                </span>\r\n              </div>\r\n\r\n\r\n            </div>\r\n            <div class="remove-item">\r\n\r\n              <img [src]="\'./assets/icons/x.svg\'" class="delete-icon" (click)="removeItem(item)">\r\n\r\n            </div>\r\n            <button type="button" class="update-qty">\r\n              <table>\r\n                <tr>\r\n                  <td>\r\n                    <img [src]="\'./assets/icons/minus.svg\'" (click)="updateQuantity(item,\'-\')">\r\n                  </td>\r\n                  <td>{{item.quantity}}</td>\r\n                  <td>\r\n                    <img [src]="\'./assets/icons/plus.svg\'" (click)="updateQuantity(item,\'+\')">\r\n                  </td>\r\n                </tr>\r\n              </table>\r\n            </button>\r\n\r\n          </mat-option>\r\n\r\n        </flipper-autocomplete> --\x3e\r\n      </div>\r\n    </div>\r\n\r\n    <flipper-message (click)="addCartItem()" *ngIf="currentOrder && currentOrder.orderItems.length===0"\r\n      title="Search Product!"\r\n      message="No Cart Item(s), Please search an item from inventory or click to + button to start shopping!">\r\n    </flipper-message>\r\n\r\n    <flipper-message *ngIf="!currentOrder" title="No Order!" message="No current order created!">\r\n    </flipper-message>\r\n  </div>\r\n  <div class="column-sm">\r\n    <span *ngIf="currentOrder" style="position: relative;left: 15px;top: 5px;"><b>Order Number #\r\n        {{currentOrder.orderNumber}}</b></span><br />\r\n    <flipper-calculator [currentOrder]="currentOrder" [currency]="currency"\r\n      [collectCashCompleted]="collectCashCompleted" (collectCashEmit)="collectCash($event)"\r\n      (saveOrderUpdatedEmit)=saveOrderUpdated($event) (closeModelEmit)="closeModel($event)">\r\n    </flipper-calculator>\r\n\r\n  </div>\r\n</div>\r\n',encapsulation:e.ViewEncapsulation.None,changeDetection:e.ChangeDetectionStrategy.OnPush,providers:[r.CalculateTotalClassPipe,r.MergeArryByIdPipe,r.ArrayRemoveItemPipe],styles:['.mat-divider{border-top-color:#3f5ec6!important;border-top-style:dotted;border-top-width:2px;color:#3f5ec6!important;display:block;margin:0}.remove-item{border:1px solid #3f5ec6;border-radius:2px;float:right;height:50px;margin-left:8px;position:relative;right:0;width:50.3px}.remove-item .delete-icon{color:#1b2125;font-family:Roboto;font-size:22px;font-stretch:normal;font-style:normal;font-weight:500;height:40px;letter-spacing:normal;line-height:normal;position:relative;text-align:center;width:16px}.update-qty{border:1px solid #3f5ec6;border-radius:2px;float:right;height:50px;margin-left:8px;position:relative;right:0;width:123.3px}.update-qty table{width:100%}.update-qty table tr td{color:#1b2125;font-family:Roboto;font-size:22px;font-stretch:normal;font-style:normal;font-weight:500;height:40px;letter-spacing:normal;line-height:normal;position:relative;text-align:center;width:16px}.oval{background-color:#53be6d;border-radius:50px;bottom:0;height:8px;left:0;position:absolute;right:0;top:5px;width:8px}.details{color:#202124;display:inline-block;font-family:Roboto;font-size:14px;font-stretch:normal;font-style:normal;font-weight:500;height:19px;letter-spacing:-.05px;line-height:normal;position:relative;width:auto}.row:after{clear:both;content:"";display:table}.row{display:flex;flex-wrap:wrap;list-style:none;margin:0}.row .row:after{clear:both;content:"";display:table}.row .column-sm{border-radius:.25rem;box-shadow:0 20px 40px -14px rgba(0,0,0,.25);float:right;padding:10px;width:35%}.row .column-sm flipper-calculator{display:flex;height:96vh;padding:.8rem}.row .column-lg{border-radius:.25rem;box-shadow:0 5px 4px -4px rgba(0,0,0,.25);display:flex;flex-direction:column;float:left;height:100vh;overflow:hidden;padding:10px;width:65%}.row .column-lg .search-card{display:flex}.row .column-lg .search-card flipper-search-box{display:flex;width:100%}.row .column-lg .search-card .kbd-hotkeys-button{background-color:#d6e8fa;border:1px solid #d6e8fa;border-radius:2px;bottom:0;color:#1b2733;font-stretch:normal;font-style:normal;font-weight:500;height:40px;left:0;letter-spacing:1.25px;line-height:1.14;opacity:.95;padding:4px;position:relative;text-align:center;top:9px;width:70px}.row .column-lg .search-card .kbd-hotkeys-button .svg-icon-keyboard{bottom:12px;position:relative}.row .column-lg flipper-message{display:flex;flex-direction:column;overflow:hidden;position:relative;top:50px;width:100%}.row .column-lg .shoppinglist{display:flex;height:100vh;position:relative;top:35px;width:94%}.row .column-lg .shoppinglist .item-lists{height:78vh;overflow:auto;width:100%}.row .column-lg .shoppinglist .item-lists flipper-autocomplete{position:relative;width:100%}.row .column-lg .shoppinglist .item-lists flipper-autocomplete .setCartFocused{border-left-color:#3f5ec6!important;border-left-style:dotted;border-left-width:2px;border-right-color:#3f5ec6!important;border-right-style:dotted;border-right-width:2px;box-shadow:0 1px 1px 1px #3f5ec6;color:#3f5ec6!important}.row .column-lg .shoppinglist .item-lists flipper-autocomplete .mat-option{background-color:#fff;border-top:4px solid #fcfeff;height:83px}.row .column-lg .shoppinglist .item-lists flipper-autocomplete .mat-option .item{display:inline-table;position:relative}.row .column-lg .shoppinglist .item-lists flipper-autocomplete .mat-option .item .item-sub-title{display:block;position:relative}.row .column-lg .shoppinglist .item-lists flipper-autocomplete .mat-option .item .item-sub-title .details{bottom:12px;color:#202124;display:inline-block;font-family:Roboto;font-size:14px;font-stretch:normal;font-style:normal;font-weight:500;height:19px;letter-spacing:-.05px;line-height:normal;margin-right:18px;position:relative;width:auto}.row .column-lg .shoppinglist .item-lists flipper-autocomplete .mat-option .item .item-sub-title .details .oval{background-color:#53be6d;border-radius:50px;bottom:0;height:8px;left:0;position:absolute;right:0;top:5px;width:8px}.row .column-lg .shoppinglist .item-lists flipper-autocomplete .mat-option .item .item-title{color:#2575ec;font-family:Roboto;font-size:20px;font-stretch:normal;font-style:normal;font-weight:400;height:26px;letter-spacing:-.07px;line-height:normal;position:relative;top:10px;width:240px}.row .column-lg .shoppinglist .item-lists flipper-autocomplete .mat-option .icon-2{background-color:#fff;border:1px solid #d6daff;border-radius:4px;display:inline-block;height:53px;left:11px;position:relative;top:22px;width:53px}.row .column-lg .shoppinglist .item-lists flipper-autocomplete .mat-option .icon-2 .icon-img{height:36px;left:4px;position:relative;top:7px;width:47px}.link{color:#2996cc!important;cursor:pointer;text-decoration:none}']}]}],y.ctorParameters=function(){return[{type:i.DialogService},{type:r.CalculateTotalClassPipe}]},y.propDecorators={updateQtyEmit:[{type:e.Output}],searchEmitValue:[{type:e.Output}],addToCartEmit:[{type:e.Output}],saveOrderUpdatedEmit:[{type:e.Output}],updateOrderDetailsEmit:[{type:e.Output}],didCollectCashEmit:[{type:e.Output}],currency:[{type:e.Input}],foundVariant:[{type:e.Input,args:["foundVariant"]}],taxes:[{type:e.Input,args:["taxes"]}],currentOrder:[{type:e.Input,args:["currentOrder"]}],collectCashCompleted:[{type:e.Input,args:["collectCashCompleted"]}],onKeydownHandler:[{type:e.HostListener,args:["document:keydown",["$event"]]}]};var v=function(){function t(t){this.cd=t,this.userClosedModel=!1,this.searchEmitValue=new e.EventEmitter,this.addToCartEmit=new e.EventEmitter,this.debounce=1e3,this.loading=!1,this.isSearching=!1,this.canfoundVariant=[],this.currency="RWF",this.timer=null}return Object.defineProperty(t.prototype,"foundVariant",{get:function(){return this.canfoundVariant},set:function(t){this.canfoundVariant=t,this.loading=!1,this.addToCartOnGotSingleItem(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"didUserCloseModel",{get:function(){return this.userClosedModel},set:function(t){this.userClosedModel=t,!0===t&&this.clearSearchBox()},enumerable:!1,configurable:!0}),t.prototype.onKeydownHandler=function(t){var e=this;this.event=t,(this.event.shiftKey&&"F"===this.event.key||this.event.shiftKey&&"S"===this.event.key)&&setTimeout((function(){e.clearSearchBox()}),2),"Shift"===this.event.key&&setTimeout((function(){e.searchInputElement.nativeElement.blur(),e.close()}),2)},t.prototype.close=function(){this.autoComplete.closePanel()},t.prototype.startSearching=function(t){var e=this;if(""===t.target.value||null===t.target.value)return this.foundVariant=[],void this.clearSearchBox();clearTimeout(this.timer),this.timer=setTimeout((function(){e.foundVariant=[],e.searching(t.target.value)}),1e3)},t.prototype.searching=function(t){this.loading=!0,this.isSearching=!0,this.searchEmitValue.emit(t)},t.prototype.ngOnInit=function(){},t.prototype.ngAfterViewInit=function(){var t=this;setTimeout((function(){t.searchInputElement.nativeElement.focus()})),this.cd.detectChanges()},t.prototype.addToCartOnGotSingleItem=function(t){1===t.length&&(this.addToCart(t[0]),this.clearSearchBox())},t.prototype.addToCart=function(t){t.quantity=1,this.addToCartEmit.emit(t),this.clearSearchBox()},t.prototype.focusing=function(){this.clearSearchBox()},t.prototype.clearSearchBox=function(){void 0!==this.searchInputElement&&(this.searchInputElement.nativeElement.value="",this.searchInputElement.nativeElement.focus(),this.isSearching=!1,this.close())},t}();v.decorators=[{type:e.Component,args:[{selector:"flipper-search-box",template:'<div class="icon-card"><svg viewBox="0 0 24 24" width="24" height="24" stroke="#607d8b" stroke-width="2" fill="none"\r\n    stroke-linecap="round" stroke-linejoin="round" class="search-icon">\r\n    <circle cx="11" cy="11" r="8"></circle>\r\n    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>\r\n  </svg>\r\n</div>\r\n\r\n<input type="search" \r\n(focus)="focusing()" #autoCompleteInput [matAutocomplete]="auto"\r\n(keydown)="startSearching($event)"\r\naria-label="Search" #mySearchInput placeholder="Search product code to retreive" class="search-box">\r\n\r\n<mat-autocomplete #auto="matAutocomplete" class="autocomplete">\r\n\r\n      <flipper-autocomplete [loading]="false" *ngIf="isSearching || foundVariant.length > 0">\r\n        <div *ngFor="let variant of foundVariant; let i = index;">\r\n          <mat-option (click)="addToCart(variant)">\r\n              <div class="icon-1">\r\n                <img [src]="\'./assets/icons/search.svg\'" class="icon-img">\r\n              </div>\r\n\r\n              <div class="item">\r\n                  <span class="item-title">\r\n                    {{variant.sku}} / {{variant.name}}\r\n                  </span>\r\n                  \r\n                  <div class="item-sub-title">\r\n\r\n                      <span class="details">\r\n                        {{currency}} {{variant.retailPrice}}\r\n                        {{variant.unit?\'/ \'+variant.unit:\'\'}}\r\n                      </span>\r\n\r\n                      <span class="details">\r\n                        {{variant.productName}}\r\n                      </span>\r\n\r\n                      <span class="details" *ngIf="variant && variant.canTrackingStock">\r\n                            <div class="oval"> </div> &nbsp;&nbsp; In stock({{variant.currentStock}})\r\n                      </span>\r\n\r\n                  </div>\r\n              </div>\r\n\r\n          </mat-option>\r\n        </div>\r\n      </flipper-autocomplete>\r\n\r\n      <flipper-autocomplete [loading]="false" *ngIf="foundVariant.length == 0">\r\n        <mat-option>\r\n              <div class="item">\r\n                    <span class="item-title">\r\n                      Sorry! There is no item(s) found.\r\n                    </span>\r\n              </div>\r\n        </mat-option>\r\n      </flipper-autocomplete>\r\n\r\n</mat-autocomplete>\r\n',encapsulation:e.ViewEncapsulation.None,changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[".icon-card{align-items:center;display:flex;left:25px;position:absolute;top:25px}.search-icon{color:#959da5;vertical-align:text-bottom}.search-box{-moz-appearance:none;-webkit-appearance:none;appearance:none;background-color:#fff;border:0;border-radius:6px;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);color:#515151;font-family:inherit;font-family:Roboto;font-size:inherit;font-size:22px;font-stretch:normal;font-style:normal;letter-spacing:normal;line-height:1;line-height:normal;margin:0;outline:0;padding:16px 16px 16px 52px;width:100%}.autocomplete.mat-autocomplete-panel{background-color:#fcfeff;border:1px solid #e2e9ed;position:relative}.autocomplete.mat-autocomplete-panel flipper-autocomplete{width:100%}.autocomplete.mat-autocomplete-panel flipper-autocomplete .mat-option{background-color:#fff;border-top:4px solid #fcfeff;height:83px}.autocomplete.mat-autocomplete-panel flipper-autocomplete .mat-option .add-button{background-color:#1174b6;border:1px solid #1174b6;border-radius:2px;color:#fff;float:right;font-family:Roboto;font-size:14px;font-stretch:normal;font-style:normal;font-weight:500;height:45px;letter-spacing:1.25px;line-height:1.14;position:relative;right:0;text-align:center;top:34.7px;width:99px}.autocomplete.mat-autocomplete-panel flipper-autocomplete .mat-option .item{bottom:3px;display:inline-table;left:30px;position:relative}.autocomplete.mat-autocomplete-panel flipper-autocomplete .mat-option .item .item-sub-title{display:block;position:relative}.autocomplete.mat-autocomplete-panel flipper-autocomplete .mat-option .item .item-sub-title .details{bottom:12px;color:#202124;display:inline-block;font-family:Roboto;font-size:14px;font-stretch:normal;font-style:normal;font-weight:500;height:19px;letter-spacing:-.05px;line-height:normal;margin-right:18px;position:relative;width:auto}.autocomplete.mat-autocomplete-panel flipper-autocomplete .mat-option .item .item-sub-title .details .oval{background-color:#53be6d;border-radius:50px;bottom:0;height:8px;left:0;position:absolute;right:0;top:5px;width:8px}.autocomplete.mat-autocomplete-panel flipper-autocomplete .mat-option .item .item-title{color:#2575ec;font-family:Roboto;font-size:20px;font-stretch:normal;font-style:normal;font-weight:400;height:26px;letter-spacing:-.07px;line-height:normal;width:240px}.autocomplete.mat-autocomplete-panel flipper-autocomplete .mat-option .icon-1{background-color:#fff;border:1px solid #d6daff;border-radius:4px;display:inline-block;height:53px;left:11px;position:relative;top:22px;width:53px}.autocomplete.mat-autocomplete-panel flipper-autocomplete .mat-option .icon-1 .icon-img{height:36px;left:4px;position:relative;top:7px;width:47px}"]}]}],v.ctorParameters=function(){return[{type:e.ChangeDetectorRef}]},v.propDecorators={foundVariant:[{type:e.Input,args:["foundVariant"]}],didUserCloseModel:[{type:e.Input,args:["didUserCloseModel"]}],searchEmitValue:[{type:e.Output}],addToCartEmit:[{type:e.Output}],searchInputElement:[{type:e.ViewChild,args:["mySearchInput",{static:!1}]}],autoComplete:[{type:e.ViewChild,args:["autoCompleteInput",{read:l.MatAutocompleteTrigger,static:!1}]}],currency:[{type:e.Input}],onKeydownHandler:[{type:e.HostListener,args:["document:keydown",["$event"]]}]};var x=function(){function t(){}return Object.defineProperty(t.prototype,"loading",{get:function(){return this.load},set:function(t){this.load=t},enumerable:!1,configurable:!0}),t}();x.decorators=[{type:e.Component,args:[{selector:"flipper-autocomplete",template:'<ng-container *ngIf="!loading"><ng-content></ng-content></ng-container>\r\n<div *ngIf="loading" class="loading-spinner">\r\n   <flipper-loading-icon [loading]="loading">\r\n      <span>Loading data!</span>\r\n    </flipper-loading-icon>\r\n</div>\r\n',styles:[".loading-spinner{bottom:0;left:0;padding:8px;position:relative;right:0;text-align:center;top:0}"]}]}],x.propDecorators={loading:[{type:e.Input,args:["loading"]}]};var w=function(){};w.decorators=[{type:e.Component,args:[{selector:"flipper-shopping-lists",template:"<ng-content></ng-content>",styles:[""]}]}];var O=function(){function t(){this.loading=!1,this.action="",this.getOrderItems=[],this.updateQtyEmit=new e.EventEmitter,this.removeItemEmit=new e.EventEmitter}return Object.defineProperty(t.prototype,"orderItems",{get:function(){return this.getOrderItems},set:function(t){this.getOrderItems=t},enumerable:!1,configurable:!0}),t.prototype.updateQuantity=function(t,e){void 0===e&&(e=null);var r=t.quantity;this.action=e,"-"===this.action?(t.quantity=t.quantity-1,t.quantity<0&&(alert("Negative quantity is not allowed."),t.quantity=r)):"+"===this.action&&(t.quantity=t.quantity+1),t.subTotal=t.price*t.quantity,this.updateQtyEmit.emit(t)},t.prototype.removeItem=function(t){this.removeItemEmit.emit(t)},t.prototype.ngOnChanges=function(t){console.log(t)},t}();O.decorators=[{type:e.Component,args:[{selector:"flipper-basic-shopping-list",template:'<div class="shoppinglist">\r\n\r\n  <div class="divider">\r\n    <div class="title">Selected Items</div>\r\n    <div class="line"></div>\r\n  </div>\r\n\r\n  <flipper-autocomplete *ngFor="let item of orderItems; let i = index;">\r\n    <mat-option>\r\n      <div class="icon">\r\n        <img [src]="\'./assets/icons/search.svg\'" alt="search" class="icon-img">\r\n      </div>\r\n      <div class="item">\r\n        <span class="item-title">\r\n          {{item.orderId}} / {{item.variantName}}\r\n        </span>\r\n        <div class="item-sub-title">\r\n          <span class="details">RWF {{item.price}}</span>\r\n          <span class="details">Lotion</span>\r\n          <span class="details">\r\n            <div class="oval"></div> &nbsp;&nbsp; In stock({{item.quantity}})\r\n          </span>\r\n        </div>\r\n\r\n      </div>\r\n      <div class="remove-item">\r\n\r\n        <img [src]="\'./assets/icons/x.svg\'" alt="search" class="delete-icon" (click)="removeItem(item)">\r\n\r\n      </div>\r\n      <div class="update-qty">\r\n        <table>\r\n          <tr>\r\n            <td>\r\n              <img [src]="\'./assets/icons/minus.svg\'" alt="search" (click)="updateQuantity(item,\'-\')">\r\n            </td>\r\n            <td>{{item.quantity}}</td>\r\n            <td>\r\n              <img [src]="\'./assets/icons/plus.svg\'" alt="search" (click)="updateQuantity(item,\'+\')">\r\n            </td>\r\n          </tr>\r\n        </table>\r\n      </div>\r\n\r\n    </mat-option>\r\n\r\n  </flipper-autocomplete>\r\n</div>\r\n',encapsulation:e.ViewEncapsulation.None,changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[".shoppinglist{height:90vh;position:relative;top:25px}.shoppinglist .divider .title{color:#3a3b3f;display:inline-block;font-family:Roboto;font-size:16px;font-stretch:normal;font-style:normal;font-weight:500;height:20px;letter-spacing:-.06px;line-height:1.25;width:107px}.shoppinglist .divider .line{background-color:#f9fafb;display:inline-table}.shoppinglist flipper-autocomplete{position:relative;top:25px;width:100%}.shoppinglist flipper-autocomplete .mat-option{background-color:#fff;border-top:4px solid #fcfeff;height:83px}.shoppinglist flipper-autocomplete .mat-option .remove-item{border:1px solid #3f5ec6;border-radius:2px;float:right;height:50px;margin-left:8px;position:relative;right:0;top:34.7px;width:50.3px}.shoppinglist flipper-autocomplete .mat-option .remove-item .delete-icon{color:#1b2125;font-family:Roboto;font-size:22px;font-stretch:normal;font-style:normal;font-weight:500;height:40px;left:15px;letter-spacing:normal;line-height:normal;position:relative;text-align:center;top:4px;width:16px}.shoppinglist flipper-autocomplete .mat-option .update-qty{border:1px solid #3f5ec6;border-radius:2px;float:right;height:50px;margin-left:8px;position:relative;right:0;top:34.7px;width:123.3px}.shoppinglist flipper-autocomplete .mat-option .update-qty table{width:100%}.shoppinglist flipper-autocomplete .mat-option .update-qty table tr td{color:#1b2125;font-family:Roboto;font-size:22px;font-stretch:normal;font-style:normal;font-weight:500;height:40px;letter-spacing:normal;line-height:normal;position:relative;text-align:center;top:4px;width:16px}.shoppinglist flipper-autocomplete .mat-option .item{bottom:3px;display:inline-table;left:30px;position:relative}.shoppinglist flipper-autocomplete .mat-option .item .item-sub-title{display:block;position:relative}.shoppinglist flipper-autocomplete .mat-option .item .item-sub-title .details{bottom:12px;color:#202124;display:inline-block;font-family:Roboto;font-size:14px;font-stretch:normal;font-style:normal;font-weight:500;height:19px;letter-spacing:-.05px;line-height:normal;margin-right:18px;position:relative;width:auto}.shoppinglist flipper-autocomplete .mat-option .item .item-sub-title .details .oval{background-color:#53be6d;border-radius:50px;bottom:0;height:8px;left:0;position:absolute;right:0;top:5px;width:8px}.shoppinglist flipper-autocomplete .mat-option .item .item-title{color:#2575ec;font-family:Roboto;font-size:20px;font-stretch:normal;font-style:normal;font-weight:400;height:26px;letter-spacing:-.07px;line-height:normal;width:240px}.shoppinglist flipper-autocomplete .mat-option .icon{background-color:#fff;border:1px solid #d6daff;border-radius:4px;display:inline-block;height:53px;left:11px;position:relative;top:32px;width:53px}.shoppinglist flipper-autocomplete .mat-option .icon .icon-img{height:36px;left:4px;position:relative;top:7px;width:47px}"]}]}],O.propDecorators={updateQtyEmit:[{type:e.Output}],removeItemEmit:[{type:e.Output}],orderItems:[{type:e.Input,args:["orderItems"]}]};var C=function(){function t(){}return t.prototype.ngOnInit=function(){},t}();C.decorators=[{type:e.Component,args:[{selector:"flipper-standard-shopping-list",template:"<p>standard-shopping-list works!</p>\r\n",encapsulation:e.ViewEncapsulation.None,changeDetection:e.ChangeDetectionStrategy.OnPush,styles:[""]}]}],C.ctorParameters=function(){return[]};var k=function(){function t(t,r,n,i){this.totalPipe=t,this.dialog=r,this.randPipe=n,this.findKeyPipe=i,this.closeModelEmit=new e.EventEmitter,this.currentNumber="0",this.isNegativeNumber=!1,this.isCurrentOrder=null,this.saveOrderUpdatedEmit=new e.EventEmitter,this.collectCashEmit=new e.EventEmitter,this.currency="RWF",this.didCollectCashCompleted={isCompleted:!1,collectedOrder:null},this.isCalculatorNumOpen=!1,this.calculatorNums=[],this.searchInputElement=null}return Object.defineProperty(t.prototype,"currentOrder",{get:function(){return this.isCurrentOrder},set:function(t){this.isCurrentOrder=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"collectCashCompleted",{get:function(){return this.didCollectCashCompleted},set:function(t){this.didCollectCashCompleted=t,this.getCollectCashCompleted(t)},enumerable:!1,configurable:!0}),t.prototype.getCollectCashCompleted=function(t){var e=this;if(t&&t.isCompleted){var r=0===t.collectedOrder.customerChangeDue||"0.00"===t.collectedOrder.customerChangeDue?"No":this.randPipe.transform(t.collectedOrder.customerChangeDue),n=this.randPipe.transform(t.collectedOrder.cashReceived);return this.dialog.message("Success Message",r+" change out of "+n,"Success","SIZE_MD").subscribe((function(){e.isCalculatorNumOpen=!1,e.closeModelEmit.emit(!0),console.log("cash collected successfully")}))}},t.prototype.onKeydownHandler=function(t){if(this.currentOrder)if("search"===t.type||"number"===t.type||"text"===t.type||"Enter"!==t.key&&"End"!==t.key||this.collectCash(),(t.shiftKey&&"F"===t.key||t.shiftKey&&"K"===t.key||t.shiftKey&&"S"===t.key)&&(this.isCalculatorNumOpen=!1),"search"!==t.target.type&&"number"!==t.target.type&&"text"!==t.target.type){if("Delete"===t.key||t.shiftKey&&"+"===t.key||t.shiftKey&&"K"===t.key||t.shiftKey&&"S"===t.key||t.shiftKey&&"F"===t.key||t.shiftKey&&"-"===t.key)this.isCalculatorNumOpen=!1;else if(this.isCalculatorNumOpen=!0,this.isCalculatorNumOpen){var e=t.key;if(e.match(/^[0-9.]+$/)){this.calculatorNums.push(e);var r=this.calculatorNums.join("");this.getNumberOnKeyPress(r)}if("Backspace"===t.key){this.calculatorNums.pop();r=this.calculatorNums.join("");this.getNumberOnKeyPress(r)}}}else"Shift"===t.key&&(this.isCalculatorNumOpen=!this.isCalculatorNumOpen)},t.prototype.clear=function(){if(this.currentOrder){this.calculatorNums.pop();var t=this.calculatorNums.join("");this.getNumberOnKeyPress(t)}},t.prototype.getDecimal=function(){this.currentNumber.includes(".")||(this.currentNumber+=".")},t.prototype.getNumberOnKeyPress=function(t){this.currentNumber=t||"0",this.makeTotal()},t.prototype.getNumber=function(t){var e=this;if(!this.currentOrder)return this.dialog.message("Failure Message","No current order created!","Failure","SIZE_SM").subscribe((function(){e.isCalculatorNumOpen=!1,e.closeModelEmit.emit(!0)}));this.isCalculatorNumOpen=!0,this.calculatorNums.push(t);var r=this.calculatorNums.join("");this.getNumberOnKeyPress(r)},t.prototype.makeTotal=function(){var t=this;if(this.currentOrder){if(this.currentOrder.subTotal<=0)return this.isCalculatorNumOpen=!1,this.calculatorNums.pop(),this.dialog.message("Failure Message","No shopping list could found!","Failure","SIZE_SM").subscribe((function(){t.isCalculatorNumOpen=!1,t.closeModelEmit.emit(!0)}));this.currentOrder.saleTotal=this.currentOrder.subTotal+this.currentOrder.taxAmount,this.currentOrder.cashReceived=this.currentNumber,this.currentOrder.cashReceived=this.currentOrder.cashReceived?this.currentOrder.cashReceived:this.currentOrder.saleTotal,this.currentOrder.customerChangeDue=this.currentOrder.cashReceived>0?this.currentOrder.cashReceived-this.currentOrder.saleTotal:0,this.saveOrderUpdatedEmit.emit(this.currentOrder)}},t.prototype.onKeyFocused=function(t){if(this.currentOrder)return this.findKeyPipe.transform(this.calculatorNums,t)},t.prototype.collectCash=function(){var t=this;return this.currentOrder?(this.currentOrder.orderItems.forEach((function(e){e.quantity<=0&&t.dialog.message("Failure Message","Negative quantity is not allowed.","Failure","SIZE_SM").subscribe((function(){}))})),this.collectCashEmit.emit(!1),this.currentOrder.subTotal<=0?this.dialog.message("Failure Message","Total to be paid is equal to zero.","Failure","SIZE_SM").subscribe((function(){t.isCalculatorNumOpen=!1,t.closeModelEmit.emit(!0)})):this.currentOrder.customerChangeDue<0?this.dialog.message("Failure Message","Cash received can't less than 0!","Failure","SIZE_SM"):(0===this.currentOrder.customerChangeDue&&(this.currentOrder.cashReceived=parseFloat(this.currentOrder.saleTotal),this.currentOrder.customerChangeDue=parseFloat(this.currentOrder.cashReceived)-parseFloat(this.currentOrder.saleTotal)),this.currentOrder.cashReceived=parseFloat(this.currentOrder.cashReceived),this.currentOrder.active=!1,this.saveOrderUpdatedEmit.emit(this.currentOrder),this.collectCashEmit.emit(!0),this.isCalculatorNumOpen=!1,void(this.calculatorNums=[]))):this.dialog.message("Failure Message","No current order created!","Failure","SIZE_SM")},t}();k.decorators=[{type:e.Component,args:[{selector:"flipper-calculator",template:'<div class="calculator" [class.calculatorNumOpen]="isCalculatorNumOpen">\r\n  <div class="keys">\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'7\')" (click)="getNumber(\'7\')"><span class="value">7</span>\r\n    </div>\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'8\')" (click)="getNumber(\'8\')"><span class="value">8</span>\r\n    </div>\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'9\')" (click)="getNumber(\'9\')"><span class="value">9</span>\r\n    </div>\r\n\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'4\')" (click)="getNumber(\'4\')"><span class="value">4</span>\r\n    </div>\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'5\')" (click)="getNumber(\'5\')"><span class="value">5</span>\r\n    </div>\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'6\')" (click)="getNumber(\'6\')"><span class="value">6</span>\r\n    </div>\r\n\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'1\')" (click)="getNumber(\'1\')"><span class="value">1</span>\r\n    </div>\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'2\')" (click)="getNumber(\'2\')"><span class="value">2</span>\r\n    </div>\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'3\')" (click)="getNumber(\'3\')"><span class="value">3</span>\r\n    </div>\r\n\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'.\')" (click)="getNumber(\'.\')"><span class="value">.</span>\r\n    </div>\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'0\')" (click)="getNumber(\'0\')"><span class="value">0</span>\r\n    </div>\r\n    <div class="key" [class.calculatorKeyOpen]="onKeyFocused(\'00\')" (click)="getNumber(\'00\')"><span\r\n        class="value">00</span></div>\r\n  </div>\r\n  <div class="results-area">\r\n    <div class="row results" *ngIf="currentOrder">\r\n      <div class="col-4">\r\n        <div class="amounts">\r\n          {{currency}} {{currentOrder.cashReceived | roundNumber}}\r\n        </div>\r\n      </div>\r\n      <div class="col-1">\r\n        <div class="btn-clear">\r\n          <button type="button" class="clear" (click)="clear()">CLEAR</button>\r\n        </div>\r\n\r\n      </div>\r\n\r\n    </div>\r\n    <div>\r\n      <div class="row" *ngIf="currentOrder">\r\n        <div class="col">\r\n          <table>\r\n            <tr *ngIf="currentOrder.subTotal">\r\n              <td>\r\n                <span class="amount-title1" style="font-size:11px!important">SUB-TOTAL</span>\r\n              </td>\r\n              <td>\r\n                <span class="amount-number1" style="font-size:11px!important">{{currency}} {{currentOrder.subTotal | roundNumber}}</span>\r\n              </td>\r\n\r\n            </tr>\r\n            <tr *ngIf="currentOrder.taxAmount">\r\n              <td>\r\n                <span class="amount-title1" style="font-size:11px!important">VAT</span>\r\n              </td>\r\n              <td>\r\n                <span class="amount-number1" style="font-size:11px!important">{{currency}} {{currentOrder.taxAmount | roundNumber}}</span>\r\n              </td>\r\n\r\n            </tr>\r\n            <tr *ngIf="currentOrder.saleTotal" style="margin-top:1px; border-top: 2px #000 solid!important">\r\n              <td>\r\n                <span class="amount-title1">TOTAL TO BE PAID</span>\r\n              </td>\r\n              <td>\r\n                <span class="amount-number1">{{currency}} {{currentOrder.saleTotal | roundNumber}}</span>\r\n              </td>\r\n\r\n            </tr>\r\n            <tr *ngIf="currentOrder.customerChangeDue">\r\n              <td>\r\n                <span class="amount-title1">CHANGE</span>\r\n              </td>\r\n              <td>\r\n                <span class="amount-number1"\r\n                  [ngClass]="currentOrder && currentOrder.customerChangeDue < 0?\'colorToRed\':\'colorToBack\'">{{currency}}\r\n                  {{currentOrder.customerChangeDue | roundNumber}}\r\n                </span>\r\n              </td>\r\n            </tr>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      <div class="row" *ngIf="currentOrder">\r\n        <div class="col">\r\n          <button type="button" *ngIf="currentOrder" class="cash-btn" (click)="collectCash()">\r\n            <span class="cash-btn-Text">Collect Cash</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n',providers:[r.CalculateTotalClassPipe,r.FindKeyPipe,r.RoundNumberPipe],styles:['.calculatorNumOpen{border:2px solid #3f5ec6!important}.calculatorKeyOpen{border:1px solid #3f5ec6!important}*{box-sizing:border-box}.row:after{clear:both;content:"";display:table}.row{margin:3px 3px 15px}.row .row:after{clear:both;content:"";display:table}.row .col{padding:5px;width:100%}.row .col-1{padding:5px;width:25%}.row .col-4{padding:5px;width:75%}.row .col-3{padding:5px;width:50%}.row .col-2{padding:5px;width:33.3%}.calculator{-webkit-touch-callout:none;-webkit-user-select:none;background-color:#fcfeff;border:1px solid #e2e9ed;border-radius:6px;overflow:auto;padding:5px;user-select:none;width:100vh}.calculator .results-area{margin:2px}.calculator .results-area .results{background-color:#f0f5fb;border:1px solid rgba(95,147,255,.06);height:82px}.calculator .results-area .results .amounts{color:#1b2125;font-family:Roboto;font-size:30px;font-stretch:normal;font-style:normal;font-weight:400;height:66px;left:8px;letter-spacing:normal;line-height:normal;position:relative;top:28%;width:100%}.calculator .results-area .results .btn-clear{position:relative;right:8px;top:20%}.calculator .results-area .results .btn-clear .clear{background-color:#ee4e5c;border:1px solid #ee4e5c;border-radius:2px;color:#fff;font-stretch:normal;font-style:normal;font-weight:500;height:45px;letter-spacing:1.25px;line-height:1.14;text-align:center;width:100%}.calculator .results-area .totalAmounts{background-color:rgba(95,147,255,.06);border:1px solid #5f93ff;height:90px}.calculator .results-area .totalAmounts .colorToRed{color:red!important}.calculator .results-area .totalAmounts .colorToBack{color:#1b2125!important}.calculator .results-area .totalAmounts .amount-title{font-size:14px;font-weight:500;height:19px;top:12px;width:117px}.calculator .results-area .totalAmounts .amount-number,.calculator .results-area .totalAmounts .amount-title{color:#1b2125;font-family:Roboto;font-stretch:normal;font-style:normal;left:13px;letter-spacing:normal;line-height:normal;position:relative}.calculator .results-area .totalAmounts .amount-number{display:block;font-size:16px;font-weight:400;height:66px;top:30px;width:123px}.calculator .results-area .cash-btn{background-color:#48b332;border:1px solid #48b332;border-radius:2px;height:45px;position:relative;width:100%}.calculator .results-area .cash-btn .cash-btn-Text{color:#fff;font-family:Roboto;font-size:14px;font-stretch:normal;font-style:normal;font-weight:500;height:16px;letter-spacing:1.25px;line-height:1.14;text-align:center;width:114px}.calculator .keys{margin:3px 3px 15px}.calculator .key{background-color:#f0f5fb;border:1px solid rgba(95,147,255,.06);cursor:pointer;display:inline-block;height:82px;overflow:hidden;vertical-align:middle;width:33.3%}.calculator .key .value{bottom:18px;color:#202124;font-family:Roboto;font-size:34px;font-stretch:normal;font-style:normal;font-weight:500;height:45px;left:44%;letter-spacing:3.04px;line-height:normal;position:relative;right:0;text-align:center;top:22px;width:23px}.amount-title1{font-size:15px;font-weight:600}.amount-number1,.amount-title1{color:#1b2125;font-family:Roboto;font-stretch:normal;font-style:normal;letter-spacing:normal;line-height:normal;position:relative}.amount-number1{display:block;font-size:20px;font-weight:700;font-weight:400}']}]}],k.ctorParameters=function(){return[{type:r.CalculateTotalClassPipe},{type:i.DialogService},{type:r.RoundNumberPipe},{type:r.FindKeyPipe}]},k.propDecorators={currentOrder:[{type:e.Input,args:["currentOrder"]}],collectCashCompleted:[{type:e.Input,args:["collectCashCompleted"]}],closeModelEmit:[{type:e.Output}],saveOrderUpdatedEmit:[{type:e.Output}],collectCashEmit:[{type:e.Output}],currency:[{type:e.Input}],searchInputElement:[{type:e.ViewChild,args:["mySearchInput",{static:!1}]}],onKeydownHandler:[{type:e.HostListener,args:["document:keydown",["$event"]]}]};function I(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{l(n.next(t))}catch(t){o(t)}}function s(t){try{l(n.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((n=n.apply(t,e||[])).next())}))}function S(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function E(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}Object.create;var F="http://localhost:8082",N=function(){function t(t,e,n,i,o,a){this.database=t,this.stock=e,this.http=n,this.variant=i,this.product=o,this.totalPipe=a,this.defaultBusiness$=null,this.defaultBranch=null,this.defaultTax$=null,this.orderDetails=[],this.currency=null,this.variants=[],this.seTheVariantFiltered=[],this.collectCashCompleted={},this.date=(new Date).toISOString(),this.database.connect(r.PouchConfig.bucket,localStorage.getItem("channel")),this.database.sync([r.PouchConfig.syncUrl])}return Object.defineProperty(t.prototype,"theVariantFiltered",{get:function(){return this.seTheVariantFiltered},set:function(t){this.seTheVariantFiltered=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentOrder",{get:function(){return this.setCurrentOrder},set:function(t){this.setCurrentOrder=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stockVariant",{get:function(){return this.setStockVariant},set:function(t){this.setStockVariant=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"taxes",{get:function(){return this.setTaxes},set:function(t){this.setTaxes=t},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){return I(this,void 0,void 0,(function(){var t;return S(this,(function(e){switch(e.label){case 0:return[4,this.getTaxes()];case 1:return e.sent(),[4,this.currentBusiness()];case 2:return e.sent(),[4,this.currentBranches()];case 3:return e.sent(),[4,this.newOrder()];case 4:return e.sent(),[4,this.hasDraftOrder()];case 5:return e.sent(),[4,this.stockVariants()];case 6:return e.sent(),t=this.currentOrder,[4,this.currentOrder];case 7:return t.orderItems=e.sent()&&this.currentOrder.orderItems&&this.currentOrder.orderItems.length>0?this.currentOrder.orderItems:[],this.updateOrder([]),this.currency=this.defaultBusiness$?this.defaultBusiness$.currency:"RWF",[2]}}))}))},t.prototype.currentBusiness=function(){return I(this,void 0,void 0,(function(){var t=this;return S(this,(function(e){switch(e.label){case 0:return[4,this.http.get(F+"/api/business").toPromise().then((function(e){t.defaultBusiness$=e}))];case 1:return e.sent(),[2]}}))}))},t.prototype.getTaxes=function(){return I(this,void 0,void 0,(function(){var t=this;return S(this,(function(e){switch(e.label){case 0:return[4,this.http.get(F+"/api/taxes").toPromise().then((function(e){t.taxes=e}))];case 1:return e.sent(),[2]}}))}))},t.prototype.currentBranches=function(){return I(this,void 0,void 0,(function(){var t=this;return S(this,(function(e){switch(e.label){case 0:return[4,this.http.get(F+"/api/branches/"+this.defaultBusiness$.id).toPromise().then((function(e){var r,n;try{for(var i=E(e),o=i.next();!o.done;o=i.next()){var a=o.value;a.active&&(t.defaultBranch=a)}}catch(t){r={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}}))];case 1:return e.sent(),[2]}}))}))},t.prototype.makeid=function(t){for(var e="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=r.length,i=0;i<t;i++)e+=r.charAt(Math.floor(Math.random()*n));return e},t.prototype.generateCode=function(){return this.makeid(5)},t.prototype.newOrder=function(){return I(this,void 0,void 0,(function(){var t,e=this;return S(this,(function(n){switch(n.label){case 0:return this.currentOrder?[3,2]:(t={reference:"SO"+this.generateCode(),orderNumber:"SO"+this.generateCode(),branchId:this.defaultBranch.id,status:r.STATUS.OPEN,orderType:r.ORDERTYPE.SALES,active:!0,orderItems:[],subTotal:0,draft:!0,cashReceived:0,customerChangeDue:0,table:"orders",channels:[this.defaultBusiness$.userId],createdAt:this.date,updatedAt:this.date},[4,this.http.post(F+"/api/order",t).toPromise().then((function(t){e.currentOrder=t}))]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},t.prototype.hasDraftOrder=function(){return I(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,this.draftOrder(this.defaultBranch)];case 1:return t.sent(),[2]}}))}))},t.prototype.draftOrder=function(t){return I(this,void 0,void 0,(function(){var t=this;return S(this,(function(e){switch(e.label){case 0:return[4,this.http.post(F+"/api/order",{}).toPromise().then((function(e){return I(t,void 0,void 0,(function(){var t;return S(this,(function(r){switch(r.label){case 0:return this.currentOrder=e,t=this.currentOrder,[4,this.currentOrder];case 1:return t.orderItems=r.sent()&&this.currentOrder.orderItems&&this.currentOrder.orderItems.length>0?this.currentOrder.orderItems:[],[2]}}))}))}))];case 1:return e.sent(),[2]}}))}))},t.prototype.stockVariants=function(){return I(this,void 0,void 0,(function(){var t=this;return S(this,(function(e){switch(e.label){case 0:return[4,this.http.get(F+"/api/stock-variant").toPromise().then((function(e){e.length>0?t.stockVariant=e:t.stockVariant=[]}))];case 1:return e.sent(),[2]}}))}))},t.prototype.loadVariants=function(t){void 0===t&&(t=null);var e=[];return this.stockVariant.length>0&&this.stockVariant.forEach((function(t){var r={id:t.id,variantId:t.variantId,price:t.retailPrice,sku:t.sku?t.sku:"00",variantName:t.variantName?t.variantName:"no item",productName:t.productName?t.productName:"no item",taxName:t.taxName,taxRate:t.taxPercentage,unit:t.unit,currentStock:t.currentStock,canTrackingStock:t.canTrackingStock,lowStock:t.lowStock,branchId:t.branchId};r.currentStock>0&&e.push(r)})),e},t.prototype.iWantToSearchVariant=function(t){if(t&&null!=t&&null!=t){var e=this.loadVariants(t);console.log(this.loadVariants(t)),e.length>0&&(this.theVariantFiltered=this.filterByValue(e,t))}},t.prototype.filterByValue=function(t,e){var r=e.toString().toLowerCase();return t.filter((function(t,e){var n,i,o,a,s;return t.variantName.toString().toLowerCase().indexOf(r)>=0||(null===(n=t.sku)||void 0===n?void 0:n.toString().toLowerCase().includes(r))>=0||(null===(i=t.retailPrice)||void 0===i?void 0:i.toString().toLowerCase().includes(r))>=0||(null===(o=t.unit)||void 0===o?void 0:o.toString().toLowerCase().includes(r))>=0||(null===(a=t.unit)||void 0===a?void 0:a.toString().toLowerCase().includes(r))>=0||(null===(s=t.productName)||void 0===s?void 0:s.toString().toLowerCase().indexOf(r))>=0}))},t.prototype.updateOrderDetails=function(t){return I(this,void 0,void 0,(function(){var e,r,n;return S(this,(function(i){return"DELETE"===t.action&&(this.currentOrder.orderItems=this.currentOrder.orderItems.filter((function(e){return e.id!=t.item.id}))),"UPDATE"===t.action&&(t.item.price=parseFloat(t.item.price),e=t.item.taxRate?t.item.taxRate:0,r=t.item.price*t.item.quantity,t.item.taxAmount=r*e/100,t.item.subTotal=r,this.currentOrder.orderItems=this.currentOrder.orderItems.filter((function(e){return e.id!=t.item.id})),this.currentOrder.orderItems.push(t.item)),n=this.currentOrder.orderItems,this.updateOrder(n),[2]}))}))},t.prototype.updateOrder=function(t){return I(this,void 0,void 0,(function(){var e,r,n,i=this;return S(this,(function(o){return e=[],(e=0==t.length?this.currentOrder.orderItems.filter((function(t){return t.orderId==i.currentOrder.id})):t).length>0&&(r=parseFloat(this.totalPipe.transform(e,"subTotal")),n=parseFloat(this.totalPipe.transform(e,"taxAmount")),this.currentOrder.subTotal=r,this.currentOrder.taxAmount=n,this.currentOrder.saleTotal=r+n,this.currentOrder.customerChangeDue=this.currentOrder.cashReceived>0?parseFloat(this.currentOrder.cashReceived)-this.currentOrder.saleTotal:0,this.currentOrder.customerChangeDue=parseFloat(this.currentOrder.customerChangeDue),this.currentOrder=this.currentOrder),[2]}))}))},t.prototype.addToCart=function(t){return I(this,void 0,void 0,(function(){var e,r,n;return S(this,(function(i){switch(i.label){case 0:return t.id=this.database.uid(),t.orderId=this.currentOrder.id,e=t.taxRate?t.taxRate:0,r=t.price*t.quantity,t.taxAmount=r*e/100,t.subTotal=r,this.currentOrder.orderItems.push(t),(n=this.currentOrder.orderItems).length>0?[4,this.updateOrder(n)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},t.prototype.didCollectCash=function(t){return I(this,void 0,void 0,(function(){var e=this;return S(this,(function(n){switch(n.label){case 0:return this.collectCashCompleted={isCompleted:!1,collectedOrder:this.currentOrder},!0!==t?[3,3]:[4,this.createStockHistory()];case 1:return n.sent(),this.currentOrder.isDraft=!1,this.currentOrder.status=r.STATUS.COMPLETE,this.currentOrder.createdAt=(new Date).toISOString(),this.currentOrder.updatedAt=(new Date).toISOString(),this.currentOrder.active=!1,this.currentOrder.draft=!1,this.currentOrder.orderItems,[4,this.http.put(F+"/api/order/"+this.currentOrder.id,this.currentOrder).toPromise().then((function(t){return I(e,void 0,void 0,(function(){return S(this,(function(e){switch(e.label){case 0:return this.collectCashCompleted={isCompleted:!0,collectedOrder:t},this.currentOrder=null,[4,this.newOrder()];case 1:return e.sent(),[4,this.hasDraftOrder()];case 2:return e.sent(),[2]}}))}))}))];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},t.prototype.createStockHistory=function(){return I(this,void 0,void 0,(function(){var t,e=this;return S(this,(function(r){return(t=this.currentOrder.orderItems).length&&t.forEach((function(t){return I(e,void 0,void 0,(function(){var e;return S(this,(function(r){switch(r.label){case 0:return t.currentStock>0?(e={id:this.database.uid(),orderId:t.orderId,variantId:t.variantId,variantName:t.variantName,stockId:t.id,reason:"Sold",quantity:t.quantity,isDraft:!1,note:"Customer sales",table:"stockHistories",createdAt:(new Date).toISOString(),updatedAt:(new Date).toISOString(),channels:[this.defaultBusiness$.userId]},[4,this.http.post(F+"/api/stock-histories",e).toPromise().then()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))})),[2]}))}))},t.prototype.saveOrderUpdated=function(t){return I(this,void 0,void 0,(function(){return S(this,(function(t){switch(t.label){case 0:return[4,this.updateOrder([])];case 1:return t.sent(),[2]}}))}))},t}();N.decorators=[{type:e.Component,args:[{selector:"lib-flipper-pos",template:'<div @insertPos>\r\n  <flipper-basic-pos\r\n\r\n  [currentOrder]="currentOrder"\r\n  [collectCashCompleted]="collectCashCompleted"\r\n  [taxes]="taxes"\r\n  [currency]="currency"\r\n  (addToCartEmit)="addToCart($event)"\r\n  [foundVariant]="theVariantFiltered"\r\n  (searchEmitValue)="iWantToSearchVariant($event)"\r\n  (saveOrderUpdatedEmit)="saveOrderUpdated($event)"\r\n  (updateOrderDetailsEmit)="updateOrderDetails($event)"\r\n  (didCollectCashEmit)="didCollectCash($event)">\r\n  </flipper-basic-pos>\r\n\r\n</div>\r\n',animations:[d.trigger("insertPos",[d.transition(":enter",d.useAnimation(r.fadeInAnimation,{params:{duration:"1s"}}))])],styles:["section{background-color:#29282e;font-family:sans-serif;height:100vh;position:absolute;text-align:center;top:0;width:100vw}h1{color:#66d9ef}span{color:#fff;font-size:18px;margin-top:50px}.btns-container{display:flex;flex-direction:row;justify-content:space-around;margin:50px auto;width:350px}.copyright{bottom:30px;color:#fff;position:absolute;width:100%}span{display:block;margin:10px auto;padding:0;width:100%}"]}]}],N.ctorParameters=function(){return[{type:r.PouchDBService},{type:u.StockService},{type:p.HttpClient},{type:u.VariationService},{type:u.ProductService},{type:r.CalculateTotalClassPipe}]};var T=function(){};T.decorators=[{type:e.NgModule,args:[{declarations:[y,v,x,w,O,C,k,g,b,N],imports:[c.CommonModule,p.HttpClientModule,r.FlipperComponentsModule,h.BrowserAnimationsModule,m.BrowserModule,s.VendorsModule,i.DialogModule],entryComponents:[g,b],exports:[y,v,x,w,O,C,k,N]}]}],t.AutocompleteComponent=x,t.BasicShoppingListComponent=O,t.CalculatorComponent=k,t.FlipperBasicPosComponent=y,t.FlipperPosComponent=N,t.FlipperPosModule=T,t.FlipperPosService=f,t.SearchBoxComponent=v,t.ShoppingListsComponent=w,t.StandardShoppingListComponent=C,t.ɵa=g,t.ɵb=b,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=enexus-flipper-pos.umd.min.js.map