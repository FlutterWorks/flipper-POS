<div class="details-list">
   <!-- Items ---------------------------------- -->

   <form [formGroup]="itemForm" (ngSubmit)="saveItem()">
      <mat-card-content>
        <mat-form-field class="ybx-mat mat-full-wdth" appearance="outline">
            <mat-label>Enter product name</mat-label>
            <input class="text-secondary" matInput placeholder="Item name" formControlName="item" required>
              <mat-error  *ngIf="item.invalid && (item.dirty || item.touched)">
                <mat-error *ngIf="item.errors.item && !item.errors.required">
                  Please enter a valid item name
                </mat-error>
                <mat-error *ngIf="item.errors.required">
                  Item name is <strong>required</strong>
                </mat-error>
              </mat-error>
          </mat-form-field>

          <mat-form-field class="col-6 ybx-mat mat-full-wdth" appearance="outline">
              <mat-label>Enter SKU</mat-label>
            <input class="text-secondary" [matTooltip]="sku_tool_tips" aria-label="Stock Keeping Unit" matInput placeholder="Sku (auto generated if blank)" formControlName="sku" required>
            <mat-icon matSuffix [matTooltip]="sku_tool_tips" aria-label="Stock Keeping Unit">info</mat-icon>

            <mat-error  *ngIf="sku.invalid && (sku.dirty || sku.touched)">
              <mat-error *ngIf="sku.errors.sku && !sku.errors.required">
                Please enter a valid sku
              </mat-error>
              <mat-error *ngIf="sku.errors.required">
                  Item sku is <strong>required</strong>
              </mat-error>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="col-6 ybx-mat mat-full-wdth" appearance="outline">
              <mat-label>Enter barcode</mat-label>
            <input class="text-secondary"[matTooltip]="upc_tool_tips" aria-label="Barcode" matInput placeholder="Barcode (if available)" formControlName="barcode" required>
            <mat-icon matSuffix [matTooltip]="upc_tool_tips" aria-label="Universal Product Code">info</mat-icon>

            <mat-error  *ngIf="barcode.invalid && (barcode.dirty || barcode.touched)">
              <mat-error *ngIf="barcode.errors.barcode && !barcode.errors.required">
                Please enter a valid barcode, only number allowed
              </mat-error>
              <mat-error *ngIf="barcode.errors.required">
                  Item barcode is <strong>required</strong>
              </mat-error>
            </mat-error>
          </mat-form-field><br />


          <mat-form-field class="ybx-mat mat-full-wdth" appearance="outline">
            <mat-label>Enter product category</mat-label>
            <mat-select placeholder="{{category_placeholder}}"  formControlName="category_id" required>
                <mat-option>None</mat-option>
              <mat-option *ngFor="let category of categories" [value]="category.category_id">
                {{category.name}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="category_id.invalid && (category_id.dirty || category_id.touched)">
              <strong *ngIf="category_id.errors.required">Category is required.</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="col-6 ybx-mat mat-full-wdth" appearance="outline">
            <mat-label>Enter product tax rate</mat-label>
            <mat-select class="w-100" formControlName="tax_rate_id" required>
              <mat-option *ngFor="let taxrate of taxrates" [value]="taxrate.tax_rate_id">
                {{taxrate.name}}
              </mat-option>
            </mat-select>
            <mat-error *ngIf="tax_rate_id.invalid && (tax_rate_id.dirty || tax_rate_id.touched)">
              <strong *ngIf="tax_rate_id.errors.required">Tax rate is required.</strong>
            </mat-error>

          </mat-form-field>

          <mat-form-field class="col-6 ybx-mat mat-full-wdth" appearance="outline">
              <mat-label>Enter product brand</mat-label>
              <mat-select placeholder="Brand" class="w-100" formControlName="brand_id" required>
                <mat-option>None</mat-option>
                <mat-option *ngFor="let brand of brands" [value]="brand.brand_id">
                  {{brand.name}}
                </mat-option>
              </mat-select>

              <mat-error *ngIf="brand_id.invalid && (brand_id.dirty || brand_id.touched)">
                <strong *ngIf="brand_id.errors.required">brand is required.</strong>
              </mat-error>

            </mat-form-field>

          <mat-form-field class="ybx-mat mat-full-wdth" appearance="outline">
            <mat-label>Enter manufacturer</mat-label>
              <input class="text-secondary" matInput placeholder="Manufacturer (Optinal)" formControlName="manufacturer">
            </mat-form-field>
            <mat-form-field class="ybx-mat mat-full-wdth" appearance="outline">
              <mat-label>Enter summary</mat-label>
                <textarea class="text-secondary" matInput placeholder="Leave a summary" formControlName="summary"></textarea>
            </mat-form-field>

      </mat-card-content>
      <mat-card-actions class="card-actions">
        <button type="submit" class="float-right" mat-button [disabled]="(loading | async)"> <span *ngIf="need_to_add_new">Save</span>
          <span *ngIf="!need_to_add_new">Edit</span></button>
        <button type="button" class="float-right" (click)='close()' [disabled]="(loading | async)" mat-button>Close</button>
      </mat-card-actions>
    </form>
</div>


