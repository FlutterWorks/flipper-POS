<div class="details-list">
    <!-- Items ---------------------------------- -->

    <form [formGroup]="stockForm" (ngSubmit)="updateStock()">
       <mat-card-content>

            <div class="details-list" style="overflow-x: auto">

                <div class="item">
                    <div class="name" trans><b>{{stock.name}}</b></div>
                    <div class="value type-value" trans>({{stock.item.sku}}) {{stock.branch.name}} has <b>{{stock.available_stock_qty}}</b> in-stock</div>
                </div>

                <mat-divider></mat-divider>
                <br />
                <div class="item">
                    <div class="name" trans><b>Transction:</b></div>
                    <div class="value">
                        <mat-radio-group *ngIf="(details$ | async).action=='add'"  formControlName="transction">
                            <mat-radio-button  *ngFor="let opt of add_options" [value]="opt.value" [checked]="opt.checked"><b>{{opt.valueView}}</b></mat-radio-button>
                        </mat-radio-group>
                        <mat-radio-group *ngIf="(details$ | async).action=='remove'"  formControlName="transction">
                            <mat-radio-button  *ngFor="let opt of remove_options" [value]="opt.value" [checked]="opt.checked"><b>{{opt.valueView}}</b></mat-radio-button>
                        </mat-radio-group>

                    </div>
                </div>


                <br />

                <div class="item">
                    <div class="name" trans><b>Transction date:</b></div>
                    <div class="value">
                        <mat-form-field class="text">
                            <input matInput [matDatepicker]="transctiondate" placeholder="Transction date" formControlName="transction_date" required>
                            <mat-datepicker-toggle matSuffix [for]="transctiondate"></mat-datepicker-toggle>
                            <mat-datepicker #transctiondate></mat-datepicker>
                          </mat-form-field>
                    </div>
                </div>

                <div class="item">
                    <div class="name" trans><b>Unit cost:({{stock.item.currency}})</b></div>
                    <div class="value">
                        <mat-form-field class="text">
                            <input class="text-secondary" type="number" matInput placeholder="Unit cost" formControlName="unit_cost" required>
                            <span matSuffix>.00</span>
                              <mat-error  *ngIf="unit_cost.invalid && (unit_cost.dirty || unit_cost.touched)">
                                <mat-error *ngIf="unit_cost.errors.unit_cost && !unit_cost.errors.required">
                                  Please enter a valid unit cost
                                </mat-error>
                                <mat-error *ngIf="unit_cost.errors.required">
                                    Unit cost is <strong>required</strong>
                                </mat-error>
                              </mat-error>

                          </mat-form-field>
                    </div>
                </div>
                <div class="item">
                    <div class="name" trans><b>Quantity:</b></div>
                    <div class="value">
                        <mat-form-field class="ybx-mat mat-full-wdth" *ngIf="(details$ | async).action">
                            <input class="text-secondary" type="number" matInput placeholder="Quantity" formControlName="qty" required>
                              <mat-error  *ngIf="qty.invalid && (qty.dirty || qty.touched)">

                                <mat-error *ngIf="qty.errors.required">
                                  Quantity is <strong>required</strong>
                                </mat-error>
                                <mat-error *ngIf="qty.errors.min">
                                    Quantity <strong>must be greater than 0</strong>
                                  </mat-error>
                                  <mat-error *ngIf="qty.errors.max">
                                      Quantity <strong>will create a negative stock level</strong>
                                    </mat-error>
                              </mat-error>
                          </mat-form-field>

                    </div>

                </div>
                <div class="item" *ngIf="(details$ | async).action=='add'"><h6>Current quantity:<b>{{calculateTQty('add')}}</b></h6></div>
                <div class="item" *ngIf="(details$ | async).action=='remove'"><h6>Current quantity:<b>{{calculateTQty('remove')}}</b></h6></div>
                <div class="item">
                    <div class="name" trans><b>Comments</b></div>
                    <div class="value">
                        <mat-form-field class="text">
                            <textarea class="text-secondary" matInput placeholder="Comments" formControlName="comments" required></textarea>
                              <mat-error  *ngIf="comments.invalid && (comments.dirty || comments.touched)">
                                <mat-error *ngIf="comments.errors.comments && !comments.errors.required">
                                  Please enter a valid comments
                                </mat-error>
                                <mat-error *ngIf="comments.errors.required">
                                    Comments is <strong>required</strong>
                                </mat-error>
                              </mat-error>

                          </mat-form-field>
                    </div>
                </div>
            </div>

        </mat-card-content>
        <mat-card-actions class="card-actions">
            <button type="submit" class="float-right" mat-raised-button color='accent' [disabled]="(loading | async) || stockForm.invalid"> Submit </button>
            <button type="button" class="float-right" (click)='close()' [disabled]="(loading | async)" mat-button>Close</button>
          </mat-card-actions>
     </form>
 </div>

